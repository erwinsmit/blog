{"componentChunkName":"component---src-templates-blog-post-js","path":"/azure-devops-create-pipeline-error/","webpackCompilationHash":"04c6abd57795f98d1695","result":{"data":{"site":{"siteMetadata":{"title":"Erwin Smit blog","author":"Erwin Smit"}},"markdownRemark":{"id":"cc6c8e88-29bd-52ff-a641-3e06312179c0","html":"<h2 id=\"problems-creating-a-new-release-pipeline-in-azure-devops\"><a href=\"#problems-creating-a-new-release-pipeline-in-azure-devops\" aria-label=\"problems creating a new release pipeline in azure devops permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Problems creating a new release pipeline in Azure Devops</h2>\n<p>Currently I’m working on a project that uses a monorepo using LernaJS for building several microsites.\nBecause of this setup we have quite a lot of release pipelines setup in Azure Devops, I’m not sure if it’s because of our setup but recently we couldn’t create new pipelines anymore because of a runtime javascript error. </p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0737848c8a0b38f67331d46f22016f7f/59e8d/runtime-error.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 900px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 50.8682328907048%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABnElEQVQoz5WQ/XaiMBDFef9n2W1fRFvUruux6ioK4SMQEjBB+bidBG1t/9uc8zvDkJmbuePF7wH47oQ6L9FeW1yaCxrTuG8br5frN4Z+cHRt5+77rsfQjbnt8bJfv1E8PYO/+GAsQaMN/usMN27HC5IMQcrBLFEMWUoYEj3XZ+izdrGuasc9v2Pr7o4sWlXwtusNjvsDkjhzE0pRopIKiqiooKQ85/lnjFmMLM0gCuH+PVLQvRfudojCyBUmVChJpKLXFU1kBSs1RjshpwYWMSdonYz3j9RkeR+4oup4RL5eQ2w2KAlJD6kggI5CmDSF4dzRCoGrKAgBnZEwY1AxrSqKUFH0lBzVB9uwmENOJhDTCU4zH4fFAqflEuHqL8rDHm2Wgrx9QcI/8ZQad9XFDOXyD7azGTa+jxUJb6dTmPAEFPnYIEsMFO/09L/LCRe5y28TKrQ0siQx7r+Cv76AkzinFWhahcWwCC3PnPBwm8bmhgYxSQxNsUmc5XHCnl7Q1hrZzN8W2NOU/+ZzsrsCe19D0j6dIFkdHm3/4APpufXDvhAyhQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Runtime error\"\n        title=\"\"\n        src=\"/static/0737848c8a0b38f67331d46f22016f7f/05649/runtime-error.png\"\n        srcset=\"/static/0737848c8a0b38f67331d46f22016f7f/e9d1c/runtime-error.png 225w,\n/static/0737848c8a0b38f67331d46f22016f7f/80b02/runtime-error.png 450w,\n/static/0737848c8a0b38f67331d46f22016f7f/05649/runtime-error.png 900w,\n/static/0737848c8a0b38f67331d46f22016f7f/572e0/runtime-error.png 1350w,\n/static/0737848c8a0b38f67331d46f22016f7f/b501b/runtime-error.png 1800w,\n/static/0737848c8a0b38f67331d46f22016f7f/59e8d/runtime-error.png 1958w\"\n        sizes=\"(max-width: 900px) 100vw, 900px\"\n      />\n  </span>\n  </a></p>\n<p>Now this was really annoying because it stopped our progress on the project, so I spend some time on creating a ‘hackery’ workaround for this. I thought if I could find the bit of code responsible for this and inject this fix using Fiddler we can continue working on releasing our microsites. </p>\n<ol>\n<li>Download the javascript file responsible for the runtime error.\nThe file is currently located on <a href=\"https://cdn.vsassets.io/bundles/vss-bundle-ext-vYSocdSQRIBJBFuCNPJzPBVskXpssC5hGD4GQk8iu_sI=\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://cdn.vsassets.io/bundles/vss-bundle-ext-vYSocdSQRIBJBFuCNPJzPBVskXpssC5hGD4GQk8iu_sI=</a></li>\n</ol>\n<p>Please note that this url will probably change soon, hopefully this error will be gone than anyway. </p>\n<p>Download the file and beautify the javascript using your favourite ‘beautifier’. Now the code should be readable-ish. </p>\n<p>In the beautified code there is a function called ‘createFoldersStructure’. </p>\n<p>At the bottom of the function there is a bit of code that looks like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> o<span class=\"token punctuation\">[</span>p<span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>childFolders<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> o<span class=\"token punctuation\">[</span>l<span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> v<span class=\"token operator\">++</span></code></pre></div>\n<p>All I did to stop this line of code from causing an error is adding some defensive programming:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> o<span class=\"token punctuation\">[</span>p<span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">?</span> o<span class=\"token punctuation\">[</span>p<span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>childFolders<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> o<span class=\"token punctuation\">[</span>l<span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> v<span class=\"token operator\">++</span></code></pre></div>\n<p>Now to actually get this fix implemented let’s set up Fiddler.</p>\n<ol start=\"2\">\n<li>Set up the fiddler autoresponder.\nMake sure your fiddler autoresponder configuration looks like this:</li>\n</ol>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/15804e23a5139989ac206bdd98eefbe6/3b25d/autoresponder.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 900px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 100.52521008403362%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAACXUlEQVQ4y+1UTW/TQBD1r+t/QNwIAlqppVCgB/gXHPhQUhESFLUVVKAeKiEkQKWIIgSljuPEJo7ttePUmzSfTdZJ+hhvWqigJ8qBA5afPDs7+zyzmnlKybWwqW3DVm0wk8EzGPaDLlpBDY5eQLlgo1VtYTgcwveq4G4dXd5DI+igW+vgoCFQddooqUXUggDK3df3cHl1GolsAtOrM1jcWMT19Ru4sjyDi9lLuPp8Hrdf3sHNV7cwuz6H2adzmF+7hoWNBVx4lsC5J+cxdX8Kj9/mINqAsvbxBZJbSWS2M1jeWUH6QxqpzSUsbU2Q3EzhwZuHePQ+LRGvU+9SyHzKIrebw4q6guzXDIphCRgRYeCG8E2fSmyjxw/AqORxd4w/ecajERSzbKFkGDBME5Zlgdfpjno9RFEEEQkJzjk835fYbzYR0X0KITAQA4JAf9CX8f2DAZSKzeBUHNgEx3bAXFrbrrRj7NVCBNUApmGi/K0sYytWBa7jgjmTuOZ+S2YoBgJKvd48SneMw/Gh/J5E7PsVp8WA3sFJwmPnWSD+FuHx2f+E/yohP0F4Fvzsw8aky8/agz8y3AvriMiIRHQ0BadNRWz/XsVoOJaCMBqOJhn2aZYNo4wvn3dglStyZj1GIsA8KaY+2VU/kLZFIhLH2HKWbTnL8ZzXgibCGpc+n1VJbUwLulaArheRV/PQ8hrU3Tz0gg5N1VAkf4H2Y3FwHUbi4UmBiAkD+plZ8mnNiEOXe4rrTjKKg33Pl2rDYpuy84/8sfrUeQPddhedVged9gQ85FQVnSeimDzc4/gOR73j1j7gqEgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Fiddler autoresponder\"\n        title=\"\"\n        src=\"/static/15804e23a5139989ac206bdd98eefbe6/05649/autoresponder.png\"\n        srcset=\"/static/15804e23a5139989ac206bdd98eefbe6/e9d1c/autoresponder.png 225w,\n/static/15804e23a5139989ac206bdd98eefbe6/80b02/autoresponder.png 450w,\n/static/15804e23a5139989ac206bdd98eefbe6/05649/autoresponder.png 900w,\n/static/15804e23a5139989ac206bdd98eefbe6/3b25d/autoresponder.png 952w\"\n        sizes=\"(max-width: 900px) 100vw, 900px\"\n      />\n  </span>\n  </a></p>\n<p>If you haven’t used fiddler over https before you might have to configure the certificate to allow fiddler to work on https calls.</p>\n<p>Make sure your settings look like this, when you click the ‘decrypt’ checkbox fiddler automatically adds a SSL certificate for you. </p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a6e8bb963b32f80babe990693582c5c6/79dd2/fiddler-https-settings.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 900px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 67.99116997792495%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAACBUlEQVQ4y41TaW/bMAz1//9NQzGk26c1Tdq06LocdnzK95Elji3bbyTdBl2WtRVAkHqUKOqRNJpjA912GPoBpzWc6Uvr7Ex9qLFcrmA4tos0yRBHMVa/VrAtG/bWgWVacMn3/PMZruPB2liCmaQ36w343nq1hkc+5StEYSy4YZlbKBXSJZcAU0C2VaAk8NbawnU9wWzboUCO2IynSYpqt5eEqrJC4AcwfM9HSAFZAnrJ9wJ0uht/wzQM+FfEORqWF2KxeJTH+a7Br/kUmTds51mBrtVomxa60RJA0/5IXLdNA+a8EXsg3YsM/fg4J2esl2s8LB6wuLvH0+OT8MW8vH5LU7ZVUSIMI+E5Ip0kCdK0pb0W2e8pYt/DcylgQJnxwTiK6NuKQOaPsDgRnDP7zOq7fsyQuZPLcU4BUyK4pCwyaYPXtuDvvC9vAmbEWVFUJAOKvEcSa7J7OciHLhblQpFOHDp2DdM8EF+/EakIKlQISDxyFnkhBeECfSRcKOGwPnDFuFodtUsvWXHbsLD9GeHs6sNRCml0Wv89TmfyP97e+nhxhtwhRp6VKLIceZojSzPRJ5twnoCKON6Vu1FXO5R5iYymgzVjCRWVp2ZLY2soP6dZDKT3HOp2j8bMexk17tHb6QzTm1vMZ3Pc/Jjibn6PKenrybXsZ+S/+nKFb5PvmHyd4A+kDytwXNh3qwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Fiddler https settings\"\n        title=\"\"\n        src=\"/static/a6e8bb963b32f80babe990693582c5c6/05649/fiddler-https-settings.png\"\n        srcset=\"/static/a6e8bb963b32f80babe990693582c5c6/e9d1c/fiddler-https-settings.png 225w,\n/static/a6e8bb963b32f80babe990693582c5c6/80b02/fiddler-https-settings.png 450w,\n/static/a6e8bb963b32f80babe990693582c5c6/05649/fiddler-https-settings.png 900w,\n/static/a6e8bb963b32f80babe990693582c5c6/79dd2/fiddler-https-settings.png 906w\"\n        sizes=\"(max-width: 900px) 100vw, 900px\"\n      />\n  </span>\n  </a></p>\n<p>I think you can also do similar stuff using the chrome devtools now, but I always find Fiddler great for fixing and debugging issues like this. </p>\n<p>Hope this helps anyone that experiences the same issue!. We did log this issue <a href=\"https://developercommunity.visualstudio.com/content/problem/610555/cannot-saveclone-release-definition.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">here</a>, so hopefully it will be resolved soon. </p>","timeToRead":2,"frontmatter":{"title":"Azure devops create pipeline \"Cannot read property 'childFolders' of undefined\"","date":"June 21, 2019","spoiler":"Fix this azure devops bug with some fiddler hackery"},"fields":{"slug":"/azure-devops-create-pipeline-error/","langKey":"en"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/azure-devops-create-pipeline-error/","previous":null,"next":{"fields":{"slug":"/local-npm package-to-share-between-react-apps/","langKey":"en","directoryName":"local-npm package-to-share-between-react-apps"},"frontmatter":{"title":"Creating local npm package for sharing between multiple react applications"}},"translations":[],"translatedLinks":[]}}}