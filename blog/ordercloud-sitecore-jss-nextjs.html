<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/a34f9d1faa5f3315-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" as="image" href="/blog/api-key.jpg"/><link rel="preload" as="image" href="/blog/ordercloud-products.jpg"/><link rel="stylesheet" href="/_next/static/css/0f5f8cc0eb7d6afc.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/3a398bc4ce4edcc7.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-8af1d2e0ff41d756.js"/><script src="/_next/static/chunks/4bd1b696-05ac3765304a89c0.js" async=""></script><script src="/_next/static/chunks/215-c1a7d2d931604563.js" async=""></script><script src="/_next/static/chunks/main-app-e5edefe120089e16.js" async=""></script><script src="/_next/static/chunks/231-015614b9a59ae6eb.js" async=""></script><script src="/_next/static/chunks/173-e6c8bf506bfb93ff.js" async=""></script><script src="/_next/static/chunks/app/layout-28f46ae9c6a8b2dc.js" async=""></script><script src="/_next/static/chunks/app/not-found-081a5836cd82c2ca.js" async=""></script><meta name="next-size-adjust"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><title>Integrate OrderCloud with Sitecore JSS Next.js</title><meta name="description" content="Erwin Smit - Freelance frontend developer / fullstack developer"/><meta property="og:title" content="Integrate OrderCloud with Sitecore JSS Next.js"/><meta property="og:description" content="Erwin Smit - Freelance frontend developer / fullstack developer"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Integrate OrderCloud with Sitecore JSS Next.js"/><meta name="twitter:description" content="Erwin Smit - Freelance frontend developer / fullstack developer"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="bg-gray-100 [object Object]"><header class="bg-blue-600 text-white shadow-md"><div class="container mx-auto px-4 py-4"><div class="flex justify-between items-center"><a href="/"><div class="flex items-center space-x-4 bg-blue-700 rounded-full py-2 px-4"><img alt="Erwin Smit" loading="lazy" width="40" height="40" decoding="async" data-nimg="1" class="rounded-full border-2 border-white" style="color:transparent;height:40px;width:40px;object-fit:cover" src="/assets/selfie2.jpg"/><span class="font-semibold text-lg text-white">Erwin Smit</span></div></a><nav class="flex-grow"><ul class="flex justify-end space-x-6"><li><a class="hover:text-blue-200 transition duration-150 ease-in-out" href="/">About me</a></li><li><a class="hover:text-blue-200 transition duration-150 ease-in-out" href="/blog">Blog</a></li></ul></nav></div></div></header><main class="min-h-screen"><article class="max-w-7xl mx-auto px-8 my-12"><h1 class="w-full relative mb-8 text-6xl font-extrabold tracking-normal text-center title-font"><span class="bg-clip-text text-transparent bg-gradient-to-b from-blue-600 to-blue-500">Integrate OrderCloud with Sitecore JSS Next.js</span></h1><div class="flex items-center justify-center mb-16"><p class="text-base font-medium text-gray-600 group-hover:text-gray-800"><time dateTime="2021-11-27">November	27, 2021</time></p></div><div class="prose lg:prose-xl max-w-none prose-pre:p-0"><p>In this blog post, I like to explain how easy it is to add some products from OrderCloud to a pre-rendered page in Sitecore JSS using Next.js</p>
<h2>First, make a storefront</h2>
<p>To be able to do this you need to create an OrderCloud marketplace and have some products.
I created a free OrderCloud account and ran these commands to automatically create a marketplace filled with products and facets:</p>
<ul>
<li><code>npm i @ordercloud/seeding -g</code></li>
<li><code>seed https://raw.githubusercontent.com/ordercloud-api/ordercloud-seed/main/seeds/Simple-B2C.yml -u={username} -p={password</code></li>
</ul>
<p>Next, log in to your marketplace and make a note of the Storefront App ID:
<img src="/blog/api-key.jpg" alt="Storefront App ID"/></p>
<p>Add this ID along with these OrderCloud variables to the .env file in the root of your JSS Next.js project:</p>
<pre><code>NEXT_PUBLIC_OC_CLIENT_ID={AddYourStorefrontAppIdHere}
NEXT_PUBLIC_OC_SCOPE=Shopper,MeAddressAdmin
NEXT_PUBLIC_OC_BASE_API_URL=https://sandboxapi.ordercloud.io
NEXT_PUBLIC_OC_ALLOW_ANONYMOUS=false
</code></pre>
<h2>Initialise OrderCloud in your app</h2>
<p>In the _app.tsx add the following code to create a connection to Ordercloud using the Ordercloud Javascript SDK:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Configuration</span>, <span class="hljs-title class_">Tokens</span>, <span class="hljs-title class_">Auth</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;ordercloud-javascript-sdk&quot;</span>;

(<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){
    <span class="hljs-keyword">const</span> clientId = process.<span class="hljs-property">env</span>.<span class="hljs-property">NEXT_PUBLIC_OC_CLIENT_ID</span> || <span class="hljs-string">&quot;&quot;</span>;
    <span class="hljs-keyword">const</span> baseApiUrl = process.<span class="hljs-property">env</span>.<span class="hljs-property">NEXT_PUBLIC_OC_BASE_API_URL</span>;
    <span class="hljs-keyword">const</span> scope = process.<span class="hljs-property">env</span>.<span class="hljs-property">NEXT_PUBLIC_OC_SCOPE</span>?.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;,&quot;</span>);

    <span class="hljs-title class_">Configuration</span>.<span class="hljs-title class_">Set</span>({
      <span class="hljs-attr">clientID</span>: clientId,
      <span class="hljs-attr">baseApiUrl</span>: baseApiUrl,
      <span class="hljs-attr">cookieOptions</span>: { <span class="hljs-attr">prefix</span>: <span class="hljs-string">&quot;hds-nextjs&quot;</span>, <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/&quot;</span> },
    });

    <span class="hljs-keyword">const</span> authResponse = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Auth</span>.<span class="hljs-title class_">Anonymous</span>(clientId, scope || ([<span class="hljs-string">&quot;&quot;</span>] <span class="hljs-keyword">as</span> <span class="hljs-title class_">ApiRole</span>[]));

    <span class="hljs-title class_">Tokens</span>.<span class="hljs-title class_">SetAccessToken</span>(authResponse.<span class="hljs-property">access_token</span>);

})();
</code></pre>
<p>Now you have access to all the OrderCloud stuff throughout your application. If you only need OrderCloud on a specific set of routes, consider moving this logic somewhere else.</p>
<p>To display some products with an active facet pre-selected I have created a simple Sitecore component where the facet is set in the Sitecore admin. Component definition:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">manifest: Manifest</span>): <span class="hljs-keyword">void</span> {
  manifest.<span class="hljs-title function_">addComponent</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;ProductList&quot;</span>,
    <span class="hljs-attr">icon</span>: <span class="hljs-title class_">SitecoreIcon</span>.<span class="hljs-property">DocumentTag</span>,
    <span class="hljs-attr">fields</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;colorfacet&quot;</span>, <span class="hljs-attr">type</span>: <span class="hljs-title class_">CommonFieldTypes</span>.<span class="hljs-property">SingleLineText</span> }],
  });
}
</code></pre>
<h2>Get the products</h2>
<p>In the actual component implementation, the products are fetched using the <code>Me.ListProducts</code> function. To inject the data into the component return the response in <code>getStaticProps</code>. Now the data is available within the component using <code>useComponentProps</code>.</p>
<p>See the code below for an example:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ListPageWithFacets</span>, <span class="hljs-title class_">Me</span>, <span class="hljs-title class_">RequiredDeep</span>, <span class="hljs-title class_">BuyerProduct</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;ordercloud-javascript-sdk&quot;</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">ProductList</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;<span class="hljs-title class_">ProductListProps</span>&gt; = ({ rendering, fields }): <span class="hljs-variable constant_">JSX</span>.<span class="hljs-property">Element</span> =&gt; {
  <span class="hljs-keyword">const</span> data = useComponentProps &lt; <span class="hljs-title class_">RequiredDeep</span> &lt; <span class="hljs-title class_">ListPageWithFacets</span> &lt; <span class="hljs-title class_">BuyerProduct</span> &gt;&gt;&gt; rendering.<span class="hljs-property">uid</span>;
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">getStaticProps</span>: <span class="hljs-title class_">GetStaticComponentProps</span> = <span class="hljs-title function_">async</span> (rendering) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Me</span>.<span class="hljs-title class_">ListProducts</span>({
      <span class="hljs-attr">filters</span>: {
        <span class="hljs-string">&quot;xp.Facets.Color&quot;</span>: rendering.<span class="hljs-property">fields</span>.<span class="hljs-property">colorfacet</span>.<span class="hljs-property">value</span>,
      },
    });

    <span class="hljs-keyword">return</span> response;
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(e);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">ProductList</span>;
</code></pre>
<p>As a result, we now have products from our OrderCloud marketplace rendered on Next.js build-time. Fast and good for SEO!</p>
<p><img src="/blog/ordercloud-products.jpg" alt="OrderCloud products"/></p></div></article></main><section class="bg-gray-800 text-white py-12"><div class="container mx-auto px-4 text-center"><h2 class="text-2xl font-bold mb-6" id="connect">Connect With Me</h2><div class="flex justify-center space-x-6"><a href="https://github.com/erwinsmit" target="_blank" rel="noopener noreferrer" class="hover:text-blue-400 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg><span class="sr-only">GitHub</span></a><a href="https://www.linkedin.com/in/erwin-smit-40957840/" target="_blank" rel="noopener noreferrer" class="hover:text-blue-400 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-linkedin"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect width="4" height="12" x="2" y="9"></rect><circle cx="4" cy="4" r="2"></circle></svg><span class="sr-only">LinkedIn</span></a></div></div></section><script src="/_next/static/chunks/webpack-8af1d2e0ff41d756.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"4:\"$Sreact.fragment\"\n5:I[7256,[\"231\",\"static/chunks/231-015614b9a59ae6eb.js\",\"173\",\"static/chunks/173-e6c8bf506bfb93ff.js\",\"185\",\"static/chunks/app/layout-28f46ae9c6a8b2dc.js\"],\"default\"]\n6:I[9275,[],\"\"]\n7:I[1343,[],\"\"]\n8:I[4703,[\"231\",\"static/chunks/231-015614b9a59ae6eb.js\",\"160\",\"static/chunks/app/not-found-081a5836cd82c2ca.js\"],\"default\"]\na:I[3120,[],\"OutletBoundary\"]\nc:I[3120,[],\"MetadataBoundary\"]\ne:I[3120,[],\"ViewportBoundary\"]\n10:I[6130,[],\"\"]\n1:HL[\"/_next/static/media/a34f9d1faa5f3315-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/css/0f5f8cc0eb7d6afc.css\",\"style\"]\n3:HL[\"/_next/static/css/3a398bc4ce4edcc7.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"_6NfqUco9scY-OJSmFSXy\",\"p\":\"\",\"c\":[\"\",\"blog\",\"ordercloud-sitecore-jss-nextjs\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"ordercloud-sitecore-jss-nextjs\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"ordercloud-sitecore-jss-nextjs\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$4\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/0f5f8cc0eb7d6afc.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"sizes\":\"180x180\",\"href\":\"/favicon/apple-touch-icon.png\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/png\",\"sizes\":\"32x32\",\"href\":\"/favicon/favicon-32x32.png\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/png\",\"sizes\":\"16x16\",\"href\":\"/favicon/favicon-16x16.png\"}],[\"$\",\"link\",null,{\"rel\":\"manifest\",\"href\":\"/favicon/site.webmanifest\"}],[\"$\",\"link\",null,{\"rel\":\"mask-icon\",\"href\":\"/favicon/safari-pinned-tab.svg\",\"color\":\"#000000\"}],[\"$\",\"link\",null,{\"rel\":\"shortcut icon\",\"href\":\"/favicon/favicon.ico\"}],[\"$\",\"meta\",null,{\"name\":\"msapplication-TileColor\",\"content\":\"#000000\"}],[\"$\",\"meta\",null,{\"name\":\"msapplication-config\",\"content\":\"/favicon/browserconfig.xml\"}],[\"$\",\"meta\",null,{\"name\":\"theme-color\",\"content\":\"#000\"}],[\"$\",\"link\",null,{\"rel\":\"alternate\",\"type\":\"application/rss+xml\",\"href\":\"/feed.xml\"}]]}],[\"$\",\"body\",null,{\"className\":\"bg-gray-100 [object Object]\",\"children\":[[\"$\",\"$L5\",null,{}],[\"$\",\"main\",null,{\"className\":\"min-h-screen\",\"children\":[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$\",\"$L8\",null,{}],\"notFoundStyles\":[]}]}],[\"$\",\"section\",null,{\"className\":\"bg-gray-800 text-white py-12\",\"children\":[\"$\",\"div\",null,{\"className\":\"container mx-auto px-4 text-center\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"text-2xl font-bold mb-6\",\"id\":\"connect\",\"children\":\"Connect With Me\"}],[\"$\",\"div\",null,{\"className\":\"flex justify-center space-x-6\",\"children\":[[\"$\",\"a\",null,{\"href\":\"https://github.com/erwinsmit\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"hover:text-blue-400 transition-colors\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":32,\"height\":32,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-github\",\"children\":[[\"$\",\"path\",\"tonef\",{\"d\":\"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4\"}],[\"$\",\"path\",\"9comsn\",{\"d\":\"M9 18c-4.51 2-5-2-7-2\"}],\"$undefined\"]}],[\"$\",\"span\",null,{\"className\":\"sr-only\",\"children\":\"GitHub\"}]]}],[\"$\",\"a\",null,{\"href\":\"https://www.linkedin.com/in/erwin-smit-40957840/\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"hover:text-blue-400 transition-colors\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":32,\"height\":32,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-linkedin\",\"children\":[[\"$\",\"path\",\"c2jq9f\",{\"d\":\"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z\"}],[\"$\",\"rect\",\"mk3on5\",{\"width\":\"4\",\"height\":\"12\",\"x\":\"2\",\"y\":\"9\"}],[\"$\",\"circle\",\"bt5ra8\",{\"cx\":\"4\",\"cy\":\"4\",\"r\":\"2\"}],\"$undefined\"]}],[\"$\",\"span\",null,{\"className\":\"sr-only\",\"children\":\"LinkedIn\"}]]}]]}]]}]}]]}]]}]]}],{\"children\":[\"blog\",[\"$\",\"$4\",\"c\",{\"children\":[null,[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"ordercloud-sitecore-jss-nextjs\",\"d\"],[\"$\",\"$4\",\"c\",{\"children\":[null,[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",\"$0:f:0:1:2:children:2:children:0\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$4\",\"c\",{\"children\":[\"$L9\",[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/3a398bc4ce4edcc7.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$La\",null,{\"children\":\"$Lb\"}]]}],{},null]},null]},null]},null],[\"$\",\"$4\",\"h\",{\"children\":[null,[\"$\",\"$4\",\"outp4hJT-MujW8JCFyNR1\",{\"children\":[[\"$\",\"$Lc\",null,{\"children\":\"$Ld\"}],[\"$\",\"$Le\",null,{\"children\":\"$Lf\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\"}]]}]]}]]],\"m\":\"$undefined\",\"G\":[\"$10\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"9:[\"$\",\"article\",null,{\"className\":\"max-w-7xl mx-auto px-8 my-12\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"w-full relative mb-8 text-6xl font-extrabold tracking-normal text-center title-font\",\"children\":[\"$\",\"span\",null,{\"className\":\"bg-clip-text text-transparent bg-gradient-to-b from-blue-600 to-blue-500\",\"children\":\"Integrate OrderCloud with Sitecore JSS Next.js\"}]}],[\"$\",\"div\",null,{\"className\":\"flex items-center justify-center mb-16\",\"children\":[\"$\",\"p\",null,{\"className\":\"text-base font-medium text-gray-600 group-hover:text-gray-800\",\"children\":[\"$\",\"time\",null,{\"dateTime\":\"2021-11-27\",\"children\":\"November\\t27, 2021\"}]}]}],[\"$\",\"div\",null,{\"className\":\"prose lg:prose-xl max-w-none prose-pre:p-0\",\"children\":[[\"$\",\"p\",\"p-0\",{\"children\":\"In this blog post, I like to explain how easy it is to add some products from OrderCloud to a pre-rendered page in Sitecore JSS using Next.js\"}],\"\\n\",[\"$\",\"h2\",\"h2-0\",{\"children\":\"First, make a storefront\"}],\"\\n\",[\"$\",\"p\",\"p-1\",{\"children\":\"To be able to do this you need to create an OrderCloud marketplace and have some products.\\nI created a free OrderCloud account and ran these commands to automatically create a marketplace filled with products and facets:\"}],\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"npm i @ordercloud/seeding -g\"}]}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"seed https://raw.githubusercontent.com/ordercloud-api/ordercloud-seed/main/seeds/Simple-B2C.yml -u={username} -p={password\"}]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"p-2\",{\"children\":[\"Next, log in to your marketplace and make a note of the Storefront App ID:\\n\",[\"$\",\"img\",\"img-0\",{\"src\":\"/blog/api-key.jpg\",\"alt\":\"Storefront App ID\"}]]}],\"\\n\",[\"$\",\"p\",\"p-3\",{\"children\":\"Add this ID along with these OrderCloud variables to the .env file in the root of your JSS Next.js project:\"}],\"\\n\",[\"$\",\"pre\",\"pre-0\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"NEXT_PUBLIC_OC_CLIENT_ID={AddYourStorefrontAppIdHere}\\nNEXT_PUBLIC_OC_SCOPE=Shopper,MeAddressAdmin\\nNEXT_PUBLIC_OC_BASE_API_URL=https://sandboxapi.ordercloud.io\\nNEXT_PUBLIC_OC_ALLOW_ANONYMOUS=false\\n\"}]}],\"\\n\",[\"$\",\"h2\",\"h2-1\",{\"children\":\"Initialise OrderCloud in your app\"}],\"\\n\",[\"$\",\"p\",\"p-4\",{\"children\":\"In the _app.tsx add the following code to create a connection to Ordercloud using the Ordercloud Javascript SDK:\"}],\"\\n\",[\"$\",\"pre\",\"pre-1\",{\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"hljs language-javascript\",\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-keyword\",\"children\":\"import\"}],\" { \",[\"$\",\"span\",\"span-1\",{\"className\":\"hljs-title class_\",\"children\":\"Configuration\"}],\", \",[\"$\",\"span\",\"span-2\",{\"className\":\"hljs-title class_\",\"children\":\"Tokens\"}],\", \",[\"$\",\"span\",\"span-3\",{\"className\":\"hljs-title class_\",\"children\":\"Auth\"}],\" } \",[\"$\",\"span\",\"span-4\",{\"className\":\"hljs-keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",\"span-5\",{\"className\":\"hljs-string\",\"children\":\"\\\"ordercloud-javascript-sdk\\\"\"}],\";\\n\\n(\",[\"$\",\"span\",\"span-6\",{\"className\":\"hljs-keyword\",\"children\":\"async\"}],\" \",[\"$\",\"span\",\"span-7\",{\"className\":\"hljs-keyword\",\"children\":\"function\"}],\"(\",[\"$\",\"span\",\"span-8\",{\"className\":\"hljs-params\"}],\"){\\n    \",[\"$\",\"span\",\"span-9\",{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" clientId = process.\",[\"$\",\"span\",\"span-10\",{\"className\":\"hljs-property\",\"children\":\"env\"}],\".\",[\"$\",\"span\",\"span-11\",{\"className\":\"hljs-property\",\"children\":\"NEXT_PUBLIC_OC_CLIENT_ID\"}],\" || \",[\"$\",\"span\",\"span-12\",{\"className\":\"hljs-string\",\"children\":\"\\\"\\\"\"}],\";\\n    \",[\"$\",\"span\",\"span-13\",{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" baseApiUrl = process.\",[\"$\",\"span\",\"span-14\",{\"className\":\"hljs-property\",\"children\":\"env\"}],\".\",[\"$\",\"span\",\"span-15\",{\"className\":\"hljs-property\",\"children\":\"NEXT_PUBLIC_OC_BASE_API_URL\"}],\";\\n    \",[\"$\",\"span\",\"span-16\",{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" scope = process.\",[\"$\",\"span\",\"span-17\",{\"className\":\"hljs-property\",\"children\":\"env\"}],\".\",[\"$\",\"span\",\"span-18\",{\"className\":\"hljs-property\",\"children\":\"NEXT_PUBLIC_OC_SCOPE\"}],\"?.\",[\"$\",\"span\",\"span-19\",{\"className\":\"hljs-title function_\",\"children\":\"split\"}],\"(\",[\"$\",\"span\",\"span-20\",{\"className\":\"hljs-string\",\"children\":\"\\\",\\\"\"}],\");\\n\\n    \",[\"$\",\"span\",\"span-21\",{\"className\":\"hljs-title class_\",\"children\":\"Configuration\"}],\".\",[\"$\",\"span\",\"span-22\",{\"className\":\"hljs-title class_\",\"children\":\"Set\"}],\"({\\n      \",[\"$\",\"span\",\"span-23\",{\"className\":\"hljs-attr\",\"children\":\"clientID\"}],\": clientId,\\n      \",[\"$\",\"span\",\"span-24\",{\"className\":\"hljs-attr\",\"children\":\"baseApiUrl\"}],\": baseApiUrl,\\n      \",[\"$\",\"span\",\"span-25\",{\"className\":\"hljs-attr\",\"children\":\"cookieOptions\"}],\": { \",[\"$\",\"span\",\"span-26\",{\"className\":\"hljs-attr\",\"children\":\"prefix\"}],\": \",[\"$\",\"span\",\"span-27\",{\"className\":\"hljs-string\",\"children\":\"\\\"hds-nextjs\\\"\"}],\", \",[\"$\",\"span\",\"span-28\",{\"className\":\"hljs-attr\",\"children\":\"path\"}],\": \",[\"$\",\"span\",\"span-29\",{\"className\":\"hljs-string\",\"children\":\"\\\"/\\\"\"}],\" },\\n    });\\n\\n    \",[\"$\",\"span\",\"span-30\",{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" authResponse = \",[\"$\",\"span\",\"span-31\",{\"className\":\"hljs-keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",\"span-32\",{\"className\":\"hljs-title class_\",\"children\":\"Auth\"}],\".\",[\"$\",\"span\",\"span-33\",{\"className\":\"hljs-title class_\",\"children\":\"Anonymous\"}],\"(clientId, scope || ([\",[\"$\",\"span\",\"span-34\",{\"className\":\"hljs-string\",\"children\":\"\\\"\\\"\"}],\"] \",[\"$\",\"span\",\"span-35\",{\"className\":\"hljs-keyword\",\"children\":\"as\"}],\" \",[\"$\",\"span\",\"span-36\",{\"className\":\"hljs-title class_\",\"children\":\"ApiRole\"}],\"[]));\\n\\n    \",[\"$\",\"span\",\"span-37\",{\"className\":\"hljs-title class_\",\"children\":\"Tokens\"}],\".\",[\"$\",\"span\",\"span-38\",{\"className\":\"hljs-title class_\",\"children\":\"SetAccessToken\"}],\"(authResponse.\",[\"$\",\"span\",\"span-39\",{\"className\":\"hljs-property\",\"children\":\"access_token\"}],\");\\n\\n})();\\n\"]}]}],\"\\n\",[\"$\",\"p\",\"p-5\",{\"children\":\"Now you have access to all the OrderCloud stuff throughout your application. If you only need OrderCloud on a specific set of routes, consider moving this logic somewhere else.\"}],\"\\n\",[\"$\",\"p\",\"p-6\",{\"children\":\"To display some products with an active facet pre-selected I have created a simple Sitecore component where the facet is set in the Sitecore admin. Component definition:\"}],\"\\n\",[\"$\",\"pre\",\"pre-2\",{\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"hljs language-javascript\",\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-keyword\",\"children\":\"export\"}],\" \",[\"$\",\"span\",\"span-1\",{\"className\":\"hljs-keyword\",\"children\":\"default\"}],\" \",[\"$\",\"span\",\"span-2\",{\"className\":\"hljs-keyword\",\"children\":\"function\"}],\" (\",[\"$\",\"span\",\"span-3\",{\"className\":\"hljs-params\",\"children\":\"manifest: Manifest\"}],\"): \",[\"$\",\"span\",\"span-4\",{\"className\":\"hljs-keyword\",\"children\":\"void\"}],\" {\\n  manifest.\",[\"$\",\"span\",\"span-5\",{\"className\":\"hljs-title function_\",\"children\":\"addComponent\"}],\"({\\n    \",[\"$\",\"span\",\"span-6\",{\"className\":\"hljs-attr\",\"children\":\"name\"}],\": \",[\"$\",\"span\",\"span-7\",{\"className\":\"hljs-string\",\"children\":\"\\\"ProductList\\\"\"}],\",\\n    \",[\"$\",\"span\",\"span-8\",{\"className\":\"hljs-attr\",\"children\":\"icon\"}],\": \",[\"$\",\"span\",\"span-9\",{\"className\":\"hljs-title class_\",\"children\":\"SitecoreIcon\"}],\".\",[\"$\",\"span\",\"span-10\",{\"className\":\"hljs-property\",\"children\":\"DocumentTag\"}],\",\\n    \",[\"$\",\"span\",\"span-11\",{\"className\":\"hljs-attr\",\"children\":\"fields\"}],\": [{ \",[\"$\",\"span\",\"span-12\",{\"className\":\"hljs-attr\",\"children\":\"name\"}],\": \",[\"$\",\"span\",\"span-13\",{\"className\":\"hljs-string\",\"children\":\"\\\"colorfacet\\\"\"}],\", \",[\"$\",\"span\",\"span-14\",{\"className\":\"hljs-attr\",\"children\":\"type\"}],\": \",[\"$\",\"span\",\"span-15\",{\"className\":\"hljs-title class_\",\"children\":\"CommonFieldTypes\"}],\".\",[\"$\",\"span\",\"span-16\",{\"className\":\"hljs-property\",\"children\":\"SingleLineText\"}],\" }],\\n  });\\n}\\n\"]}]}],\"\\n\",[\"$\",\"h2\",\"h2-2\",{\"children\":\"Get the products\"}],\"\\n\",[\"$\",\"p\",\"p-7\",{\"children\":[\"In the actual component implementation, the products are fetched using the \",[\"$\",\"code\",\"code-0\",{\"children\":\"Me.ListProducts\"}],\" function. To inject the data into the component return the response in \",[\"$\",\"code\",\"code-1\",{\"children\":\"getStaticProps\"}],\". Now the data is available within the component using \",[\"$\",\"code\",\"code-2\",{\"children\":\"useComponentProps\"}],\".\"]}],\"\\n\",[\"$\",\"p\",\"p-8\",{\"children\":\"See the code below for an example:\"}],\"\\n\",[\"$\",\"pre\",\"pre-3\",{\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"hljs language-javascript\",\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-keyword\",\"children\":\"import\"}],\" { \",[\"$\",\"span\",\"span-1\",{\"className\":\"hljs-title class_\",\"children\":\"ListPageWithFacets\"}],\", \",[\"$\",\"span\",\"span-2\",{\"className\":\"hljs-title class_\",\"children\":\"Me\"}],\", \",[\"$\",\"span\",\"span-3\",{\"className\":\"hljs-title class_\",\"children\":\"RequiredDeep\"}],\", \",[\"$\",\"span\",\"span-4\",{\"className\":\"hljs-title class_\",\"children\":\"BuyerProduct\"}],\" } \",[\"$\",\"span\",\"span-5\",{\"className\":\"hljs-keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",\"span-6\",{\"className\":\"hljs-string\",\"children\":\"\\\"ordercloud-javascript-sdk\\\"\"}],\";\\n\\n\",[\"$\",\"span\",\"span-7\",{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" \",[\"$\",\"span\",\"span-8\",{\"className\":\"hljs-title class_\",\"children\":\"ProductList\"}],\": \",[\"$\",\"span\",\"span-9\",{\"className\":\"hljs-title class_\",\"children\":\"React\"}],\".\",[\"$\",\"span\",\"span-10\",{\"className\":\"hljs-property\",\"children\":\"FC\"}],\"\u003c\",[\"$\",\"span\",\"span-11\",{\"className\":\"hljs-title class_\",\"children\":\"ProductListProps\"}],\"\u003e = ({ rendering, fields }): \",[\"$\",\"span\",\"span-12\",{\"className\":\"hljs-variable constant_\",\"children\":\"JSX\"}],\".\",[\"$\",\"span\",\"span-13\",{\"className\":\"hljs-property\",\"children\":\"Element\"}],\" =\u003e {\\n  \",[\"$\",\"span\",\"span-14\",{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" data = useComponentProps \u003c \",[\"$\",\"span\",\"span-15\",{\"className\":\"hljs-title class_\",\"children\":\"RequiredDeep\"}],\" \u003c \",[\"$\",\"span\",\"span-16\",{\"className\":\"hljs-title class_\",\"children\":\"ListPageWithFacets\"}],\" \u003c \",[\"$\",\"span\",\"span-17\",{\"className\":\"hljs-title class_\",\"children\":\"BuyerProduct\"}],\" \u003e\u003e\u003e rendering.\",[\"$\",\"span\",\"span-18\",{\"className\":\"hljs-property\",\"children\":\"uid\"}],\";\\n};\\n\\n\",[\"$\",\"span\",\"span-19\",{\"className\":\"hljs-keyword\",\"children\":\"export\"}],\" \",[\"$\",\"span\",\"span-20\",{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" \",[\"$\",\"span\",\"span-21\",{\"className\":\"hljs-attr\",\"children\":\"getStaticProps\"}],\": \",[\"$\",\"span\",\"span-22\",{\"className\":\"hljs-title class_\",\"children\":\"GetStaticComponentProps\"}],\" = \",[\"$\",\"span\",\"span-23\",{\"className\":\"hljs-title function_\",\"children\":\"async\"}],\" (rendering) =\u003e {\\n  \",[\"$\",\"span\",\"span-24\",{\"className\":\"hljs-keyword\",\"children\":\"try\"}],\" {\\n    \",[\"$\",\"span\",\"span-25\",{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" response = \",[\"$\",\"span\",\"span-26\",{\"className\":\"hljs-keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",\"span-27\",{\"className\":\"hljs-title class_\",\"children\":\"Me\"}],\".\",[\"$\",\"span\",\"span-28\",{\"className\":\"hljs-title class_\",\"children\":\"ListProducts\"}],\"({\\n      \",[\"$\",\"span\",\"span-29\",{\"className\":\"hljs-attr\",\"children\":\"filters\"}],\": {\\n        \",[\"$\",\"span\",\"span-30\",{\"className\":\"hljs-string\",\"children\":\"\\\"xp.Facets.Color\\\"\"}],\": rendering.\",[\"$\",\"span\",\"span-31\",{\"className\":\"hljs-property\",\"children\":\"fields\"}],\".\",[\"$\",\"span\",\"span-32\",{\"className\":\"hljs-property\",\"children\":\"colorfacet\"}],\".\",[\"$\",\"span\",\"span-33\",{\"className\":\"hljs-property\",\"children\":\"value\"}],\",\\n      },\\n    });\\n\\n    \",[\"$\",\"span\",\"span-34\",{\"className\":\"hljs-keyword\",\"children\":\"return\"}],\" response;\\n  } \",[\"$\",\"span\",\"span-35\",{\"className\":\"hljs-keyword\",\"children\":\"catch\"}],\" (e) {\\n    \",[\"$\",\"span\",\"span-36\",{\"className\":\"hljs-variable language_\",\"children\":\"console\"}],\".\",[\"$\",\"span\",\"span-37\",{\"className\":\"hljs-title function_\",\"children\":\"error\"}],\"(e);\\n    \",[\"$\",\"span\",\"span-38\",{\"className\":\"hljs-keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",\"span-39\",{\"className\":\"hljs-literal\",\"children\":\"null\"}],\";\\n  }\\n};\\n\\n\",[\"$\",\"span\",\"span-40\",{\"className\":\"hljs-keyword\",\"children\":\"export\"}],\" \",[\"$\",\"span\",\"span-41\",{\"className\":\"hljs-keyword\",\"children\":\"default\"}],\" \",[\"$\",\"span\",\"span-42\",{\"className\":\"hljs-title class_\",\"children\":\"ProductList\"}],\";\\n\"]}]}],\"\\n\",[\"$\",\"p\",\"p-9\",{\"children\":\"As a result, we now have products from our OrderCloud marketplace rendered on Next.js build-time. Fast and good for SEO!\"}],\"\\n\",[\"$\",\"p\",\"p-10\",{\"children\":[\"$\",\"img\",\"img-0\",{\"src\":\"/blog/ordercloud-products.jpg\",\"alt\":\"OrderCloud products\"}]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"f:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"d:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"Integrate OrderCloud with Sitecore JSS Next.js\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"Erwin Smit - Freelance frontend developer / fullstack developer\"}],[\"$\",\"meta\",\"3\",{\"property\":\"og:title\",\"content\":\"Integrate OrderCloud with Sitecore JSS Next.js\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:description\",\"content\":\"Erwin Smit - Freelance frontend developer / fullstack developer\"}],[\"$\",\"meta\",\"5\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"6\",{\"name\":\"twitter:title\",\"content\":\"Integrate OrderCloud with Sitecore JSS Next.js\"}],[\"$\",\"meta\",\"7\",{\"name\":\"twitter:description\",\"content\":\"Erwin Smit - Freelance frontend developer / fullstack developer\"}]]\n"])</script><script>self.__next_f.push([1,"b:null\n"])</script></body></html>