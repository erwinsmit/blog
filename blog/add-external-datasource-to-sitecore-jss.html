<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/a34f9d1faa5f3315-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" as="image" href="/blog/vscode.jpg"/><link rel="stylesheet" href="/_next/static/css/0f5f8cc0eb7d6afc.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/3a398bc4ce4edcc7.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-8af1d2e0ff41d756.js"/><script src="/_next/static/chunks/4bd1b696-05ac3765304a89c0.js" async=""></script><script src="/_next/static/chunks/215-c1a7d2d931604563.js" async=""></script><script src="/_next/static/chunks/main-app-e5edefe120089e16.js" async=""></script><script src="/_next/static/chunks/231-015614b9a59ae6eb.js" async=""></script><script src="/_next/static/chunks/173-e6c8bf506bfb93ff.js" async=""></script><script src="/_next/static/chunks/app/layout-28f46ae9c6a8b2dc.js" async=""></script><script src="/_next/static/chunks/app/not-found-081a5836cd82c2ca.js" async=""></script><meta name="next-size-adjust"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><title>Add external datasource to Sitecore JSS</title><meta name="description" content="Erwin Smit - Freelance frontend developer / fullstack developer"/><meta property="og:title" content="Add external datasource to Sitecore JSS"/><meta property="og:description" content="Erwin Smit - Freelance frontend developer / fullstack developer"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Add external datasource to Sitecore JSS"/><meta name="twitter:description" content="Erwin Smit - Freelance frontend developer / fullstack developer"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="bg-gray-100 [object Object]"><header class="bg-blue-600 text-white shadow-md"><div class="container mx-auto px-4 py-4"><div class="flex justify-between items-center"><a href="/"><div class="flex items-center space-x-4 bg-blue-700 rounded-full py-2 px-4"><img alt="Erwin Smit" loading="lazy" width="40" height="40" decoding="async" data-nimg="1" class="rounded-full border-2 border-white" style="color:transparent;height:40px;width:40px;object-fit:cover" src="/assets/selfie2.jpg"/><span class="font-semibold text-lg text-white">Erwin Smit</span></div></a><nav class="flex-grow"><ul class="flex justify-end space-x-6"><li><a class="hover:text-blue-200 transition duration-150 ease-in-out" href="/">About me</a></li><li><a class="hover:text-blue-200 transition duration-150 ease-in-out" href="/blog">Blog</a></li></ul></nav></div></div></header><main class="min-h-screen"><article class="max-w-7xl mx-auto px-8 my-12"><h1 class="w-full relative mb-8 text-6xl font-extrabold tracking-normal text-center title-font"><span class="bg-clip-text text-transparent bg-gradient-to-b from-blue-600 to-blue-500">Add external datasource to Sitecore JSS</span></h1><div class="flex items-center justify-center mb-16"><p class="text-base font-medium text-gray-600 group-hover:text-gray-800"><time dateTime="2021-11-23">November	23, 2021</time></p></div><div class="prose lg:prose-xl max-w-none prose-pre:p-0"><h2>Sitecore JSS GraphQL out of the box</h2>
<p>The Sitecore JSS Next.js SDK has great built-in <a href="https://doc.sitecore.com/en/developers/hd/190/sitecore-headless-development/use-graphql-to-fetch-component-level-data-in-jss-next-js-apps.html">tooling</a> for querying the Sitecore GraphQL endpoint.
In this blog post, I will explain how to use the same tooling but for external data sources.</p>
<h2>Consume external Graphql API</h2>
<p>For demo purposes, I picked the excellent API from GitHub. This is free to use, the only thing you need is a <a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token">personal access token</a>. When that&#x27;s all set up you can use the <a href="https://docs.github.com/en/graphql/overview/explorer">explorer</a> to explore all the data you can fetch.</p>
<h3>Extend introspection script</h3>
<p>Sitecore JSS uses <a href="https://github.com/piglovesyou/graphql-let">graphql-let</a> for automatically generating types for the GraphQL results. A .graphql file is automatically picked up by this tool. It analyses the query and as a result, generates a .d.ts file next to it.
With this .d.ts file you can import the required types:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">GithubUserSearchQuery</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./userSearch.github.graphql&quot;</span>;
</code></pre>
<p>Before this is possible graphql-let needs an introspection schema. The schema is created by the <a href="https://doc.sitecore.com/en/developers/hd/190/sitecore-headless-development/introspecting-the-graphql-schema-in-jss-next-js-apps.html">graphl-update</a> task.</p>
<p>To add the GitHub introspection schema we need to extend the script <code>scripts\fetch-graphql-introspection-data.ts</code> with an introspection call to the GitHub GraphQL endpoint:</p>
<pre><code class="hljs language-javascript">(<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> introSpectionQuery = {};

    <span class="hljs-keyword">const</span> githubResults = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&quot;https://api.github.com/graphql&quot;</span>, {
      <span class="hljs-attr">method</span>: <span class="hljs-string">&quot;POST&quot;</span>,
      <span class="hljs-attr">headers</span>: {
        <span class="hljs-string">&quot;Content-Type&quot;</span>: <span class="hljs-string">&quot;application/json&quot;</span>,
        <span class="hljs-title class_">Authorization</span>: <span class="hljs-string">`bearer <span class="hljs-subst">${process.env.GHUB_PRIVATE_KEY}</span>`</span>,
      },
      <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(introSpectionQuery),
    });

    <span class="hljs-keyword">const</span> githubData = <span class="hljs-keyword">await</span> githubResults.<span class="hljs-title function_">json</span>();
    fs.<span class="hljs-title function_">writeFile</span>(<span class="hljs-string">&quot;./src/temp/GraphQLIntrospectionResultGithub.json&quot;</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(githubData, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>), <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (err) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&quot;Error writing GraphQLIntrospectionResultGithub file&quot;</span>, err);
        <span class="hljs-keyword">return</span>;
      }

      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;GraphQL Github Introspection Data successfully fetched!&quot;</span>);
    });
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(e);
    process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">1</span>);
  }
})();
</code></pre>
<p>I used this <a href="https://gist.github.com/craigbeck/b90915d49fda19d5b2b17ead14dcd6da">introspection query</a> to get all the required types.
Now when you run <strong>npm run update:graphql</strong> you get a nice big schema with all the types from the GitHub GraphQL API.</p>
<h3>Add additional graphql-let configuration file</h3>
<p>To point graphql-let to this schema file I&#x27;ve added this file to the root of the project <strong>.graphql-let-github</strong></p>
<pre><code class="hljs language-yml"><span class="hljs-attr">schema:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;./src/temp/GraphQLIntrospectionResultGithub.json&quot;</span>
<span class="hljs-attr">documents:</span> <span class="hljs-string">&quot;src/**/*.github.graphql&quot;</span>
<span class="hljs-attr">plugins:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">typescript</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">typescript-operations</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">typed-document-node</span>

<span class="hljs-attr">cacheDir:</span> <span class="hljs-string">.generated</span>
<span class="hljs-attr">config:</span>
  <span class="hljs-attr">useIndexSignature:</span> <span class="hljs-literal">true</span>
</code></pre>
<p>Change the <strong>bootstrap</strong> npm script to:</p>
<pre><code class="hljs language-json"><span class="hljs-attr">&quot;bootstrap&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ts-node --project tsconfig.scripts.json scripts/bootstrap.ts &amp;&amp; graphql-let &amp;&amp; graphql-let --config .graphql-let-github.yml&quot;</span>
</code></pre>
<p>This generates all the types when running <strong>npm start</strong></p>
<p>To also receive updated types while you&#x27;re actively developing update <strong>next.config.js</strong> with the following lines:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">applyGraphQLCodeGenerationLoaders</span> = (<span class="hljs-params">config, options</span>) =&gt; {
  config.<span class="hljs-property">module</span>.<span class="hljs-property">rules</span>.<span class="hljs-title function_">push</span>({
    <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.sitecore.graphql$/</span>,
    <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/</span>,
    <span class="hljs-attr">use</span>: [options.<span class="hljs-property">defaultLoaders</span>.<span class="hljs-property">babel</span>, { <span class="hljs-attr">loader</span>: <span class="hljs-string">&#x27;graphql-let/loader&#x27;</span> }],
  })

  config.<span class="hljs-property">module</span>.<span class="hljs-property">rules</span>.<span class="hljs-title function_">push</span>({
    <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.github.graphql$/</span>,
    <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/</span>,
    <span class="hljs-attr">use</span>: [options.<span class="hljs-property">defaultLoaders</span>.<span class="hljs-property">babel</span>, { <span class="hljs-attr">loader</span>: <span class="hljs-string">&#x27;graphql-let/loader&#x27;</span>, <span class="hljs-attr">options</span>: { <span class="hljs-attr">configFile</span>: <span class="hljs-string">&quot;.graphql-let-github.yml&quot;</span> } }],
  })
</code></pre>
<p>As you see I suffix the Sitecore GraphQL queries with <strong>.sitecore.graphql</strong> and the GitHub queries with <strong>.github.graphql</strong>. Because both types of queries have their own configuration.</p>
<h3>Add a query to a component</h3>
<p>Now that&#x27;s all in place we can add some GraphQL data to a component. Next to the component that will consume the data, we will create <strong>userSearch.github.graphql</strong>:</p>
<pre><code class="hljs language-graphql"><span class="hljs-keyword">query</span> githubUserSearch<span class="hljs-punctuation">(</span><span class="hljs-variable">$organisation</span>: String<span class="hljs-punctuation">!</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span>
  organization<span class="hljs-punctuation">(</span><span class="hljs-symbol">login</span><span class="hljs-punctuation">:</span> <span class="hljs-variable">$organisation</span>) <span class="hljs-punctuation">{</span>
    membersWithRole<span class="hljs-punctuation">(</span><span class="hljs-symbol">first</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span>
      nodes <span class="hljs-punctuation">{</span>
        <span class="hljs-punctuation">...</span> <span class="hljs-keyword">on</span> User <span class="hljs-punctuation">{</span>
          name
          company
          email
          avatarUrl
          location
          login
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>This query accepts an Organisation as a parameter. The query asks for the first 100 members of the organisation found. Within the nodes, the User Fragment is used to get a couple of properties of each user.</p>
<p>To get this data into the component as static props (so the query is done on build-time) the method <strong>getStaticProps</strong> needs to be exported. With Next.js this can usually only be done on page level but Sitecore JSS added some magic to also allow this on component level:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> query = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;raw-loader!./userSearch.github.graphql&quot;</span>).<span class="hljs-property">default</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">getStaticProps</span>: <span class="hljs-title class_">GetStaticComponentProps</span> = <span class="hljs-title function_">async</span> (rendering) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> githubResults = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&quot;https://api.github.com/graphql&quot;</span>, {
      <span class="hljs-attr">method</span>: <span class="hljs-string">&quot;POST&quot;</span>,
      <span class="hljs-attr">headers</span>: {
        <span class="hljs-string">&quot;Content-Type&quot;</span>: <span class="hljs-string">&quot;application/json&quot;</span>,
        <span class="hljs-title class_">Authorization</span>: <span class="hljs-string">`bearer <span class="hljs-subst">${process.env.GHUB_PRIVATE_KEY}</span>`</span>,
      },

      <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
        <span class="hljs-attr">query</span>: query,
        <span class="hljs-attr">variables</span>: { <span class="hljs-attr">organisation</span>: rendering.<span class="hljs-property">fields</span>?.<span class="hljs-property">organisation</span>?.<span class="hljs-property">value</span> },
      }),
    });

    <span class="hljs-keyword">const</span> githubData = <span class="hljs-keyword">await</span> githubResults.<span class="hljs-title function_">json</span>();

    <span class="hljs-keyword">return</span> githubData.<span class="hljs-property">data</span>;
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(e);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }
};
</code></pre>
<p>The organisation field is passed down from Sitecore, so the content editor can pick the GitHub organisation. <a href="https://doc.sitecore.com/en/developers/hd/190/sitecore-headless-development/create-a-new-component-in-a-jss-next-js-app-using-the-code-first-development-workflow.html">Read more</a> on how to add fields to components using the JSS Cli (I prefer this over clicking away in the Sitecore admin).</p>
<p>Within the component the data can now be consumed with the <strong>useComponentProps</strong> hook:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">GetStaticComponentProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@sitecore-jss/sitecore-jss-nextjs&quot;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">GithubUserSearchQuery</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./userSearch.github.graphql&quot;</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">UserSearch</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;<span class="hljs-title class_">UserSearchProps</span>&gt; = ({ fields, rendering }): <span class="hljs-variable constant_">JSX</span>.<span class="hljs-property">Element</span> =&gt; {
    <span class="hljs-keyword">const</span> data = rendering.<span class="hljs-property">uid</span> ? useComponentProps&lt;<span class="hljs-title class_">GithubUserSearchQuery</span>&gt;(rendering.<span class="hljs-property">uid</span>) : <span class="hljs-literal">null</span>;
</code></pre>
<p>With the type added to the <strong>useComponentProps</strong> function we get IntelliSense based on the query we created, how cool is that!</p>
<p><img src="/blog/vscode.jpg" alt="Intellisense"/></p></div></article></main><section class="bg-gray-800 text-white py-12"><div class="container mx-auto px-4 text-center"><h2 class="text-2xl font-bold mb-6" id="connect">Connect With Me</h2><div class="flex justify-center space-x-6"><a href="https://github.com/erwinsmit" target="_blank" rel="noopener noreferrer" class="hover:text-blue-400 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg><span class="sr-only">GitHub</span></a><a href="https://www.linkedin.com/in/erwin-smit-40957840/" target="_blank" rel="noopener noreferrer" class="hover:text-blue-400 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-linkedin"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect width="4" height="12" x="2" y="9"></rect><circle cx="4" cy="4" r="2"></circle></svg><span class="sr-only">LinkedIn</span></a></div></div></section><script src="/_next/static/chunks/webpack-8af1d2e0ff41d756.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"4:\"$Sreact.fragment\"\n5:I[7256,[\"231\",\"static/chunks/231-015614b9a59ae6eb.js\",\"173\",\"static/chunks/173-e6c8bf506bfb93ff.js\",\"185\",\"static/chunks/app/layout-28f46ae9c6a8b2dc.js\"],\"default\"]\n6:I[9275,[],\"\"]\n7:I[1343,[],\"\"]\n8:I[4703,[\"231\",\"static/chunks/231-015614b9a59ae6eb.js\",\"160\",\"static/chunks/app/not-found-081a5836cd82c2ca.js\"],\"default\"]\na:I[3120,[],\"OutletBoundary\"]\nc:I[3120,[],\"MetadataBoundary\"]\ne:I[3120,[],\"ViewportBoundary\"]\n10:I[6130,[],\"\"]\n1:HL[\"/_next/static/media/a34f9d1faa5f3315-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/css/0f5f8cc0eb7d6afc.css\",\"style\"]\n3:HL[\"/_next/static/css/3a398bc4ce4edcc7.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"fJGNFHTNcBTUtLNLcKB8u\",\"p\":\"\",\"c\":[\"\",\"blog\",\"add-external-datasource-to-sitecore-jss\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"add-external-datasource-to-sitecore-jss\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"add-external-datasource-to-sitecore-jss\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$4\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/0f5f8cc0eb7d6afc.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"sizes\":\"180x180\",\"href\":\"/favicon/apple-touch-icon.png\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/png\",\"sizes\":\"32x32\",\"href\":\"/favicon/favicon-32x32.png\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/png\",\"sizes\":\"16x16\",\"href\":\"/favicon/favicon-16x16.png\"}],[\"$\",\"link\",null,{\"rel\":\"manifest\",\"href\":\"/favicon/site.webmanifest\"}],[\"$\",\"link\",null,{\"rel\":\"mask-icon\",\"href\":\"/favicon/safari-pinned-tab.svg\",\"color\":\"#000000\"}],[\"$\",\"link\",null,{\"rel\":\"shortcut icon\",\"href\":\"/favicon/favicon.ico\"}],[\"$\",\"meta\",null,{\"name\":\"msapplication-TileColor\",\"content\":\"#000000\"}],[\"$\",\"meta\",null,{\"name\":\"msapplication-config\",\"content\":\"/favicon/browserconfig.xml\"}],[\"$\",\"meta\",null,{\"name\":\"theme-color\",\"content\":\"#000\"}],[\"$\",\"link\",null,{\"rel\":\"alternate\",\"type\":\"application/rss+xml\",\"href\":\"/feed.xml\"}]]}],[\"$\",\"body\",null,{\"className\":\"bg-gray-100 [object Object]\",\"children\":[[\"$\",\"$L5\",null,{}],[\"$\",\"main\",null,{\"className\":\"min-h-screen\",\"children\":[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$\",\"$L8\",null,{}],\"notFoundStyles\":[]}]}],[\"$\",\"section\",null,{\"className\":\"bg-gray-800 text-white py-12\",\"children\":[\"$\",\"div\",null,{\"className\":\"container mx-auto px-4 text-center\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"text-2xl font-bold mb-6\",\"id\":\"connect\",\"children\":\"Connect With Me\"}],[\"$\",\"div\",null,{\"className\":\"flex justify-center space-x-6\",\"children\":[[\"$\",\"a\",null,{\"href\":\"https://github.com/erwinsmit\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"hover:text-blue-400 transition-colors\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":32,\"height\":32,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-github\",\"children\":[[\"$\",\"path\",\"tonef\",{\"d\":\"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4\"}],[\"$\",\"path\",\"9comsn\",{\"d\":\"M9 18c-4.51 2-5-2-7-2\"}],\"$undefined\"]}],[\"$\",\"span\",null,{\"className\":\"sr-only\",\"children\":\"GitHub\"}]]}],[\"$\",\"a\",null,{\"href\":\"https://www.linkedin.com/in/erwin-smit-40957840/\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"hover:text-blue-400 transition-colors\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":32,\"height\":32,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-linkedin\",\"children\":[[\"$\",\"path\",\"c2jq9f\",{\"d\":\"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z\"}],[\"$\",\"rect\",\"mk3on5\",{\"width\":\"4\",\"height\":\"12\",\"x\":\"2\",\"y\":\"9\"}],[\"$\",\"circle\",\"bt5ra8\",{\"cx\":\"4\",\"cy\":\"4\",\"r\":\"2\"}],\"$undefined\"]}],[\"$\",\"span\",null,{\"className\":\"sr-only\",\"children\":\"LinkedIn\"}]]}]]}]]}]}]]}]]}]]}],{\"children\":[\"blog\",[\"$\",\"$4\",\"c\",{\"children\":[null,[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"add-external-datasource-to-sitecore-jss\",\"d\"],[\"$\",\"$4\",\"c\",{\"children\":[null,[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",\"$0:f:0:1:2:children:2:children:0\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$4\",\"c\",{\"children\":[\"$L9\",[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/3a398bc4ce4edcc7.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$La\",null,{\"children\":\"$Lb\"}]]}],{},null]},null]},null]},null],[\"$\",\"$4\",\"h\",{\"children\":[null,[\"$\",\"$4\",\"KW_tRyHMNMesBvvUGnh5v\",{\"children\":[[\"$\",\"$Lc\",null,{\"children\":\"$Ld\"}],[\"$\",\"$Le\",null,{\"children\":\"$Lf\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\"}]]}]]}]]],\"m\":\"$undefined\",\"G\":[\"$10\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"9:[\"$\",\"article\",null,{\"className\":\"max-w-7xl mx-auto px-8 my-12\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"w-full relative mb-8 text-6xl font-extrabold tracking-normal text-center title-font\",\"children\":[\"$\",\"span\",null,{\"className\":\"bg-clip-text text-transparent bg-gradient-to-b from-blue-600 to-blue-500\",\"children\":\"Add external datasource to Sitecore JSS\"}]}],[\"$\",\"div\",null,{\"className\":\"flex items-center justify-center mb-16\",\"children\":[\"$\",\"p\",null,{\"className\":\"text-base font-medium text-gray-600 group-hover:text-gray-800\",\"children\":[\"$\",\"time\",null,{\"dateTime\":\"2021-11-23\",\"children\":\"November\\t23, 2021\"}]}]}],[\"$\",\"div\",null,{\"className\":\"prose lg:prose-xl max-w-none prose-pre:p-0\",\"children\":[[\"$\",\"h2\",\"h2-0\",{\"children\":\"Sitecore JSS GraphQL out of the box\"}],\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":[\"The Sitecore JSS Next.js SDK has great built-in \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://doc.sitecore.com/en/developers/hd/190/sitecore-headless-development/use-graphql-to-fetch-component-level-data-in-jss-next-js-apps.html\",\"children\":\"tooling\"}],\" for querying the Sitecore GraphQL endpoint.\\nIn this blog post, I will explain how to use the same tooling but for external data sources.\"]}],\"\\n\",[\"$\",\"h2\",\"h2-1\",{\"children\":\"Consume external Graphql API\"}],\"\\n\",[\"$\",\"p\",\"p-1\",{\"children\":[\"For demo purposes, I picked the excellent API from GitHub. This is free to use, the only thing you need is a \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token\",\"children\":\"personal access token\"}],\". When that's all set up you can use the \",[\"$\",\"a\",\"a-1\",{\"href\":\"https://docs.github.com/en/graphql/overview/explorer\",\"children\":\"explorer\"}],\" to explore all the data you can fetch.\"]}],\"\\n\",[\"$\",\"h3\",\"h3-0\",{\"children\":\"Extend introspection script\"}],\"\\n\",[\"$\",\"p\",\"p-2\",{\"children\":[\"Sitecore JSS uses \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://github.com/piglovesyou/graphql-let\",\"children\":\"graphql-let\"}],\" for automatically generating types for the GraphQL results. A .graphql file is automatically picked up by this tool. It analyses the query and as a result, generates a .d.ts file next to it.\\nWith this .d.ts file you can import the required types:\"]}],\"\\n\",[\"$\",\"pre\",\"pre-0\",{\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"hljs language-javascript\",\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-keyword\",\"children\":\"import\"}],\" { \",[\"$\",\"span\",\"span-1\",{\"className\":\"hljs-title class_\",\"children\":\"GithubUserSearchQuery\"}],\" } \",[\"$\",\"span\",\"span-2\",{\"className\":\"hljs-keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",\"span-3\",{\"className\":\"hljs-string\",\"children\":\"\\\"./userSearch.github.graphql\\\"\"}],\";\\n\"]}]}],\"\\n\",[\"$\",\"p\",\"p-3\",{\"children\":[\"Before this is possible graphql-let needs an introspection schema. The schema is created by the \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://doc.sitecore.com/en/developers/hd/190/sitecore-headless-development/introspecting-the-graphql-schema-in-jss-next-js-apps.html\",\"children\":\"graphl-update\"}],\" task.\"]}],\"\\n\",[\"$\",\"p\",\"p-4\",{\"children\":[\"To add the GitHub introspection schema we need to extend the script \",[\"$\",\"code\",\"code-0\",{\"children\":\"scripts\\\\fetch-graphql-introspection-data.ts\"}],\" with an introspection call to the GitHub GraphQL endpoint:\"]}],\"\\n\",[\"$\",\"pre\",\"pre-1\",{\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"hljs language-javascript\",\"children\":[\"(\",[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-keyword\",\"children\":\"async\"}],\" \",[\"$\",\"span\",\"span-1\",{\"className\":\"hljs-keyword\",\"children\":\"function\"}],\" (\",[\"$\",\"span\",\"span-2\",{\"className\":\"hljs-params\"}],\") {\\n  \",[\"$\",\"span\",\"span-3\",{\"className\":\"hljs-keyword\",\"children\":\"try\"}],\" {\\n    \",[\"$\",\"span\",\"span-4\",{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" introSpectionQuery = {};\\n\\n    \",[\"$\",\"span\",\"span-5\",{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" githubResults = \",[\"$\",\"span\",\"span-6\",{\"className\":\"hljs-keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",\"span-7\",{\"className\":\"hljs-title function_\",\"children\":\"fetch\"}],\"(\",[\"$\",\"span\",\"span-8\",{\"className\":\"hljs-string\",\"children\":\"\\\"https://api.github.com/graphql\\\"\"}],\", {\\n      \",[\"$\",\"span\",\"span-9\",{\"className\":\"hljs-attr\",\"children\":\"method\"}],\": \",[\"$\",\"span\",\"span-10\",{\"className\":\"hljs-string\",\"children\":\"\\\"POST\\\"\"}],\",\\n      \",[\"$\",\"span\",\"span-11\",{\"className\":\"hljs-attr\",\"children\":\"headers\"}],\": {\\n        \",[\"$\",\"span\",\"span-12\",{\"className\":\"hljs-string\",\"children\":\"\\\"Content-Type\\\"\"}],\": \",[\"$\",\"span\",\"span-13\",{\"className\":\"hljs-string\",\"children\":\"\\\"application/json\\\"\"}],\",\\n        \",[\"$\",\"span\",\"span-14\",{\"className\":\"hljs-title class_\",\"children\":\"Authorization\"}],\": \",[\"$\",\"span\",\"span-15\",{\"className\":\"hljs-string\",\"children\":[\"`bearer \",[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-subst\",\"children\":\"$${process.env.GHUB_PRIVATE_KEY}\"}],\"`\"]}],\",\\n      },\\n      \",[\"$\",\"span\",\"span-16\",{\"className\":\"hljs-attr\",\"children\":\"body\"}],\": \",[\"$\",\"span\",\"span-17\",{\"className\":\"hljs-title class_\",\"children\":\"JSON\"}],\".\",[\"$\",\"span\",\"span-18\",{\"className\":\"hljs-title function_\",\"children\":\"stringify\"}],\"(introSpectionQuery),\\n    });\\n\\n    \",[\"$\",\"span\",\"span-19\",{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" githubData = \",[\"$\",\"span\",\"span-20\",{\"className\":\"hljs-keyword\",\"children\":\"await\"}],\" githubResults.\",[\"$\",\"span\",\"span-21\",{\"className\":\"hljs-title function_\",\"children\":\"json\"}],\"();\\n    fs.\",[\"$\",\"span\",\"span-22\",{\"className\":\"hljs-title function_\",\"children\":\"writeFile\"}],\"(\",[\"$\",\"span\",\"span-23\",{\"className\":\"hljs-string\",\"children\":\"\\\"./src/temp/GraphQLIntrospectionResultGithub.json\\\"\"}],\", \",[\"$\",\"span\",\"span-24\",{\"className\":\"hljs-title class_\",\"children\":\"JSON\"}],\".\",[\"$\",\"span\",\"span-25\",{\"className\":\"hljs-title function_\",\"children\":\"stringify\"}],\"(githubData, \",[\"$\",\"span\",\"span-26\",{\"className\":\"hljs-literal\",\"children\":\"null\"}],\", \",[\"$\",\"span\",\"span-27\",{\"className\":\"hljs-number\",\"children\":\"2\"}],\"), \",[\"$\",\"span\",\"span-28\",{\"className\":\"hljs-function\",\"children\":[\"(\",[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-params\",\"children\":\"err\"}],\") =\u003e\"]}],\" {\\n      \",[\"$\",\"span\",\"span-29\",{\"className\":\"hljs-keyword\",\"children\":\"if\"}],\" (err) {\\n        \",[\"$\",\"span\",\"span-30\",{\"className\":\"hljs-variable language_\",\"children\":\"console\"}],\".\",[\"$\",\"span\",\"span-31\",{\"className\":\"hljs-title function_\",\"children\":\"error\"}],\"(\",[\"$\",\"span\",\"span-32\",{\"className\":\"hljs-string\",\"children\":\"\\\"Error writing GraphQLIntrospectionResultGithub file\\\"\"}],\", err);\\n        \",[\"$\",\"span\",\"span-33\",{\"className\":\"hljs-keyword\",\"children\":\"return\"}],\";\\n      }\\n\\n      \",[\"$\",\"span\",\"span-34\",{\"className\":\"hljs-variable language_\",\"children\":\"console\"}],\".\",[\"$\",\"span\",\"span-35\",{\"className\":\"hljs-title function_\",\"children\":\"log\"}],\"(\",[\"$\",\"span\",\"span-36\",{\"className\":\"hljs-string\",\"children\":\"\\\"GraphQL Github Introspection Data successfully fetched!\\\"\"}],\");\\n    });\\n  } \",[\"$\",\"span\",\"span-37\",{\"className\":\"hljs-keyword\",\"children\":\"catch\"}],\" (e) {\\n    \",[\"$\",\"span\",\"span-38\",{\"className\":\"hljs-variable language_\",\"children\":\"console\"}],\".\",[\"$\",\"span\",\"span-39\",{\"className\":\"hljs-title function_\",\"children\":\"error\"}],\"(e);\\n    process.\",[\"$\",\"span\",\"span-40\",{\"className\":\"hljs-title function_\",\"children\":\"exit\"}],\"(\",[\"$\",\"span\",\"span-41\",{\"className\":\"hljs-number\",\"children\":\"1\"}],\");\\n  }\\n})();\\n\"]}]}],\"\\n\",[\"$\",\"p\",\"p-5\",{\"children\":[\"I used this \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://gist.github.com/craigbeck/b90915d49fda19d5b2b17ead14dcd6da\",\"children\":\"introspection query\"}],\" to get all the required types.\\nNow when you run \",[\"$\",\"strong\",\"strong-0\",{\"children\":\"npm run update:graphql\"}],\" you get a nice big schema with all the types from the GitHub GraphQL API.\"]}],\"\\n\",[\"$\",\"h3\",\"h3-1\",{\"children\":\"Add additional graphql-let configuration file\"}],\"\\n\",[\"$\",\"p\",\"p-6\",{\"children\":[\"To point graphql-let to this schema file I've added this file to the root of the project \",[\"$\",\"strong\",\"strong-0\",{\"children\":\".graphql-let-github\"}]]}],\"\\n\",[\"$\",\"pre\",\"pre-2\",{\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"hljs language-yml\",\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-attr\",\"children\":\"schema:\"}],\"\\n  \",[\"$\",\"span\",\"span-1\",{\"className\":\"hljs-bullet\",\"children\":\"-\"}],\" \",[\"$\",\"span\",\"span-2\",{\"className\":\"hljs-string\",\"children\":\"\\\"./src/temp/GraphQLIntrospectionResultGithub.json\\\"\"}],\"\\n\",[\"$\",\"span\",\"span-3\",{\"className\":\"hljs-attr\",\"children\":\"documents:\"}],\" \",[\"$\",\"span\",\"span-4\",{\"className\":\"hljs-string\",\"children\":\"\\\"src/**/*.github.graphql\\\"\"}],\"\\n\",[\"$\",\"span\",\"span-5\",{\"className\":\"hljs-attr\",\"children\":\"plugins:\"}],\"\\n  \",[\"$\",\"span\",\"span-6\",{\"className\":\"hljs-bullet\",\"children\":\"-\"}],\" \",[\"$\",\"span\",\"span-7\",{\"className\":\"hljs-string\",\"children\":\"typescript\"}],\"\\n  \",[\"$\",\"span\",\"span-8\",{\"className\":\"hljs-bullet\",\"children\":\"-\"}],\" \",[\"$\",\"span\",\"span-9\",{\"className\":\"hljs-string\",\"children\":\"typescript-operations\"}],\"\\n  \",[\"$\",\"span\",\"span-10\",{\"className\":\"hljs-bullet\",\"children\":\"-\"}],\" \",[\"$\",\"span\",\"span-11\",{\"className\":\"hljs-string\",\"children\":\"typed-document-node\"}],\"\\n\\n\",[\"$\",\"span\",\"span-12\",{\"className\":\"hljs-attr\",\"children\":\"cacheDir:\"}],\" \",[\"$\",\"span\",\"span-13\",{\"className\":\"hljs-string\",\"children\":\".generated\"}],\"\\n\",[\"$\",\"span\",\"span-14\",{\"className\":\"hljs-attr\",\"children\":\"config:\"}],\"\\n  \",[\"$\",\"span\",\"span-15\",{\"className\":\"hljs-attr\",\"children\":\"useIndexSignature:\"}],\" \",[\"$\",\"span\",\"span-16\",{\"className\":\"hljs-literal\",\"children\":\"true\"}],\"\\n\"]}]}],\"\\n\",[\"$\",\"p\",\"p-7\",{\"children\":[\"Change the \",[\"$\",\"strong\",\"strong-0\",{\"children\":\"bootstrap\"}],\" npm script to:\"]}],\"\\n\",[\"$\",\"pre\",\"pre-3\",{\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"hljs language-json\",\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-attr\",\"children\":\"\\\"bootstrap\\\"\"}],[\"$\",\"span\",\"span-1\",{\"className\":\"hljs-punctuation\",\"children\":\":\"}],\" \",[\"$\",\"span\",\"span-2\",{\"className\":\"hljs-string\",\"children\":\"\\\"ts-node --project tsconfig.scripts.json scripts/bootstrap.ts \u0026\u0026 graphql-let \u0026\u0026 graphql-let --config .graphql-let-github.yml\\\"\"}],\"\\n\"]}]}],\"\\n\",[\"$\",\"p\",\"p-8\",{\"children\":[\"This generates all the types when running \",[\"$\",\"strong\",\"strong-0\",{\"children\":\"npm start\"}]]}],\"\\n\",[\"$\",\"p\",\"p-9\",{\"children\":[\"To also receive updated types while you're actively developing update \",[\"$\",\"strong\",\"strong-0\",{\"children\":\"next.config.js\"}],\" with the following lines:\"]}],\"\\n\",[\"$\",\"pre\",\"pre-4\",{\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"hljs language-javascript\",\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" \",[\"$\",\"span\",\"span-1\",{\"className\":\"hljs-title function_\",\"children\":\"applyGraphQLCodeGenerationLoaders\"}],\" = (\",[\"$\",\"span\",\"span-2\",{\"className\":\"hljs-params\",\"children\":\"config, options\"}],\") =\u003e {\\n  config.\",[\"$\",\"span\",\"span-3\",{\"className\":\"hljs-property\",\"children\":\"module\"}],\".\",[\"$\",\"span\",\"span-4\",{\"className\":\"hljs-property\",\"children\":\"rules\"}],\".\",[\"$\",\"span\",\"span-5\",{\"className\":\"hljs-title function_\",\"children\":\"push\"}],\"({\\n    \",[\"$\",\"span\",\"span-6\",{\"className\":\"hljs-attr\",\"children\":\"test\"}],\": \",[\"$\",\"span\",\"span-7\",{\"className\":\"hljs-regexp\",\"children\":\"/\\\\.sitecore.graphql$/\"}],\",\\n    \",[\"$\",\"span\",\"span-8\",{\"className\":\"hljs-attr\",\"children\":\"exclude\"}],\": \",[\"$\",\"span\",\"span-9\",{\"className\":\"hljs-regexp\",\"children\":\"/node_modules/\"}],\",\\n    \",[\"$\",\"span\",\"span-10\",{\"className\":\"hljs-attr\",\"children\":\"use\"}],\": [options.\",[\"$\",\"span\",\"span-11\",{\"className\":\"hljs-property\",\"children\":\"defaultLoaders\"}],\".\",[\"$\",\"span\",\"span-12\",{\"className\":\"hljs-property\",\"children\":\"babel\"}],\", { \",[\"$\",\"span\",\"span-13\",{\"className\":\"hljs-attr\",\"children\":\"loader\"}],\": \",[\"$\",\"span\",\"span-14\",{\"className\":\"hljs-string\",\"children\":\"'graphql-let/loader'\"}],\" }],\\n  })\\n\\n  config.\",[\"$\",\"span\",\"span-15\",{\"className\":\"hljs-property\",\"children\":\"module\"}],\".\",[\"$\",\"span\",\"span-16\",{\"className\":\"hljs-property\",\"children\":\"rules\"}],\".\",[\"$\",\"span\",\"span-17\",{\"className\":\"hljs-title function_\",\"children\":\"push\"}],\"({\\n    \",[\"$\",\"span\",\"span-18\",{\"className\":\"hljs-attr\",\"children\":\"test\"}],\": \",[\"$\",\"span\",\"span-19\",{\"className\":\"hljs-regexp\",\"children\":\"/\\\\.github.graphql$/\"}],\",\\n    \",[\"$\",\"span\",\"span-20\",{\"className\":\"hljs-attr\",\"children\":\"exclude\"}],\": \",[\"$\",\"span\",\"span-21\",{\"className\":\"hljs-regexp\",\"children\":\"/node_modules/\"}],\",\\n    \",[\"$\",\"span\",\"span-22\",{\"className\":\"hljs-attr\",\"children\":\"use\"}],\": [options.\",[\"$\",\"span\",\"span-23\",{\"className\":\"hljs-property\",\"children\":\"defaultLoaders\"}],\".\",[\"$\",\"span\",\"span-24\",{\"className\":\"hljs-property\",\"children\":\"babel\"}],\", { \",[\"$\",\"span\",\"span-25\",{\"className\":\"hljs-attr\",\"children\":\"loader\"}],\": \",[\"$\",\"span\",\"span-26\",{\"className\":\"hljs-string\",\"children\":\"'graphql-let/loader'\"}],\", \",[\"$\",\"span\",\"span-27\",{\"className\":\"hljs-attr\",\"children\":\"options\"}],\": { \",[\"$\",\"span\",\"span-28\",{\"className\":\"hljs-attr\",\"children\":\"configFile\"}],\": \",[\"$\",\"span\",\"span-29\",{\"className\":\"hljs-string\",\"children\":\"\\\".graphql-let-github.yml\\\"\"}],\" } }],\\n  })\\n\"]}]}],\"\\n\",[\"$\",\"p\",\"p-10\",{\"children\":[\"As you see I suffix the Sitecore GraphQL queries with \",[\"$\",\"strong\",\"strong-0\",{\"children\":\".sitecore.graphql\"}],\" and the GitHub queries with \",[\"$\",\"strong\",\"strong-1\",{\"children\":\".github.graphql\"}],\". Because both types of queries have their own configuration.\"]}],\"\\n\",[\"$\",\"h3\",\"h3-2\",{\"children\":\"Add a query to a component\"}],\"\\n\",[\"$\",\"p\",\"p-11\",{\"children\":[\"Now that's all in place we can add some GraphQL data to a component. Next to the component that will consume the data, we will create \",[\"$\",\"strong\",\"strong-0\",{\"children\":\"userSearch.github.graphql\"}],\":\"]}],\"\\n\",[\"$\",\"pre\",\"pre-5\",{\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"hljs language-graphql\",\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-keyword\",\"children\":\"query\"}],\" githubUserSearch\",[\"$\",\"span\",\"span-1\",{\"className\":\"hljs-punctuation\",\"children\":\"(\"}],[\"$\",\"span\",\"span-2\",{\"className\":\"hljs-variable\",\"children\":\"$$organisation\"}],\": String\",[\"$\",\"span\",\"span-3\",{\"className\":\"hljs-punctuation\",\"children\":\"!\"}],[\"$\",\"span\",\"span-4\",{\"className\":\"hljs-punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",\"span-5\",{\"className\":\"hljs-punctuation\",\"children\":\"{\"}],\"\\n  organization\",[\"$\",\"span\",\"span-6\",{\"className\":\"hljs-punctuation\",\"children\":\"(\"}],[\"$\",\"span\",\"span-7\",{\"className\":\"hljs-symbol\",\"children\":\"login\"}],[\"$\",\"span\",\"span-8\",{\"className\":\"hljs-punctuation\",\"children\":\":\"}],\" \",[\"$\",\"span\",\"span-9\",{\"className\":\"hljs-variable\",\"children\":\"$$organisation\"}],\") \",[\"$\",\"span\",\"span-10\",{\"className\":\"hljs-punctuation\",\"children\":\"{\"}],\"\\n    membersWithRole\",[\"$\",\"span\",\"span-11\",{\"className\":\"hljs-punctuation\",\"children\":\"(\"}],[\"$\",\"span\",\"span-12\",{\"className\":\"hljs-symbol\",\"children\":\"first\"}],[\"$\",\"span\",\"span-13\",{\"className\":\"hljs-punctuation\",\"children\":\":\"}],\" \",[\"$\",\"span\",\"span-14\",{\"className\":\"hljs-number\",\"children\":\"100\"}],[\"$\",\"span\",\"span-15\",{\"className\":\"hljs-punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",\"span-16\",{\"className\":\"hljs-punctuation\",\"children\":\"{\"}],\"\\n      nodes \",[\"$\",\"span\",\"span-17\",{\"className\":\"hljs-punctuation\",\"children\":\"{\"}],\"\\n        \",[\"$\",\"span\",\"span-18\",{\"className\":\"hljs-punctuation\",\"children\":\"...\"}],\" \",[\"$\",\"span\",\"span-19\",{\"className\":\"hljs-keyword\",\"children\":\"on\"}],\" User \",[\"$\",\"span\",\"span-20\",{\"className\":\"hljs-punctuation\",\"children\":\"{\"}],\"\\n          name\\n          company\\n          email\\n          avatarUrl\\n          location\\n          login\\n        \",[\"$\",\"span\",\"span-21\",{\"className\":\"hljs-punctuation\",\"children\":\"}\"}],\"\\n      \",[\"$\",\"span\",\"span-22\",{\"className\":\"hljs-punctuation\",\"children\":\"}\"}],\"\\n    \",[\"$\",\"span\",\"span-23\",{\"className\":\"hljs-punctuation\",\"children\":\"}\"}],\"\\n  \",[\"$\",\"span\",\"span-24\",{\"className\":\"hljs-punctuation\",\"children\":\"}\"}],\"\\n\",[\"$\",\"span\",\"span-25\",{\"className\":\"hljs-punctuation\",\"children\":\"}\"}],\"\\n\"]}]}],\"\\n\",[\"$\",\"p\",\"p-12\",{\"children\":\"This query accepts an Organisation as a parameter. The query asks for the first 100 members of the organisation found. Within the nodes, the User Fragment is used to get a couple of properties of each user.\"}],\"\\n\",[\"$\",\"p\",\"p-13\",{\"children\":[\"To get this data into the component as static props (so the query is done on build-time) the method \",[\"$\",\"strong\",\"strong-0\",{\"children\":\"getStaticProps\"}],\" needs to be exported. With Next.js this can usually only be done on page level but Sitecore JSS added some magic to also allow this on component level:\"]}],\"\\n\",[\"$\",\"pre\",\"pre-6\",{\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"hljs language-javascript\",\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" query = \",[\"$\",\"span\",\"span-1\",{\"className\":\"hljs-built_in\",\"children\":\"require\"}],\"(\",[\"$\",\"span\",\"span-2\",{\"className\":\"hljs-string\",\"children\":\"\\\"raw-loader!./userSearch.github.graphql\\\"\"}],\").\",[\"$\",\"span\",\"span-3\",{\"className\":\"hljs-property\",\"children\":\"default\"}],\";\\n\\n\",[\"$\",\"span\",\"span-4\",{\"className\":\"hljs-keyword\",\"children\":\"export\"}],\" \",[\"$\",\"span\",\"span-5\",{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" \",[\"$\",\"span\",\"span-6\",{\"className\":\"hljs-attr\",\"children\":\"getStaticProps\"}],\": \",[\"$\",\"span\",\"span-7\",{\"className\":\"hljs-title class_\",\"children\":\"GetStaticComponentProps\"}],\" = \",[\"$\",\"span\",\"span-8\",{\"className\":\"hljs-title function_\",\"children\":\"async\"}],\" (rendering) =\u003e {\\n  \",[\"$\",\"span\",\"span-9\",{\"className\":\"hljs-keyword\",\"children\":\"try\"}],\" {\\n    \",[\"$\",\"span\",\"span-10\",{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" githubResults = \",[\"$\",\"span\",\"span-11\",{\"className\":\"hljs-keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",\"span-12\",{\"className\":\"hljs-title function_\",\"children\":\"fetch\"}],\"(\",[\"$\",\"span\",\"span-13\",{\"className\":\"hljs-string\",\"children\":\"\\\"https://api.github.com/graphql\\\"\"}],\", {\\n      \",[\"$\",\"span\",\"span-14\",{\"className\":\"hljs-attr\",\"children\":\"method\"}],\": \",[\"$\",\"span\",\"span-15\",{\"className\":\"hljs-string\",\"children\":\"\\\"POST\\\"\"}],\",\\n      \",[\"$\",\"span\",\"span-16\",{\"className\":\"hljs-attr\",\"children\":\"headers\"}],\": {\\n        \",[\"$\",\"span\",\"span-17\",{\"className\":\"hljs-string\",\"children\":\"\\\"Content-Type\\\"\"}],\": \",[\"$\",\"span\",\"span-18\",{\"className\":\"hljs-string\",\"children\":\"\\\"application/json\\\"\"}],\",\\n        \",[\"$\",\"span\",\"span-19\",{\"className\":\"hljs-title class_\",\"children\":\"Authorization\"}],\": \",[\"$\",\"span\",\"span-20\",{\"className\":\"hljs-string\",\"children\":[\"`bearer \",[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-subst\",\"children\":\"$${process.env.GHUB_PRIVATE_KEY}\"}],\"`\"]}],\",\\n      },\\n\\n      \",[\"$\",\"span\",\"span-21\",{\"className\":\"hljs-attr\",\"children\":\"body\"}],\": \",[\"$\",\"span\",\"span-22\",{\"className\":\"hljs-title class_\",\"children\":\"JSON\"}],\".\",[\"$\",\"span\",\"span-23\",{\"className\":\"hljs-title function_\",\"children\":\"stringify\"}],\"({\\n        \",[\"$\",\"span\",\"span-24\",{\"className\":\"hljs-attr\",\"children\":\"query\"}],\": query,\\n        \",[\"$\",\"span\",\"span-25\",{\"className\":\"hljs-attr\",\"children\":\"variables\"}],\": { \",[\"$\",\"span\",\"span-26\",{\"className\":\"hljs-attr\",\"children\":\"organisation\"}],\": rendering.\",[\"$\",\"span\",\"span-27\",{\"className\":\"hljs-property\",\"children\":\"fields\"}],\"?.\",[\"$\",\"span\",\"span-28\",{\"className\":\"hljs-property\",\"children\":\"organisation\"}],\"?.\",[\"$\",\"span\",\"span-29\",{\"className\":\"hljs-property\",\"children\":\"value\"}],\" },\\n      }),\\n    });\\n\\n    \",[\"$\",\"span\",\"span-30\",{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" githubData = \",[\"$\",\"span\",\"span-31\",{\"className\":\"hljs-keyword\",\"children\":\"await\"}],\" githubResults.\",[\"$\",\"span\",\"span-32\",{\"className\":\"hljs-title function_\",\"children\":\"json\"}],\"();\\n\\n    \",[\"$\",\"span\",\"span-33\",{\"className\":\"hljs-keyword\",\"children\":\"return\"}],\" githubData.\",[\"$\",\"span\",\"span-34\",{\"className\":\"hljs-property\",\"children\":\"data\"}],\";\\n  } \",[\"$\",\"span\",\"span-35\",{\"className\":\"hljs-keyword\",\"children\":\"catch\"}],\" (e) {\\n    \",[\"$\",\"span\",\"span-36\",{\"className\":\"hljs-variable language_\",\"children\":\"console\"}],\".\",[\"$\",\"span\",\"span-37\",{\"className\":\"hljs-title function_\",\"children\":\"error\"}],\"(e);\\n    \",[\"$\",\"span\",\"span-38\",{\"className\":\"hljs-keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",\"span-39\",{\"className\":\"hljs-literal\",\"children\":\"null\"}],\";\\n  }\\n};\\n\"]}]}],\"\\n\",[\"$\",\"p\",\"p-14\",{\"children\":[\"The organisation field is passed down from Sitecore, so the content editor can pick the GitHub organisation. \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://doc.sitecore.com/en/developers/hd/190/sitecore-headless-development/create-a-new-component-in-a-jss-next-js-app-using-the-code-first-development-workflow.html\",\"children\":\"Read more\"}],\" on how to add fields to components using the JSS Cli (I prefer this over clicking away in the Sitecore admin).\"]}],\"\\n\",[\"$\",\"p\",\"p-15\",{\"children\":[\"Within the component the data can now be consumed with the \",[\"$\",\"strong\",\"strong-0\",{\"children\":\"useComponentProps\"}],\" hook:\"]}],\"\\n\",[\"$\",\"pre\",\"pre-7\",{\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"hljs language-javascript\",\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-keyword\",\"children\":\"import\"}],\" { \",[\"$\",\"span\",\"span-1\",{\"className\":\"hljs-title class_\",\"children\":\"GetStaticComponentProps\"}],\" } \",[\"$\",\"span\",\"span-2\",{\"className\":\"hljs-keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",\"span-3\",{\"className\":\"hljs-string\",\"children\":\"\\\"@sitecore-jss/sitecore-jss-nextjs\\\"\"}],\";\\n\",[\"$\",\"span\",\"span-4\",{\"className\":\"hljs-keyword\",\"children\":\"import\"}],\" { \",[\"$\",\"span\",\"span-5\",{\"className\":\"hljs-title class_\",\"children\":\"GithubUserSearchQuery\"}],\" } \",[\"$\",\"span\",\"span-6\",{\"className\":\"hljs-keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",\"span-7\",{\"className\":\"hljs-string\",\"children\":\"\\\"./userSearch.github.graphql\\\"\"}],\";\\n\\n\",[\"$\",\"span\",\"span-8\",{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" \",[\"$\",\"span\",\"span-9\",{\"className\":\"hljs-title class_\",\"children\":\"UserSearch\"}],\": \",[\"$\",\"span\",\"span-10\",{\"className\":\"hljs-title class_\",\"children\":\"React\"}],\".\",[\"$\",\"span\",\"span-11\",{\"className\":\"hljs-property\",\"children\":\"FC\"}],\"\u003c\",[\"$\",\"span\",\"span-12\",{\"className\":\"hljs-title class_\",\"children\":\"UserSearchProps\"}],\"\u003e = ({ fields, rendering }): \",[\"$\",\"span\",\"span-13\",{\"className\":\"hljs-variable constant_\",\"children\":\"JSX\"}],\".\",[\"$\",\"span\",\"span-14\",{\"className\":\"hljs-property\",\"children\":\"Element\"}],\" =\u003e {\\n    \",[\"$\",\"span\",\"span-15\",{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" data = rendering.\",[\"$\",\"span\",\"span-16\",{\"className\":\"hljs-property\",\"children\":\"uid\"}],\" ? useComponentProps\u003c\",[\"$\",\"span\",\"span-17\",{\"className\":\"hljs-title class_\",\"children\":\"GithubUserSearchQuery\"}],\"\u003e(rendering.\",[\"$\",\"span\",\"span-18\",{\"className\":\"hljs-property\",\"children\":\"uid\"}],\") : \",[\"$\",\"span\",\"span-19\",{\"className\":\"hljs-literal\",\"children\":\"null\"}],\";\\n\"]}]}],\"\\n\",[\"$\",\"p\",\"p-16\",{\"children\":[\"With the type added to the \",[\"$\",\"strong\",\"strong-0\",{\"children\":\"useComponentProps\"}],\" function we get IntelliSense based on the query we created, how cool is that!\"]}],\"\\n\",[\"$\",\"p\",\"p-17\",{\"children\":[\"$\",\"img\",\"img-0\",{\"src\":\"/blog/vscode.jpg\",\"alt\":\"Intellisense\"}]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"f:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"d:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"Add external datasource to Sitecore JSS\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"Erwin Smit - Freelance frontend developer / fullstack developer\"}],[\"$\",\"meta\",\"3\",{\"property\":\"og:title\",\"content\":\"Add external datasource to Sitecore JSS\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:description\",\"content\":\"Erwin Smit - Freelance frontend developer / fullstack developer\"}],[\"$\",\"meta\",\"5\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"6\",{\"name\":\"twitter:title\",\"content\":\"Add external datasource to Sitecore JSS\"}],[\"$\",\"meta\",\"7\",{\"name\":\"twitter:description\",\"content\":\"Erwin Smit - Freelance frontend developer / fullstack developer\"}]]\n"])</script><script>self.__next_f.push([1,"b:null\n"])</script></body></html>