<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/a34f9d1faa5f3315-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/0f5f8cc0eb7d6afc.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/3a398bc4ce4edcc7.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-8af1d2e0ff41d756.js"/><script src="/_next/static/chunks/4bd1b696-05ac3765304a89c0.js" async=""></script><script src="/_next/static/chunks/215-c1a7d2d931604563.js" async=""></script><script src="/_next/static/chunks/main-app-e5edefe120089e16.js" async=""></script><script src="/_next/static/chunks/231-015614b9a59ae6eb.js" async=""></script><script src="/_next/static/chunks/173-e6c8bf506bfb93ff.js" async=""></script><script src="/_next/static/chunks/app/layout-28f46ae9c6a8b2dc.js" async=""></script><script src="/_next/static/chunks/app/not-found-081a5836cd82c2ca.js" async=""></script><meta name="next-size-adjust"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><title>Sitecore JSS on Azure Functions</title><meta name="description" content="Erwin Smit - Freelance frontend developer / fullstack developer"/><meta property="og:title" content="Sitecore JSS on Azure Functions"/><meta property="og:description" content="Erwin Smit - Freelance frontend developer / fullstack developer"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Sitecore JSS on Azure Functions"/><meta name="twitter:description" content="Erwin Smit - Freelance frontend developer / fullstack developer"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="bg-gray-100 [object Object]"><header class="bg-blue-600 text-white shadow-md"><div class="container mx-auto px-4 py-4"><div class="flex justify-between items-center"><a href="/"><div class="flex items-center space-x-4 bg-blue-700 rounded-full py-2 px-4"><img alt="Erwin Smit" loading="lazy" width="40" height="40" decoding="async" data-nimg="1" class="rounded-full border-2 border-white" style="color:transparent;height:40px;width:40px;object-fit:cover" src="/assets/selfie2.jpg"/><span class="font-semibold text-lg text-white">Erwin Smit</span></div></a><nav class="flex-grow"><ul class="flex justify-end space-x-6"><li><a class="hover:text-blue-200 transition duration-150 ease-in-out" href="/">About me</a></li><li><a class="hover:text-blue-200 transition duration-150 ease-in-out" href="/blog">Blog</a></li></ul></nav></div></div></header><main class="min-h-screen"><article class="max-w-7xl mx-auto px-8 my-12"><h1 class="w-full relative mb-8 text-6xl font-extrabold tracking-normal text-center title-font"><span class="bg-clip-text text-transparent bg-gradient-to-b from-blue-600 to-blue-500">Sitecore JSS on Azure Functions</span></h1><div class="flex items-center justify-center mb-16"><p class="text-base font-medium text-gray-600 group-hover:text-gray-800"><time dateTime="2021-10-27">October	27, 2021</time></p></div><div class="prose lg:prose-xl max-w-none prose-pre:p-0"><p>As described in a previous post, we managed to host Next.js using a custom server in <a href="/blog/nextjs-on-azure-functions/">Azure Functions</a>. Now let&#x27;s see if this also works for Sitecore JSS.</p>
<h2>Frontend only</h2>
<p>For just the public facing part it was no problem, the exact same code as used in the custom server <a href="/blog/nextjs-on-azure-functions/">previously</a> worked fine.
However to get the experience editor working we faced some challenges.</p>
<h2>Experience editor</h2>
<p>To get the Experience editor to work we have to do some more work. Mainly because the Next.js <a href="https://github.com/Sitecore/jss/tree/dev/samples/nextjs/src/pages/api/editing">API routes</a> are not supported when using a <a href="https://nextjs.org/docs/advanced-features/custom-server">custom server</a>.</p>
<p>Luckily these routes are easy to replicate using Azure Functions. So we created two Azure Functions that serves the:</p>
<ul>
<li>Editing Render Middleware</li>
<li>Editing Data Middleware</li>
</ul>
<p>Why do you need two endpoints for the Experience editor? This is to enable the <strong><a href="https://nextjs.org/docs/advanced-features/preview-mode">Preview mode</a></strong> in Next.js. The preview mode bypasses all the clever stuff like <strong>ISG</strong> (Incremental Static Generation).
How these endpoints work together is explained well in the <a href="https://jss.sitecore.com/docs/nextjs/experience-editor/architecture">JSS Docs</a>.</p>
<p>Implementing these endpoints was done with the following code, this example is for the <a href="https://github.com/Sitecore/jss/blob/dev/packages/sitecore-jss-nextjs/src/middleware/editing-render-middleware.ts">Editing Render Middleware</a>:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AzureFunction</span>, <span class="hljs-title class_">Context</span>, <span class="hljs-title class_">HttpRequest</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@azure/functions&quot;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">EditingRenderMiddleware</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@sitecore-jss/sitecore-jss-nextjs/middleware&quot;</span>;

<span class="hljs-keyword">const</span> <span class="hljs-attr">httpTrigger</span>: <span class="hljs-title class_">AzureFunction</span> = <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">context: Context, req: HttpRequest</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-keyword">void</span>&gt; {
  <span class="hljs-keyword">const</span> handler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EditingRenderMiddleware</span>().<span class="hljs-title function_">getHandler</span>();

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">handler</span>(context.<span class="hljs-property">req</span>, context.<span class="hljs-property">res</span>);
  } <span class="hljs-keyword">catch</span> (e) {
    context.<span class="hljs-title function_">log</span>(e);
    context.<span class="hljs-property">res</span> = {
      <span class="hljs-attr">status</span>: <span class="hljs-number">500</span>,
    };
  }
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> httpTrigger;
</code></pre>
<h3>Response handler</h3>
<p>The problem is that the response from Azure does not contain the same methods as Vercel. An <a href="https://github.com/Sitecore/jss/blob/dev/packages/sitecore-jss-nextjs/src/middleware/editing-render-middleware.ts#L86">example</a> is seen here:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">405</span>).<span class="hljs-title function_">json</span>({
  <span class="hljs-attr">html</span>: <span class="hljs-string">`&lt;html&gt;&lt;body&gt;Invalid request method &#x27;<span class="hljs-subst">${method}</span>&#x27;&lt;/body&gt;&lt;/html&gt;`</span>,
});
</code></pre>
<p>Azure Functions will return errors that these methods don&#x27;t exist. These methods are used throughout the Middlewares from Sitecore JSS. Do we need to replace all those middlewares? That would be a lot of work.</p>
<p>The easiest fix was to create a function that transforms all the Vercel specific functions to a format Azure understands. So we created a Responsehandler function that accepts the Azure Function context and attaches the Vercel specific functions:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getNextResponseHandler</span> = (<span class="hljs-params">context: Context</span>) =&gt; {

    <span class="hljs-keyword">const</span> nextContextRes = context.<span class="hljs-property">res</span>;

    nextContextRes.<span class="hljs-property">status</span> = <span class="hljs-function">(<span class="hljs-params">statusCode: number</span>) =&gt;</span> {
        nextContextRes.<span class="hljs-property">status</span> = statusCode;

        <span class="hljs-keyword">return</span> nextContextRes;
    }

    nextContextRes.<span class="hljs-property">setPreviewData</span> = <span class="hljs-function">(<span class="hljs-params">previewData: string</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> manifest = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;.next/prerender-manifest.json&#x27;</span>);

        <span class="hljs-keyword">const</span> cookies = <span class="hljs-title function_">setPreviewData</span>(previewData, manifest.<span class="hljs-property">preview</span>);

        nextContextRes.<span class="hljs-property">headers</span> = {
            <span class="hljs-string">&#x27;Set-Cookie&#x27;</span>: cookies.<span class="hljs-title function_">join</span>(<span class="hljs-string">&#x27;;&#x27;</span>),
            <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&quot;application/json; charset=utf-8&quot;</span>
        };
    };

etc etc...
</code></pre>
<p>Now this method can be used within the Azure Function:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> nextResponseHandler = <span class="hljs-title function_">getNextResponseHandler</span>(context);

    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">await</span> <span class="hljs-title function_">handler</span>(customContextReq, nextResponseHandler);

</code></pre>
<p>Creating the <code>setPreview</code> method was a pain. Because the correct functions are not <a href="https://github.com/vercel/next.js/blob/5ddee4494bf1fbcfd91ce81bc59f8de66949c9fc/packages/next/server/api-utils.ts#L420">exposed by Next.js</a>. For this reason I ended up doing quite a bit of copy-pasting from the Next.js repository to get it to work.</p>
<h3>Editing data cache</h3>
<p>Another issue we faced was the caching middleware throwing errors. After some digging the <a href="https://github.com/Sitecore/jss/blob/dev/packages/sitecore-jss-nextjs/src/middleware/editing-data-cache.ts#L24">following line</a> caused an issue:</p>
<pre><code class="hljs language-javascript">  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
    <span class="hljs-comment">// Use gzip compression and store using the OS temp directory (Vercel Serverless Functions have temp directory access)</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cache</span>(<span class="hljs-string">&#x27;editing-data&#x27;</span>, { <span class="hljs-attr">compression</span>: <span class="hljs-string">&#x27;gzip&#x27;</span>, <span class="hljs-attr">location</span>: os.<span class="hljs-title function_">tmpdir</span>() });
  }
</code></pre>
<p><code>os.tempdir()</code> was pointing to a directory where a Consumption Based Azure Function was not allowed to read/write to.</p>
<p>To resolve this, we created a custom EditingDataCache middleware function that sets a different directory. That middleware is added as a parameter to the EditingDataMiddleWare:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> handler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EditingDataMiddleware</span>({
  <span class="hljs-attr">editingDataCache</span>: editingDataDiskCache,
}).<span class="hljs-title function_">getHandler</span>();
</code></pre>
<p>It would be nice if this directory could be set as a parameter to the existing EditingDataDiskCache class. Hopefully, this <a href="https://github.com/Sitecore/jss/pull/839">pull request</a> will sort that out.</p>
<h2>Tell Sitecore where to look for the Azure Function</h2>
<p>Finally tell sitecore where to look for the Azure Function. This can be done in the config files of the Sitecore instance.</p>
<pre><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">app</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;jss-nextjs-app&quot;</span>
    <span class="hljs-attr">...</span>
    <span class="hljs-attr">serverSideRenderingEngineEndpointUrl</span>=<span class="hljs-string">&quot;https://${yourfunctionapp}.azurewebsites.net/api/editing/render&quot;</span>
    <span class="hljs-attr">serverSideRenderingEngineApplicationUrl</span>=<span class="hljs-string">&quot;https://${yourfunctionapp}.azurewebsites.net/&quot;</span>
/&gt;</span>
</code></pre>
<p>That&#x27;s it, those were the problems we faced. Hopefully this could be helpful for anyone else facing similar issues.</p></div></article></main><section class="bg-gray-800 text-white py-12"><div class="container mx-auto px-4 text-center"><h2 class="text-2xl font-bold mb-6" id="connect">Connect With Me</h2><div class="flex justify-center space-x-6"><a href="https://github.com/erwinsmit" target="_blank" rel="noopener noreferrer" class="hover:text-blue-400 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg><span class="sr-only">GitHub</span></a><a href="https://www.linkedin.com/in/erwin-smit-40957840/" target="_blank" rel="noopener noreferrer" class="hover:text-blue-400 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-linkedin"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect width="4" height="12" x="2" y="9"></rect><circle cx="4" cy="4" r="2"></circle></svg><span class="sr-only">LinkedIn</span></a></div></div></section><script src="/_next/static/chunks/webpack-8af1d2e0ff41d756.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"4:\"$Sreact.fragment\"\n5:I[7256,[\"231\",\"static/chunks/231-015614b9a59ae6eb.js\",\"173\",\"static/chunks/173-e6c8bf506bfb93ff.js\",\"185\",\"static/chunks/app/layout-28f46ae9c6a8b2dc.js\"],\"default\"]\n6:I[9275,[],\"\"]\n7:I[1343,[],\"\"]\n8:I[4703,[\"231\",\"static/chunks/231-015614b9a59ae6eb.js\",\"160\",\"static/chunks/app/not-found-081a5836cd82c2ca.js\"],\"default\"]\na:I[3120,[],\"OutletBoundary\"]\nc:I[3120,[],\"MetadataBoundary\"]\ne:I[3120,[],\"ViewportBoundary\"]\n10:I[6130,[],\"\"]\n1:HL[\"/_next/static/media/a34f9d1faa5f3315-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/css/0f5f8cc0eb7d6afc.css\",\"style\"]\n3:HL[\"/_next/static/css/3a398bc4ce4edcc7.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"qbAWKY8PVw4b-TN6TLmIA\",\"p\":\"\",\"c\":[\"\",\"blog\",\"sitecore-jss-on-azure-functions\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"sitecore-jss-on-azure-functions\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"sitecore-jss-on-azure-functions\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$4\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/0f5f8cc0eb7d6afc.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"sizes\":\"180x180\",\"href\":\"/favicon/apple-touch-icon.png\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/png\",\"sizes\":\"32x32\",\"href\":\"/favicon/favicon-32x32.png\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/png\",\"sizes\":\"16x16\",\"href\":\"/favicon/favicon-16x16.png\"}],[\"$\",\"link\",null,{\"rel\":\"manifest\",\"href\":\"/favicon/site.webmanifest\"}],[\"$\",\"link\",null,{\"rel\":\"mask-icon\",\"href\":\"/favicon/safari-pinned-tab.svg\",\"color\":\"#000000\"}],[\"$\",\"link\",null,{\"rel\":\"shortcut icon\",\"href\":\"/favicon/favicon.ico\"}],[\"$\",\"meta\",null,{\"name\":\"msapplication-TileColor\",\"content\":\"#000000\"}],[\"$\",\"meta\",null,{\"name\":\"msapplication-config\",\"content\":\"/favicon/browserconfig.xml\"}],[\"$\",\"meta\",null,{\"name\":\"theme-color\",\"content\":\"#000\"}],[\"$\",\"link\",null,{\"rel\":\"alternate\",\"type\":\"application/rss+xml\",\"href\":\"/feed.xml\"}]]}],[\"$\",\"body\",null,{\"className\":\"bg-gray-100 [object Object]\",\"children\":[[\"$\",\"$L5\",null,{}],[\"$\",\"main\",null,{\"className\":\"min-h-screen\",\"children\":[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$\",\"$L8\",null,{}],\"notFoundStyles\":[]}]}],[\"$\",\"section\",null,{\"className\":\"bg-gray-800 text-white py-12\",\"children\":[\"$\",\"div\",null,{\"className\":\"container mx-auto px-4 text-center\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"text-2xl font-bold mb-6\",\"id\":\"connect\",\"children\":\"Connect With Me\"}],[\"$\",\"div\",null,{\"className\":\"flex justify-center space-x-6\",\"children\":[[\"$\",\"a\",null,{\"href\":\"https://github.com/erwinsmit\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"hover:text-blue-400 transition-colors\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":32,\"height\":32,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-github\",\"children\":[[\"$\",\"path\",\"tonef\",{\"d\":\"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4\"}],[\"$\",\"path\",\"9comsn\",{\"d\":\"M9 18c-4.51 2-5-2-7-2\"}],\"$undefined\"]}],[\"$\",\"span\",null,{\"className\":\"sr-only\",\"children\":\"GitHub\"}]]}],[\"$\",\"a\",null,{\"href\":\"https://www.linkedin.com/in/erwin-smit-40957840/\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"hover:text-blue-400 transition-colors\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":32,\"height\":32,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-linkedin\",\"children\":[[\"$\",\"path\",\"c2jq9f\",{\"d\":\"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z\"}],[\"$\",\"rect\",\"mk3on5\",{\"width\":\"4\",\"height\":\"12\",\"x\":\"2\",\"y\":\"9\"}],[\"$\",\"circle\",\"bt5ra8\",{\"cx\":\"4\",\"cy\":\"4\",\"r\":\"2\"}],\"$undefined\"]}],[\"$\",\"span\",null,{\"className\":\"sr-only\",\"children\":\"LinkedIn\"}]]}]]}]]}]}]]}]]}]]}],{\"children\":[\"blog\",[\"$\",\"$4\",\"c\",{\"children\":[null,[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"sitecore-jss-on-azure-functions\",\"d\"],[\"$\",\"$4\",\"c\",{\"children\":[null,[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",\"$0:f:0:1:2:children:2:children:0\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$4\",\"c\",{\"children\":[\"$L9\",[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/3a398bc4ce4edcc7.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$La\",null,{\"children\":\"$Lb\"}]]}],{},null]},null]},null]},null],[\"$\",\"$4\",\"h\",{\"children\":[null,[\"$\",\"$4\",\"-jSxWRaw8ZDK92KkX5dtr\",{\"children\":[[\"$\",\"$Lc\",null,{\"children\":\"$Ld\"}],[\"$\",\"$Le\",null,{\"children\":\"$Lf\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\"}]]}]]}]]],\"m\":\"$undefined\",\"G\":[\"$10\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"9:[\"$\",\"article\",null,{\"className\":\"max-w-7xl mx-auto px-8 my-12\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"w-full relative mb-8 text-6xl font-extrabold tracking-normal text-center title-font\",\"children\":[\"$\",\"span\",null,{\"className\":\"bg-clip-text text-transparent bg-gradient-to-b from-blue-600 to-blue-500\",\"children\":\"Sitecore JSS on Azure Functions\"}]}],[\"$\",\"div\",null,{\"className\":\"flex items-center justify-center mb-16\",\"children\":[\"$\",\"p\",null,{\"className\":\"text-base font-medium text-gray-600 group-hover:text-gray-800\",\"children\":[\"$\",\"time\",null,{\"dateTime\":\"2021-10-27\",\"children\":\"October\\t27, 2021\"}]}]}],[\"$\",\"div\",null,{\"className\":\"prose lg:prose-xl max-w-none prose-pre:p-0\",\"children\":[[\"$\",\"p\",\"p-0\",{\"children\":[\"As described in a previous post, we managed to host Next.js using a custom server in \",[\"$\",\"a\",\"a-0\",{\"href\":\"/blog/nextjs-on-azure-functions/\",\"children\":\"Azure Functions\"}],\". Now let's see if this also works for Sitecore JSS.\"]}],\"\\n\",[\"$\",\"h2\",\"h2-0\",{\"children\":\"Frontend only\"}],\"\\n\",[\"$\",\"p\",\"p-1\",{\"children\":[\"For just the public facing part it was no problem, the exact same code as used in the custom server \",[\"$\",\"a\",\"a-0\",{\"href\":\"/blog/nextjs-on-azure-functions/\",\"children\":\"previously\"}],\" worked fine.\\nHowever to get the experience editor working we faced some challenges.\"]}],\"\\n\",[\"$\",\"h2\",\"h2-1\",{\"children\":\"Experience editor\"}],\"\\n\",[\"$\",\"p\",\"p-2\",{\"children\":[\"To get the Experience editor to work we have to do some more work. Mainly because the Next.js \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://github.com/Sitecore/jss/tree/dev/samples/nextjs/src/pages/api/editing\",\"children\":\"API routes\"}],\" are not supported when using a \",[\"$\",\"a\",\"a-1\",{\"href\":\"https://nextjs.org/docs/advanced-features/custom-server\",\"children\":\"custom server\"}],\".\"]}],\"\\n\",[\"$\",\"p\",\"p-3\",{\"children\":\"Luckily these routes are easy to replicate using Azure Functions. So we created two Azure Functions that serves the:\"}],\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Editing Render Middleware\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"Editing Data Middleware\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"p-4\",{\"children\":[\"Why do you need two endpoints for the Experience editor? This is to enable the \",[\"$\",\"strong\",\"strong-0\",{\"children\":[\"$\",\"a\",\"a-0\",{\"href\":\"https://nextjs.org/docs/advanced-features/preview-mode\",\"children\":\"Preview mode\"}]}],\" in Next.js. The preview mode bypasses all the clever stuff like \",[\"$\",\"strong\",\"strong-1\",{\"children\":\"ISG\"}],\" (Incremental Static Generation).\\nHow these endpoints work together is explained well in the \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://jss.sitecore.com/docs/nextjs/experience-editor/architecture\",\"children\":\"JSS Docs\"}],\".\"]}],\"\\n\",[\"$\",\"p\",\"p-5\",{\"children\":[\"Implementing these endpoints was done with the following code, this example is for the \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://github.com/Sitecore/jss/blob/dev/packages/sitecore-jss-nextjs/src/middleware/editing-render-middleware.ts\",\"children\":\"Editing Render Middleware\"}],\":\"]}],\"\\n\",[\"$\",\"pre\",\"pre-0\",{\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"hljs language-javascript\",\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-keyword\",\"children\":\"import\"}],\" { \",[\"$\",\"span\",\"span-1\",{\"className\":\"hljs-title class_\",\"children\":\"AzureFunction\"}],\", \",[\"$\",\"span\",\"span-2\",{\"className\":\"hljs-title class_\",\"children\":\"Context\"}],\", \",[\"$\",\"span\",\"span-3\",{\"className\":\"hljs-title class_\",\"children\":\"HttpRequest\"}],\" } \",[\"$\",\"span\",\"span-4\",{\"className\":\"hljs-keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",\"span-5\",{\"className\":\"hljs-string\",\"children\":\"\\\"@azure/functions\\\"\"}],\";\\n\",[\"$\",\"span\",\"span-6\",{\"className\":\"hljs-keyword\",\"children\":\"import\"}],\" { \",[\"$\",\"span\",\"span-7\",{\"className\":\"hljs-title class_\",\"children\":\"EditingRenderMiddleware\"}],\" } \",[\"$\",\"span\",\"span-8\",{\"className\":\"hljs-keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",\"span-9\",{\"className\":\"hljs-string\",\"children\":\"\\\"@sitecore-jss/sitecore-jss-nextjs/middleware\\\"\"}],\";\\n\\n\",[\"$\",\"span\",\"span-10\",{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" \",[\"$\",\"span\",\"span-11\",{\"className\":\"hljs-attr\",\"children\":\"httpTrigger\"}],\": \",[\"$\",\"span\",\"span-12\",{\"className\":\"hljs-title class_\",\"children\":\"AzureFunction\"}],\" = \",[\"$\",\"span\",\"span-13\",{\"className\":\"hljs-keyword\",\"children\":\"async\"}],\" \",[\"$\",\"span\",\"span-14\",{\"className\":\"hljs-keyword\",\"children\":\"function\"}],\" (\",[\"$\",\"span\",\"span-15\",{\"className\":\"hljs-params\",\"children\":\"context: Context, req: HttpRequest\"}],\"): \",[\"$\",\"span\",\"span-16\",{\"className\":\"hljs-title class_\",\"children\":\"Promise\"}],\"\u003c\",[\"$\",\"span\",\"span-17\",{\"className\":\"hljs-keyword\",\"children\":\"void\"}],\"\u003e {\\n  \",[\"$\",\"span\",\"span-18\",{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" handler = \",[\"$\",\"span\",\"span-19\",{\"className\":\"hljs-keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",\"span-20\",{\"className\":\"hljs-title class_\",\"children\":\"EditingRenderMiddleware\"}],\"().\",[\"$\",\"span\",\"span-21\",{\"className\":\"hljs-title function_\",\"children\":\"getHandler\"}],\"();\\n\\n  \",[\"$\",\"span\",\"span-22\",{\"className\":\"hljs-keyword\",\"children\":\"try\"}],\" {\\n    \",[\"$\",\"span\",\"span-23\",{\"className\":\"hljs-keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",\"span-24\",{\"className\":\"hljs-title function_\",\"children\":\"handler\"}],\"(context.\",[\"$\",\"span\",\"span-25\",{\"className\":\"hljs-property\",\"children\":\"req\"}],\", context.\",[\"$\",\"span\",\"span-26\",{\"className\":\"hljs-property\",\"children\":\"res\"}],\");\\n  } \",[\"$\",\"span\",\"span-27\",{\"className\":\"hljs-keyword\",\"children\":\"catch\"}],\" (e) {\\n    context.\",[\"$\",\"span\",\"span-28\",{\"className\":\"hljs-title function_\",\"children\":\"log\"}],\"(e);\\n    context.\",[\"$\",\"span\",\"span-29\",{\"className\":\"hljs-property\",\"children\":\"res\"}],\" = {\\n      \",[\"$\",\"span\",\"span-30\",{\"className\":\"hljs-attr\",\"children\":\"status\"}],\": \",[\"$\",\"span\",\"span-31\",{\"className\":\"hljs-number\",\"children\":\"500\"}],\",\\n    };\\n  }\\n};\\n\\n\",[\"$\",\"span\",\"span-32\",{\"className\":\"hljs-keyword\",\"children\":\"export\"}],\" \",[\"$\",\"span\",\"span-33\",{\"className\":\"hljs-keyword\",\"children\":\"default\"}],\" httpTrigger;\\n\"]}]}],\"\\n\",[\"$\",\"h3\",\"h3-0\",{\"children\":\"Response handler\"}],\"\\n\",[\"$\",\"p\",\"p-6\",{\"children\":[\"The problem is that the response from Azure does not contain the same methods as Vercel. An \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://github.com/Sitecore/jss/blob/dev/packages/sitecore-jss-nextjs/src/middleware/editing-render-middleware.ts#L86\",\"children\":\"example\"}],\" is seen here:\"]}],\"\\n\",[\"$\",\"pre\",\"pre-1\",{\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"hljs language-javascript\",\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-keyword\",\"children\":\"return\"}],\" res.\",[\"$\",\"span\",\"span-1\",{\"className\":\"hljs-title function_\",\"children\":\"status\"}],\"(\",[\"$\",\"span\",\"span-2\",{\"className\":\"hljs-number\",\"children\":\"405\"}],\").\",[\"$\",\"span\",\"span-3\",{\"className\":\"hljs-title function_\",\"children\":\"json\"}],\"({\\n  \",[\"$\",\"span\",\"span-4\",{\"className\":\"hljs-attr\",\"children\":\"html\"}],\": \",[\"$\",\"span\",\"span-5\",{\"className\":\"hljs-string\",\"children\":[\"`\u003chtml\u003e\u003cbody\u003eInvalid request method '\",[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-subst\",\"children\":\"$${method}\"}],\"'\u003c/body\u003e\u003c/html\u003e`\"]}],\",\\n});\\n\"]}]}],\"\\n\",[\"$\",\"p\",\"p-7\",{\"children\":\"Azure Functions will return errors that these methods don't exist. These methods are used throughout the Middlewares from Sitecore JSS. Do we need to replace all those middlewares? That would be a lot of work.\"}],\"\\n\",[\"$\",\"p\",\"p-8\",{\"children\":\"The easiest fix was to create a function that transforms all the Vercel specific functions to a format Azure understands. So we created a Responsehandler function that accepts the Azure Function context and attaches the Vercel specific functions:\"}],\"\\n\",[\"$\",\"pre\",\"pre-2\",{\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"hljs language-javascript\",\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-keyword\",\"children\":\"export\"}],\" \",[\"$\",\"span\",\"span-1\",{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" \",[\"$\",\"span\",\"span-2\",{\"className\":\"hljs-title function_\",\"children\":\"getNextResponseHandler\"}],\" = (\",[\"$\",\"span\",\"span-3\",{\"className\":\"hljs-params\",\"children\":\"context: Context\"}],\") =\u003e {\\n\\n    \",[\"$\",\"span\",\"span-4\",{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" nextContextRes = context.\",[\"$\",\"span\",\"span-5\",{\"className\":\"hljs-property\",\"children\":\"res\"}],\";\\n\\n    nextContextRes.\",[\"$\",\"span\",\"span-6\",{\"className\":\"hljs-property\",\"children\":\"status\"}],\" = \",[\"$\",\"span\",\"span-7\",{\"className\":\"hljs-function\",\"children\":[\"(\",[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-params\",\"children\":\"statusCode: number\"}],\") =\u003e\"]}],\" {\\n        nextContextRes.\",[\"$\",\"span\",\"span-8\",{\"className\":\"hljs-property\",\"children\":\"status\"}],\" = statusCode;\\n\\n        \",[\"$\",\"span\",\"span-9\",{\"className\":\"hljs-keyword\",\"children\":\"return\"}],\" nextContextRes;\\n    }\\n\\n    nextContextRes.\",[\"$\",\"span\",\"span-10\",{\"className\":\"hljs-property\",\"children\":\"setPreviewData\"}],\" = \",[\"$\",\"span\",\"span-11\",{\"className\":\"hljs-function\",\"children\":[\"(\",[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-params\",\"children\":\"previewData: string\"}],\") =\u003e\"]}],\" {\\n        \",[\"$\",\"span\",\"span-12\",{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" manifest = \",[\"$\",\"span\",\"span-13\",{\"className\":\"hljs-built_in\",\"children\":\"require\"}],\"(\",[\"$\",\"span\",\"span-14\",{\"className\":\"hljs-string\",\"children\":\"'.next/prerender-manifest.json'\"}],\");\\n\\n        \",[\"$\",\"span\",\"span-15\",{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" cookies = \",[\"$\",\"span\",\"span-16\",{\"className\":\"hljs-title function_\",\"children\":\"setPreviewData\"}],\"(previewData, manifest.\",[\"$\",\"span\",\"span-17\",{\"className\":\"hljs-property\",\"children\":\"preview\"}],\");\\n\\n        nextContextRes.\",[\"$\",\"span\",\"span-18\",{\"className\":\"hljs-property\",\"children\":\"headers\"}],\" = {\\n            \",[\"$\",\"span\",\"span-19\",{\"className\":\"hljs-string\",\"children\":\"'Set-Cookie'\"}],\": cookies.\",[\"$\",\"span\",\"span-20\",{\"className\":\"hljs-title function_\",\"children\":\"join\"}],\"(\",[\"$\",\"span\",\"span-21\",{\"className\":\"hljs-string\",\"children\":\"';'\"}],\"),\\n            \",[\"$\",\"span\",\"span-22\",{\"className\":\"hljs-string\",\"children\":\"'Content-Type'\"}],\": \",[\"$\",\"span\",\"span-23\",{\"className\":\"hljs-string\",\"children\":\"\\\"application/json; charset=utf-8\\\"\"}],\"\\n        };\\n    };\\n\\netc etc...\\n\"]}]}],\"\\n\",[\"$\",\"p\",\"p-9\",{\"children\":\"Now this method can be used within the Azure Function:\"}],\"\\n\",[\"$\",\"pre\",\"pre-3\",{\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"hljs language-javascript\",\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" nextResponseHandler = \",[\"$\",\"span\",\"span-1\",{\"className\":\"hljs-title function_\",\"children\":\"getNextResponseHandler\"}],\"(context);\\n\\n    \",[\"$\",\"span\",\"span-2\",{\"className\":\"hljs-keyword\",\"children\":\"try\"}],\" {\\n        \",[\"$\",\"span\",\"span-3\",{\"className\":\"hljs-keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",\"span-4\",{\"className\":\"hljs-title function_\",\"children\":\"handler\"}],\"(customContextReq, nextResponseHandler);\\n\\n\"]}]}],\"\\n\",[\"$\",\"p\",\"p-10\",{\"children\":[\"Creating the \",[\"$\",\"code\",\"code-0\",{\"children\":\"setPreview\"}],\" method was a pain. Because the correct functions are not \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://github.com/vercel/next.js/blob/5ddee4494bf1fbcfd91ce81bc59f8de66949c9fc/packages/next/server/api-utils.ts#L420\",\"children\":\"exposed by Next.js\"}],\". For this reason I ended up doing quite a bit of copy-pasting from the Next.js repository to get it to work.\"]}],\"\\n\",[\"$\",\"h3\",\"h3-1\",{\"children\":\"Editing data cache\"}],\"\\n\",[\"$\",\"p\",\"p-11\",{\"children\":[\"Another issue we faced was the caching middleware throwing errors. After some digging the \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://github.com/Sitecore/jss/blob/dev/packages/sitecore-jss-nextjs/src/middleware/editing-data-cache.ts#L24\",\"children\":\"following line\"}],\" caused an issue:\"]}],\"\\n\",[\"$\",\"pre\",\"pre-4\",{\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"hljs language-javascript\",\"children\":[\"  \",[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-title function_\",\"children\":\"constructor\"}],\"(\",[\"$\",\"span\",\"span-1\",{\"className\":\"hljs-params\"}],\") {\\n    \",[\"$\",\"span\",\"span-2\",{\"className\":\"hljs-comment\",\"children\":\"// Use gzip compression and store using the OS temp directory (Vercel Serverless Functions have temp directory access)\"}],\"\\n    \",[\"$\",\"span\",\"span-3\",{\"className\":\"hljs-variable language_\",\"children\":\"this\"}],\".\",[\"$\",\"span\",\"span-4\",{\"className\":\"hljs-property\",\"children\":\"cache\"}],\" = \",[\"$\",\"span\",\"span-5\",{\"className\":\"hljs-keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",\"span-6\",{\"className\":\"hljs-title class_\",\"children\":\"Cache\"}],\"(\",[\"$\",\"span\",\"span-7\",{\"className\":\"hljs-string\",\"children\":\"'editing-data'\"}],\", { \",[\"$\",\"span\",\"span-8\",{\"className\":\"hljs-attr\",\"children\":\"compression\"}],\": \",[\"$\",\"span\",\"span-9\",{\"className\":\"hljs-string\",\"children\":\"'gzip'\"}],\", \",[\"$\",\"span\",\"span-10\",{\"className\":\"hljs-attr\",\"children\":\"location\"}],\": os.\",[\"$\",\"span\",\"span-11\",{\"className\":\"hljs-title function_\",\"children\":\"tmpdir\"}],\"() });\\n  }\\n\"]}]}],\"\\n\",[\"$\",\"p\",\"p-12\",{\"children\":[[\"$\",\"code\",\"code-0\",{\"children\":\"os.tempdir()\"}],\" was pointing to a directory where a Consumption Based Azure Function was not allowed to read/write to.\"]}],\"\\n\",[\"$\",\"p\",\"p-13\",{\"children\":\"To resolve this, we created a custom EditingDataCache middleware function that sets a different directory. That middleware is added as a parameter to the EditingDataMiddleWare:\"}],\"\\n\",[\"$\",\"pre\",\"pre-5\",{\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"hljs language-javascript\",\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" handler = \",[\"$\",\"span\",\"span-1\",{\"className\":\"hljs-keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",\"span-2\",{\"className\":\"hljs-title class_\",\"children\":\"EditingDataMiddleware\"}],\"({\\n  \",[\"$\",\"span\",\"span-3\",{\"className\":\"hljs-attr\",\"children\":\"editingDataCache\"}],\": editingDataDiskCache,\\n}).\",[\"$\",\"span\",\"span-4\",{\"className\":\"hljs-title function_\",\"children\":\"getHandler\"}],\"();\\n\"]}]}],\"\\n\",[\"$\",\"p\",\"p-14\",{\"children\":[\"It would be nice if this directory could be set as a parameter to the existing EditingDataDiskCache class. Hopefully, this \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://github.com/Sitecore/jss/pull/839\",\"children\":\"pull request\"}],\" will sort that out.\"]}],\"\\n\",[\"$\",\"h2\",\"h2-2\",{\"children\":\"Tell Sitecore where to look for the Azure Function\"}],\"\\n\",[\"$\",\"p\",\"p-15\",{\"children\":\"Finally tell sitecore where to look for the Azure Function. This can be done in the config files of the Sitecore instance.\"}],\"\\n\",[\"$\",\"pre\",\"pre-6\",{\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"hljs language-xml\",\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-tag\",\"children\":[\"\u003c\",[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-name\",\"children\":\"app\"}],\" \",[\"$\",\"span\",\"span-1\",{\"className\":\"hljs-attr\",\"children\":\"name\"}],\"=\",[\"$\",\"span\",\"span-2\",{\"className\":\"hljs-string\",\"children\":\"\\\"jss-nextjs-app\\\"\"}],\"\\n    \",[\"$\",\"span\",\"span-3\",{\"className\":\"hljs-attr\",\"children\":\"...\"}],\"\\n    \",[\"$\",\"span\",\"span-4\",{\"className\":\"hljs-attr\",\"children\":\"serverSideRenderingEngineEndpointUrl\"}],\"=\",[\"$\",\"span\",\"span-5\",{\"className\":\"hljs-string\",\"children\":\"\\\"https://${yourfunctionapp}.azurewebsites.net/api/editing/render\\\"\"}],\"\\n    \",[\"$\",\"span\",\"span-6\",{\"className\":\"hljs-attr\",\"children\":\"serverSideRenderingEngineApplicationUrl\"}],\"=\",[\"$\",\"span\",\"span-7\",{\"className\":\"hljs-string\",\"children\":\"\\\"https://${yourfunctionapp}.azurewebsites.net/\\\"\"}],\"\\n/\u003e\"]}],\"\\n\"]}]}],\"\\n\",[\"$\",\"p\",\"p-16\",{\"children\":\"That's it, those were the problems we faced. Hopefully this could be helpful for anyone else facing similar issues.\"}]]}]]}]\n"])</script><script>self.__next_f.push([1,"f:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"d:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"Sitecore JSS on Azure Functions\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"Erwin Smit - Freelance frontend developer / fullstack developer\"}],[\"$\",\"meta\",\"3\",{\"property\":\"og:title\",\"content\":\"Sitecore JSS on Azure Functions\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:description\",\"content\":\"Erwin Smit - Freelance frontend developer / fullstack developer\"}],[\"$\",\"meta\",\"5\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"6\",{\"name\":\"twitter:title\",\"content\":\"Sitecore JSS on Azure Functions\"}],[\"$\",\"meta\",\"7\",{\"name\":\"twitter:description\",\"content\":\"Erwin Smit - Freelance frontend developer / fullstack developer\"}]]\n"])</script><script>self.__next_f.push([1,"b:null\n"])</script></body></html>