<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/a34f9d1faa5f3315-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" as="image" href="/blog/lightspeed-standard.jpg"/><link rel="preload" as="image" href="/blog/javascript-sources-standard.jpg"/><link rel="preload" as="image" href="/blog/css-sources-standard.jpg"/><link rel="preload" as="image" href="/blog/does-it-spark-joy.jpg"/><link rel="preload" as="image" href="/blog/final-result.jpg"/><link rel="stylesheet" href="/_next/static/css/0f5f8cc0eb7d6afc.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/3a398bc4ce4edcc7.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-8af1d2e0ff41d756.js"/><script src="/_next/static/chunks/4bd1b696-05ac3765304a89c0.js" async=""></script><script src="/_next/static/chunks/215-c1a7d2d931604563.js" async=""></script><script src="/_next/static/chunks/main-app-e5edefe120089e16.js" async=""></script><script src="/_next/static/chunks/231-015614b9a59ae6eb.js" async=""></script><script src="/_next/static/chunks/173-e6c8bf506bfb93ff.js" async=""></script><script src="/_next/static/chunks/app/layout-3ede681d466d9354.js" async=""></script><script src="/_next/static/chunks/app/not-found-081a5836cd82c2ca.js" async=""></script><meta name="next-size-adjust"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><title>How to make your Sitecore SXA site perform</title><meta name="description" content="Erwin Smit - Freelance frontend developer / fullstack developer"/><meta property="og:title" content="How to make your Sitecore SXA site perform"/><meta property="og:description" content="Erwin Smit - Freelance frontend developer / fullstack developer"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="How to make your Sitecore SXA site perform"/><meta name="twitter:description" content="Erwin Smit - Freelance frontend developer / fullstack developer"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="bg-gray-100 [object Object]"><header class="bg-blue-600 text-white shadow-md"><div class="container mx-auto px-4 py-4"><div class="flex justify-between items-center"><a href="/"><div class="flex items-center space-x-4 bg-blue-700 rounded-full py-2 px-4"><img alt="Erwin Smit" loading="lazy" width="40" height="40" decoding="async" data-nimg="1" class="rounded-full border-2 border-white" style="color:transparent;height:40px;width:40px;object-fit:cover" src="/assets/selfie2.jpg"/><span class="font-semibold text-lg text-white">Erwin Smit</span></div></a><nav class="flex-grow"><ul class="flex justify-end space-x-6"><li><a class="hover:text-blue-200 transition duration-150 ease-in-out" href="/">About me</a></li><li><a class="hover:text-blue-200 transition duration-150 ease-in-out" href="/blog">Blog</a></li></ul></nav></div></div></header><main class="min-h-screen"><article class="max-w-7xl mx-auto px-8 my-12"><h1 class="w-full relative mb-8 text-6xl font-extrabold tracking-normal text-center title-font"><span class="bg-clip-text text-transparent bg-gradient-to-b from-blue-600 to-blue-500">How to make your Sitecore SXA site perform</span></h1><div class="flex items-center justify-center mb-16"><p class="text-base font-medium text-gray-600 group-hover:text-gray-800"><time dateTime="2020-11-12">November	12, 2020</time></p></div><div class="prose lg:prose-xl max-w-none prose-pre:p-0"><p>From my experience websites that are built using Sitecore SXA with the standard themes enabled don&#x27;t perform very well. In this post I dive into the root cause of this problem and how to fix this.</p>
<h2>The problems with Sitecore SXA and frontend code</h2>
<p>To put it bluntly, the performance from Sitecore out of the box is not great. We can measure this with <a href="https://developers.google.com/web/tools/lighthouse">Google Lighthouse</a>, a tool standard available in the Chrome browser that rates your website on performance (among other things).</p>
<p>Let&#x27;s have a look at the Lighthouse report with the standard theme switched on.</p>
<p><img src="/blog/lightspeed-standard.jpg" alt="alt text" title="Lightspeed report SXA wireframe"/></p>
<p>As we can see we lose 0.8 seconds with unused JavaScript, that time alone should already be enough to load a whole website. But instead we just loaded JavaScript that is just sitting there doing nothing! With the unused CSS combined we can gain almost a full second by just removing what we don&#x27;t actually use.</p>
<p>Let&#x27;s have a look at the <strong>JavaScript sources</strong>
<img src="/blog/javascript-sources-standard.jpg" alt="alt text" title="Javascript sources SXA wireframe"/>
That is 1.2MB of JavaScript! And this will be loaded on every page. So even if you have a page with some rich text and no interaction, you will still get 1.2MB of JavaScript loaded on your page. Even for complex JavaScript applications this is a lot.</p>
<p>And the <strong>CSS sources</strong>
<img src="/blog/css-sources-standard.jpg" alt="alt text" title="Css sources SXA wireframe"/>
Also here the amount of loaded CSS is huge, because SXA is including a lot of 3rd-party CSS code for styling components you might not even use.</p>
<h2>Where is this all coming from?</h2>
<p>The standard theme in SXA is very bloated. To clarify this, the following list of libraries are included in the core-libraries base theme.</p>
<p>I included some comments on why you would not want the respective library loaded on every page of your website:</p>














































































































<table><thead><tr><th>KB</th><th>Library</th><th>Comments</th></tr></thead><tbody><tr><td>332</td><td>&#x27;xaquery.min.js&#x27;</td><td>This is jQuery wrapped in the XA (eXperience Accelerator) namespace. So if you don&#x27;t need/use it, this results in 332kb of unused JavaScript</td></tr><tr><td>212</td><td>fullcalendar.min.js</td><td>Required for the calendar component of SXA. How many pages have a calendar on them. Because there is no lazy-loading available, in most pages you will have 212kb of unused JavaScript</td></tr><tr><td>156</td><td>&#x27;mediaelement-and-player.min.js&#x27;</td><td>This library is a very old wrapper around the HTML5 video element, unnecessary in this day and age</td></tr><tr><td>72</td><td>galleria-157.min.js</td><td>This library is used by the carousel component. Do you want a carousel on every page? <a href="http://shouldiuseacarousel.com/">Do you even need a carousel</a>?</td></tr><tr><td>72</td><td>lo-dash.min.js</td><td>Lodash is a JavaScript utility library. With lodash you usually only need a couple of functions, however in the core-libraries base theme they are nearly all included</td></tr><tr><td>52</td><td>moment.min.js</td><td><a href="https://momentjs.com/docs/#/-project-status">Deprecated</a>. A huge library for displaying... dates</td></tr><tr><td>48</td><td>jquerymCustomScrollbar.min.js</td><td>Overwriting scrollbars with this library is an anti-pattern</td></tr><tr><td>44</td><td>typeahead.min.js</td><td></td></tr><tr><td>24</td><td>hammer.min.js</td><td></td></tr><tr><td>20</td><td>backbone-min.min.js</td><td></td></tr><tr><td>20</td><td>modernizr.min.js</td><td></td></tr><tr><td>8</td><td>vimeo.min.js</td><td></td></tr><tr><td>8</td><td>dailymotion.min.js</td><td></td></tr><tr><td>8</td><td>twitch.min.js</td><td></td></tr><tr><td>8</td><td>facebook.min.js</td><td></td></tr><tr><td>8</td><td>gcal.min.js</td><td></td></tr><tr><td>8</td><td>soundcloud.min.js</td><td><a href="https://soundcloud.com/">Soundcloud</a> is cool... but how many sites do need Soundcloud?!</td></tr><tr><td>4</td><td>&#x27;flash-polyfill (1).min.js&#x27;</td><td>Flash! Those were the days...</td></tr><tr><td>4</td><td>jqueryuitouch-punchmin.min.js</td><td></td></tr><tr><td>4</td><td>ie-origin-fix.min.js</td><td></td></tr></tbody></table>
<p>So with all the above code we are already above 1MB, and that&#x27;s just library code! This does not even include your custom components code which I won&#x27;t go into, because this should already be enough motivation to do something about this. If you have this much unused JavaScript on your page, your Google Lighthouse score will always be sub-optimal.</p>
<p><strong>With our setup the average JS load on a page is only 30kb! (excluding google GTM / GA code).</strong></p>
<h2>How to fix this?</h2>
<h3>1. Remove all the SXA base theme dependencies out of your theme</h3>
<p>Remove everything so you start can with a nice clean slate.
I know that it feels strange to do this. But if you want to unclutter, you have to ask yourself: does it <a href="https://knowyourmeme.com/memes/does-it-spark-joy">spark joy</a>? If it doesn&#x27;t, thank Sitecore for all the unused code and trash it!</p>
<p><img src="/blog/does-it-spark-joy.jpg" alt="alt text" title="Does is spark joy?"/></p>
<p>You can still use the standard components from SXA, but you just need to add (or copy from SXA if you must) the specific component Javascript and CSS.</p>
<p>For example, we still use the standard cookie component from SXA. So we copied the JavaScript from the SXA Javascript, removed all the jQuery dependencies and added it to our own custom JavaScript bundle.</p>
<h3>2. Install proper tooling for your frontend builds</h3>
<p>If you want to use the out of the box tooling from SXA you don&#x27;t have access to nice things like Typescript, automatic-tree shaking etc. This is solved by my colleague Serge. Use this repository as a starting point for a good tooling setup:</p>
<p><a href="https://github.com/macaw-interactive/sxa-umbrella">https://github.com/macaw-interactive/sxa-umbrella</a></p>
<h3>3. Use Stencil for your components</h3>
<p>One of the technologies we adopted to create components in the Sitecore SXA worls is <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components">Web Components</a>. Web Components is a suite of different technologies to create reusable custom HTML elements with full support for <a href="https://support.google.com/webmasters/answer/7451184">SEO</a>.
Web Components have been around for a while, but now Microsoft is quickly killing off it&#x27;s legacy browsers (IE11 &amp; the old Edge browser), and Web Components are supported by all the major browsers. This allows us to develop component driven web applications without the need of a view library like React, VUE or Angular.</p>
<p>The native developer experience for Web Components is not great if you are used to the great tooling and the template language available with React. That&#x27;s where <a href="https://stenciljs.com/">Stencil</a> shines! Stencil is a toolchain for developing Web Components with ease. You can write your Stencil components in TSX (The TypeScript version of JSX), and Stencil makes sure that this compiles down to native Web Components your browser will understand. That means that your compiled code does not rely on any dependencies and your compiled code will be nice and lean.</p>
<p>Usually you need server-side rendering with similar JavaScript frameworks for SEO, and because the HTML won&#x27;t be rendered without JavaScript enabled. With Web Components however, both problems can be solved at once because you can add your <code>h1</code> tag or <code>p</code> tags simply to <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_templates_and_slots">slots</a> defined in your Web Component. This way Google will index your site, and you still see something on the screen if your JavaScript falls over.</p>
<p>We use slots for all the content that&#x27;s required for SEO. All the other HTML is in the TSX template. So when you view the source of our accordion component on the page you see this:</p>
<pre><code class="hljs language-html"><span class="hljs-tag">&lt;<span class="hljs-name">dmp-accordion</span> <span class="hljs-attr">can-open-multiple</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">dmp-accordion-item</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>Import title for SEO<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Import text for SEO<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">dmp-accordion-item</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dmp-accordion</span>&gt;</span>
</code></pre>
<p>So when Google indexer goes over your page, all the information is there for a successful indexation.</p>
<p>How does Stencil help you with the performance? You get <strong>code splitting</strong> and <strong>lazy loading</strong> out of the box. So it doesn&#x27;t matter if your theme contains 10 or 500 components, it will only load the JavaScript for the components that are actually on the page. From our experience you have about <strong>30kb</strong> of JavaScript on a page with a handful of components instead of the <strong>1MB+</strong> with the standard SXA theme switched on, quite a difference!</p>
<p>Stencil also provides things like <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_templates_and_slots">data-binding</a>, <a href="https://stenciljs.com/docs/properties">properties</a>, and <a href="https://stenciljs.com/docs/state#state-decorator">state management</a>. So no need for libraries like <a href="https://backbonejs.org/">Backbone.js</a> which is included in the standard SXA theme for all the search components.</p>
<h3>CSS building</h3>
<p>We use <a href="https://purgecss.com/"><strong>PurgeCSS</strong></a> for removing unused CSS. You run the PurgeCSS tooling after your SCSS compiler, so we included this in our PostCSS config. You supply PurgeCSS with all the HTML your application uses, and PurgeCSS ensures that all the CSS is removed that will not affect the given HTML. Especially for <a href="https://getbootstrap.com/docs/4.0/utilities/spacing/">spacing helpers</a> across multiple breakpoints you can save a lot of unused bytes here.</p>
<p>Because we try to manage all the components in Sitecore Scriban templates and Stencil components we know what HTML we use and don&#x27;t use.</p>
<p>This is out postcss setup to ensure our CSS is lean and mean:</p>
<pre><code class="hljs language-javascript"><span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;@fullhuman/postcss-purgecss&quot;</span>)({
  <span class="hljs-attr">content</span>: [<span class="hljs-string">&quot;./**/*.scriban&quot;</span>, <span class="hljs-string">&quot;./**/*.tsx&quot;</span>, <span class="hljs-string">&quot;./stencil/src/**/*.js&quot;</span>],
  <span class="hljs-attr">safelist</span>: {
    <span class="hljs-attr">greedy</span>: [<span class="hljs-regexp">/pagemode-edit$/</span>],
  },
});
</code></pre>
<p>The result of this is that our CSS bundle is <strong>14kb</strong>, compared to the <strong>140kb</strong> when using the standard SXA theme. This won&#x27;t be the biggest game changer, but if you add up all the marginal gains you get big gains!</p>
<h2>Final result</h2>
<p>This is the lighthouse report on the latest <a href="https://jaaah.nl/">SXA Website</a> we built.</p>
<p><img src="/blog/final-result.jpg" alt="alt text" title="Fast!"/></p>
<p>With a combined CSS/JS footprint of less then 50kb it&#x27;s almost <strong>25 times</strong> more lightweight than the standard SXA theme!</p></div></article></main><section class="bg-gray-800 text-white py-12"><div class="container mx-auto px-4 text-center"><h2 class="text-2xl font-bold mb-6" id="connect">Connect With Me</h2><div class="flex justify-center space-x-6"><a href="https://github.com/erwinsmit" target="_blank" rel="noopener noreferrer" class="hover:text-blue-400 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg><span class="sr-only">GitHub</span></a><a href="https://www.linkedin.com/in/erwin-smit-40957840/" target="_blank" rel="noopener noreferrer" class="hover:text-blue-400 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-linkedin"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect width="4" height="12" x="2" y="9"></rect><circle cx="4" cy="4" r="2"></circle></svg><span class="sr-only">LinkedIn</span></a></div></div></section><script src="/_next/static/chunks/webpack-8af1d2e0ff41d756.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"4:\"$Sreact.fragment\"\n5:I[7256,[\"231\",\"static/chunks/231-015614b9a59ae6eb.js\",\"173\",\"static/chunks/173-e6c8bf506bfb93ff.js\",\"185\",\"static/chunks/app/layout-3ede681d466d9354.js\"],\"default\"]\n6:I[9275,[],\"\"]\n7:I[1343,[],\"\"]\n8:I[4703,[\"231\",\"static/chunks/231-015614b9a59ae6eb.js\",\"160\",\"static/chunks/app/not-found-081a5836cd82c2ca.js\"],\"default\"]\n9:I[4080,[\"231\",\"static/chunks/231-015614b9a59ae6eb.js\",\"173\",\"static/chunks/173-e6c8bf506bfb93ff.js\",\"185\",\"static/chunks/app/layout-3ede681d466d9354.js\"],\"\"]\nb:I[3120,[],\"OutletBoundary\"]\nd:I[3120,[],\"MetadataBoundary\"]\nf:I[3120,[],\"ViewportBoundary\"]\n11:I[6130,[],\"\"]\n1:HL[\"/_next/static/media/a34f9d1faa5f3315-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/css/0f5f8cc0eb7d6afc.css\",\"style\"]\n3:HL[\"/_next/static/css/3a398bc4ce4edcc7.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"5e7jlSnlT4YA3CUIxxZ9k\",\"p\":\"\",\"c\":[\"\",\"blog\",\"make-your-sxa-site-perform\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"make-your-sxa-site-perform\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"make-your-sxa-site-perform\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$4\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/0f5f8cc0eb7d6afc.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"sizes\":\"180x180\",\"href\":\"/favicon/apple-touch-icon.png\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/png\",\"sizes\":\"32x32\",\"href\":\"/favicon/favicon-32x32.png\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/png\",\"sizes\":\"16x16\",\"href\":\"/favicon/favicon-16x16.png\"}],[\"$\",\"link\",null,{\"rel\":\"manifest\",\"href\":\"/favicon/site.webmanifest\"}],[\"$\",\"link\",null,{\"rel\":\"mask-icon\",\"href\":\"/favicon/safari-pinned-tab.svg\",\"color\":\"#000000\"}],[\"$\",\"link\",null,{\"rel\":\"shortcut icon\",\"href\":\"/favicon/favicon.ico\"}],[\"$\",\"meta\",null,{\"name\":\"msapplication-TileColor\",\"content\":\"#000000\"}],[\"$\",\"meta\",null,{\"name\":\"msapplication-config\",\"content\":\"/favicon/browserconfig.xml\"}],[\"$\",\"meta\",null,{\"name\":\"theme-color\",\"content\":\"#000\"}],[\"$\",\"link\",null,{\"rel\":\"alternate\",\"type\":\"application/rss+xml\",\"href\":\"/feed.xml\"}]]}],[\"$\",\"body\",null,{\"className\":\"bg-gray-100 [object Object]\",\"children\":[[\"$\",\"$L5\",null,{}],[\"$\",\"main\",null,{\"className\":\"min-h-screen\",\"children\":[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$\",\"$L8\",null,{}],\"notFoundStyles\":[]}]}],[\"$\",\"section\",null,{\"className\":\"bg-gray-800 text-white py-12\",\"children\":[\"$\",\"div\",null,{\"className\":\"container mx-auto px-4 text-center\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"text-2xl font-bold mb-6\",\"id\":\"connect\",\"children\":\"Connect With Me\"}],[\"$\",\"div\",null,{\"className\":\"flex justify-center space-x-6\",\"children\":[[\"$\",\"a\",null,{\"href\":\"https://github.com/erwinsmit\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"hover:text-blue-400 transition-colors\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":32,\"height\":32,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-github\",\"children\":[[\"$\",\"path\",\"tonef\",{\"d\":\"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4\"}],[\"$\",\"path\",\"9comsn\",{\"d\":\"M9 18c-4.51 2-5-2-7-2\"}],\"$undefined\"]}],[\"$\",\"span\",null,{\"className\":\"sr-only\",\"children\":\"GitHub\"}]]}],[\"$\",\"a\",null,{\"href\":\"https://www.linkedin.com/in/erwin-smit-40957840/\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"hover:text-blue-400 transition-colors\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":32,\"height\":32,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-linkedin\",\"children\":[[\"$\",\"path\",\"c2jq9f\",{\"d\":\"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z\"}],[\"$\",\"rect\",\"mk3on5\",{\"width\":\"4\",\"height\":\"12\",\"x\":\"2\",\"y\":\"9\"}],[\"$\",\"circle\",\"bt5ra8\",{\"cx\":\"4\",\"cy\":\"4\",\"r\":\"2\"}],\"$undefined\"]}],[\"$\",\"span\",null,{\"className\":\"sr-only\",\"children\":\"LinkedIn\"}]]}]]}]]}]}],[\"$\",\"$L9\",null,{\"id\":\"clarity-script\",\"strategy\":\"afterInteractive\",\"children\":\"\\n            (function(c,l,a,r,i,t,y){\\n                c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};\\n                t=l.createElement(r);t.async=1;t.src=\\\"https://www.clarity.ms/tag/\\\"+i;\\n                y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);\\n            })(window, document, \\\"clarity\\\", \\\"script\\\", \\\"ikt0a8erqz\\\");\\n          \"}]]}]]}]]}],{\"children\":[\"blog\",[\"$\",\"$4\",\"c\",{\"children\":[null,[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"make-your-sxa-site-perform\",\"d\"],[\"$\",\"$4\",\"c\",{\"children\":[null,[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",\"$0:f:0:1:2:children:2:children:0\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$4\",\"c\",{\"children\":[\"$La\",[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/3a398bc4ce4edcc7.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$Lb\",null,{\"children\":\"$Lc\"}]]}],{},null]},null]},null]},null],[\"$\",\"$4\",\"h\",{\"children\":[null,[\"$\",\"$4\",\"7fDBYvRGOKxAiPdJknG8Y\",{\"children\":[[\"$\",\"$Ld\",null,{\"children\":\"$Le\"}],[\"$\",\"$Lf\",null,{\"children\":\"$L10\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\"}]]}]]}]]],\"m\":\"$undefined\",\"G\":[\"$11\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"a:[\"$\",\"article\",null,{\"className\":\"max-w-7xl mx-auto px-8 my-12\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"w-full relative mb-8 text-6xl font-extrabold tracking-normal text-center title-font\",\"children\":[\"$\",\"span\",null,{\"className\":\"bg-clip-text text-transparent bg-gradient-to-b from-blue-600 to-blue-500\",\"children\":\"How to make your Sitecore SXA site perform\"}]}],[\"$\",\"div\",null,{\"className\":\"flex items-center justify-center mb-16\",\"children\":[\"$\",\"p\",null,{\"className\":\"text-base font-medium text-gray-600 group-hover:text-gray-800\",\"children\":[\"$\",\"time\",null,{\"dateTime\":\"2020-11-12\",\"children\":\"November\\t12, 2020\"}]}]}],[\"$\",\"div\",null,{\"className\":\"prose lg:prose-xl max-w-none prose-pre:p-0\",\"children\":[[\"$\",\"p\",\"p-0\",{\"children\":\"From my experience websites that are built using Sitecore SXA with the standard themes enabled don't perform very well. In this post I dive into the root cause of this problem and how to fix this.\"}],\"\\n\",[\"$\",\"h2\",\"h2-0\",{\"children\":\"The problems with Sitecore SXA and frontend code\"}],\"\\n\",[\"$\",\"p\",\"p-1\",{\"children\":[\"To put it bluntly, the performance from Sitecore out of the box is not great. We can measure this with \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://developers.google.com/web/tools/lighthouse\",\"children\":\"Google Lighthouse\"}],\", a tool standard available in the Chrome browser that rates your website on performance (among other things).\"]}],\"\\n\",[\"$\",\"p\",\"p-2\",{\"children\":\"Let's have a look at the Lighthouse report with the standard theme switched on.\"}],\"\\n\",[\"$\",\"p\",\"p-3\",{\"children\":[\"$\",\"img\",\"img-0\",{\"src\":\"/blog/lightspeed-standard.jpg\",\"alt\":\"alt text\",\"title\":\"Lightspeed report SXA wireframe\"}]}],\"\\n\",[\"$\",\"p\",\"p-4\",{\"children\":\"As we can see we lose 0.8 seconds with unused JavaScript, that time alone should already be enough to load a whole website. But instead we just loaded JavaScript that is just sitting there doing nothing! With the unused CSS combined we can gain almost a full second by just removing what we don't actually use.\"}],\"\\n\",[\"$\",\"p\",\"p-5\",{\"children\":[\"Let's have a look at the \",[\"$\",\"strong\",\"strong-0\",{\"children\":\"JavaScript sources\"}],\"\\n\",[\"$\",\"img\",\"img-0\",{\"src\":\"/blog/javascript-sources-standard.jpg\",\"alt\":\"alt text\",\"title\":\"Javascript sources SXA wireframe\"}],\"\\nThat is 1.2MB of JavaScript! And this will be loaded on every page. So even if you have a page with some rich text and no interaction, you will still get 1.2MB of JavaScript loaded on your page. Even for complex JavaScript applications this is a lot.\"]}],\"\\n\",[\"$\",\"p\",\"p-6\",{\"children\":[\"And the \",[\"$\",\"strong\",\"strong-0\",{\"children\":\"CSS sources\"}],\"\\n\",[\"$\",\"img\",\"img-0\",{\"src\":\"/blog/css-sources-standard.jpg\",\"alt\":\"alt text\",\"title\":\"Css sources SXA wireframe\"}],\"\\nAlso here the amount of loaded CSS is huge, because SXA is including a lot of 3rd-party CSS code for styling components you might not even use.\"]}],\"\\n\",[\"$\",\"h2\",\"h2-1\",{\"children\":\"Where is this all coming from?\"}],\"\\n\",[\"$\",\"p\",\"p-7\",{\"children\":\"The standard theme in SXA is very bloated. To clarify this, the following list of libraries are included in the core-libraries base theme.\"}],\"\\n\",[\"$\",\"p\",\"p-8\",{\"children\":\"I included some comments on why you would not want the respective library loaded on every page of your website:\"}],\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\",[\"$\",\"table\",\"table-0\",{\"children\":[[\"$\",\"thead\",\"thead-0\",{\"children\":[\"$\",\"tr\",\"tr-0\",{\"children\":[[\"$\",\"th\",\"th-0\",{\"children\":\"KB\"}],[\"$\",\"th\",\"th-1\",{\"children\":\"Library\"}],[\"$\",\"th\",\"th-2\",{\"children\":\"Comments\"}]]}]}],[\"$\",\"tbody\",\"tbody-0\",{\"children\":[[\"$\",\"tr\",\"tr-0\",{\"children\":[[\"$\",\"td\",\"td-0\",{\"children\":\"332\"}],[\"$\",\"td\",\"td-1\",{\"children\":\"'xaquery.min.js'\"}],[\"$\",\"td\",\"td-2\",{\"children\":\"This is jQuery wrapped in the XA (eXperience Accelerator) namespace. So if you don't need/use it, this results in 332kb of unused JavaScript\"}]]}],[\"$\",\"tr\",\"tr-1\",{\"children\":[[\"$\",\"td\",\"td-0\",{\"children\":\"212\"}],[\"$\",\"td\",\"td-1\",{\"children\":\"fullcalendar.min.js\"}],[\"$\",\"td\",\"td-2\",{\"children\":\"Required for the calendar component of SXA. How many pages have a calendar on them. Because there is no lazy-loading available, in most pages you will have 212kb of unused JavaScript\"}]]}],[\"$\",\"tr\",\"tr-2\",{\"children\":[[\"$\",\"td\",\"td-0\",{\"children\":\"156\"}],[\"$\",\"td\",\"td-1\",{\"children\":\"'mediaelement-and-player.min.js'\"}],[\"$\",\"td\",\"td-2\",{\"children\":\"This library is a very old wrapper around the HTML5 video element, unnecessary in this day and age\"}]]}],[\"$\",\"tr\",\"tr-3\",{\"children\":[[\"$\",\"td\",\"td-0\",{\"children\":\"72\"}],[\"$\",\"td\",\"td-1\",{\"children\":\"galleria-157.min.js\"}],[\"$\",\"td\",\"td-2\",{\"children\":[\"This library is used by the carousel component. Do you want a carousel on every page? \",[\"$\",\"a\",\"a-0\",{\"href\":\"http://shouldiuseacarousel.com/\",\"children\":\"Do you even need a carousel\"}],\"?\"]}]]}],[\"$\",\"tr\",\"tr-4\",{\"children\":[[\"$\",\"td\",\"td-0\",{\"children\":\"72\"}],[\"$\",\"td\",\"td-1\",{\"children\":\"lo-dash.min.js\"}],[\"$\",\"td\",\"td-2\",{\"children\":\"Lodash is a JavaScript utility library. With lodash you usually only need a couple of functions, however in the core-libraries base theme they are nearly all included\"}]]}],[\"$\",\"tr\",\"tr-5\",{\"children\":[[\"$\",\"td\",\"td-0\",{\"children\":\"52\"}],[\"$\",\"td\",\"td-1\",{\"children\":\"moment.min.js\"}],[\"$\",\"td\",\"td-2\",{\"children\":[[\"$\",\"a\",\"a-0\",{\"href\":\"https://momentjs.com/docs/#/-project-status\",\"children\":\"Deprecated\"}],\". A huge library for displaying... dates\"]}]]}],[\"$\",\"tr\",\"tr-6\",{\"children\":[[\"$\",\"td\",\"td-0\",{\"children\":\"48\"}],[\"$\",\"td\",\"td-1\",{\"children\":\"jquerymCustomScrollbar.min.js\"}],[\"$\",\"td\",\"td-2\",{\"children\":\"Overwriting scrollbars with this library is an anti-pattern\"}]]}],[\"$\",\"tr\",\"tr-7\",{\"children\":[[\"$\",\"td\",\"td-0\",{\"children\":\"44\"}],[\"$\",\"td\",\"td-1\",{\"children\":\"typeahead.min.js\"}],[\"$\",\"td\",\"td-2\",{}]]}],[\"$\",\"tr\",\"tr-8\",{\"children\":[[\"$\",\"td\",\"td-0\",{\"children\":\"24\"}],[\"$\",\"td\",\"td-1\",{\"children\":\"hammer.min.js\"}],[\"$\",\"td\",\"td-2\",{}]]}],[\"$\",\"tr\",\"tr-9\",{\"children\":[[\"$\",\"td\",\"td-0\",{\"children\":\"20\"}],[\"$\",\"td\",\"td-1\",{\"children\":\"backbone-min.min.js\"}],[\"$\",\"td\",\"td-2\",{}]]}],[\"$\",\"tr\",\"tr-10\",{\"children\":[[\"$\",\"td\",\"td-0\",{\"children\":\"20\"}],[\"$\",\"td\",\"td-1\",{\"children\":\"modernizr.min.js\"}],[\"$\",\"td\",\"td-2\",{}]]}],[\"$\",\"tr\",\"tr-11\",{\"children\":[[\"$\",\"td\",\"td-0\",{\"children\":\"8\"}],[\"$\",\"td\",\"td-1\",{\"children\":\"vimeo.min.js\"}],[\"$\",\"td\",\"td-2\",{}]]}],[\"$\",\"tr\",\"tr-12\",{\"children\":[[\"$\",\"td\",\"td-0\",{\"children\":\"8\"}],[\"$\",\"td\",\"td-1\",{\"children\":\"dailymotion.min.js\"}],[\"$\",\"td\",\"td-2\",{}]]}],[\"$\",\"tr\",\"tr-13\",{\"children\":[[\"$\",\"td\",\"td-0\",{\"children\":\"8\"}],[\"$\",\"td\",\"td-1\",{\"children\":\"twitch.min.js\"}],[\"$\",\"td\",\"td-2\",{}]]}],[\"$\",\"tr\",\"tr-14\",{\"children\":[[\"$\",\"td\",\"td-0\",{\"children\":\"8\"}],[\"$\",\"td\",\"td-1\",{\"children\":\"facebook.min.js\"}],[\"$\",\"td\",\"td-2\",{}]]}],[\"$\",\"tr\",\"tr-15\",{\"children\":[[\"$\",\"td\",\"td-0\",{\"children\":\"8\"}],[\"$\",\"td\",\"td-1\",{\"children\":\"gcal.min.js\"}],[\"$\",\"td\",\"td-2\",{}]]}],[\"$\",\"tr\",\"tr-16\",{\"children\":[[\"$\",\"td\",\"td-0\",{\"children\":\"8\"}],[\"$\",\"td\",\"td-1\",{\"children\":\"soundcloud.min.js\"}],[\"$\",\"td\",\"td-2\",{\"children\":[[\"$\",\"a\",\"a-0\",{\"href\":\"https://soundcloud.com/\",\"children\":\"Soundcloud\"}],\" is cool... but how many sites do need Soundcloud?!\"]}]]}],[\"$\",\"tr\",\"tr-17\",{\"children\":[[\"$\",\"td\",\"td-0\",{\"children\":\"4\"}],[\"$\",\"td\",\"td-1\",{\"children\":\"'flash-polyfill (1).min.js'\"}],[\"$\",\"td\",\"td-2\",{\"children\":\"Flash! Those were the days...\"}]]}],[\"$\",\"tr\",\"tr-18\",{\"children\":[[\"$\",\"td\",\"td-0\",{\"children\":\"4\"}],[\"$\",\"td\",\"td-1\",{\"children\":\"jqueryuitouch-punchmin.min.js\"}],[\"$\",\"td\",\"td-2\",{}]]}],[\"$\",\"tr\",\"tr-19\",{\"children\":[[\"$\",\"td\",\"td-0\",{\"children\":\"4\"}],[\"$\",\"td\",\"td-1\",{\"children\":\"ie-origin-fix.min.js\"}],[\"$\",\"td\",\"td-2\",{}]]}]]}]]}],\"\\n\",[\"$\",\"p\",\"p-9\",{\"children\":\"So with all the above code we are already above 1MB, and that's just library code! This does not even include your custom components code which I won't go into, because this should already be enough motivation to do something about this. If you have this much unused JavaScript on your page, your Google Lighthouse score will always be sub-optimal.\"}],\"\\n\",[\"$\",\"p\",\"p-10\",{\"children\":[\"$\",\"strong\",\"strong-0\",{\"children\":\"With our setup the average JS load on a page is only 30kb! (excluding google GTM / GA code).\"}]}],\"\\n\",[\"$\",\"h2\",\"h2-2\",{\"children\":\"How to fix this?\"}],\"\\n\",[\"$\",\"h3\",\"h3-0\",{\"children\":\"1. Remove all the SXA base theme dependencies out of your theme\"}],\"\\n\",[\"$\",\"p\",\"p-11\",{\"children\":[\"Remove everything so you start can with a nice clean slate.\\nI know that it feels strange to do this. But if you want to unclutter, you have to ask yourself: does it \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://knowyourmeme.com/memes/does-it-spark-joy\",\"children\":\"spark joy\"}],\"? If it doesn't, thank Sitecore for all the unused code and trash it!\"]}],\"\\n\",[\"$\",\"p\",\"p-12\",{\"children\":[\"$\",\"img\",\"img-0\",{\"src\":\"/blog/does-it-spark-joy.jpg\",\"alt\":\"alt text\",\"title\":\"Does is spark joy?\"}]}],\"\\n\",[\"$\",\"p\",\"p-13\",{\"children\":\"You can still use the standard components from SXA, but you just need to add (or copy from SXA if you must) the specific component Javascript and CSS.\"}],\"\\n\",[\"$\",\"p\",\"p-14\",{\"children\":\"For example, we still use the standard cookie component from SXA. So we copied the JavaScript from the SXA Javascript, removed all the jQuery dependencies and added it to our own custom JavaScript bundle.\"}],\"\\n\",[\"$\",\"h3\",\"h3-1\",{\"children\":\"2. Install proper tooling for your frontend builds\"}],\"\\n\",[\"$\",\"p\",\"p-15\",{\"children\":\"If you want to use the out of the box tooling from SXA you don't have access to nice things like Typescript, automatic-tree shaking etc. This is solved by my colleague Serge. Use this repository as a starting point for a good tooling setup:\"}],\"\\n\",[\"$\",\"p\",\"p-16\",{\"children\":[\"$\",\"a\",\"a-0\",{\"href\":\"https://github.com/macaw-interactive/sxa-umbrella\",\"children\":\"https://github.com/macaw-interactive/sxa-umbrella\"}]}],\"\\n\",[\"$\",\"h3\",\"h3-2\",{\"children\":\"3. Use Stencil for your components\"}],\"\\n\",[\"$\",\"p\",\"p-17\",{\"children\":[\"One of the technologies we adopted to create components in the Sitecore SXA worls is \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/Web_Components\",\"children\":\"Web Components\"}],\". Web Components is a suite of different technologies to create reusable custom HTML elements with full support for \",[\"$\",\"a\",\"a-1\",{\"href\":\"https://support.google.com/webmasters/answer/7451184\",\"children\":\"SEO\"}],\".\\nWeb Components have been around for a while, but now Microsoft is quickly killing off it's legacy browsers (IE11 \u0026 the old Edge browser), and Web Components are supported by all the major browsers. This allows us to develop component driven web applications without the need of a view library like React, VUE or Angular.\"]}],\"\\n\",[\"$\",\"p\",\"p-18\",{\"children\":[\"The native developer experience for Web Components is not great if you are used to the great tooling and the template language available with React. That's where \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://stenciljs.com/\",\"children\":\"Stencil\"}],\" shines! Stencil is a toolchain for developing Web Components with ease. You can write your Stencil components in TSX (The TypeScript version of JSX), and Stencil makes sure that this compiles down to native Web Components your browser will understand. That means that your compiled code does not rely on any dependencies and your compiled code will be nice and lean.\"]}],\"\\n\",[\"$\",\"p\",\"p-19\",{\"children\":[\"Usually you need server-side rendering with similar JavaScript frameworks for SEO, and because the HTML won't be rendered without JavaScript enabled. With Web Components however, both problems can be solved at once because you can add your \",[\"$\",\"code\",\"code-0\",{\"children\":\"h1\"}],\" tag or \",[\"$\",\"code\",\"code-1\",{\"children\":\"p\"}],\" tags simply to \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_templates_and_slots\",\"children\":\"slots\"}],\" defined in your Web Component. This way Google will index your site, and you still see something on the screen if your JavaScript falls over.\"]}],\"\\n\",[\"$\",\"p\",\"p-20\",{\"children\":\"We use slots for all the content that's required for SEO. All the other HTML is in the TSX template. So when you view the source of our accordion component on the page you see this:\"}],\"\\n\",[\"$\",\"pre\",\"pre-0\",{\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"hljs language-html\",\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-tag\",\"children\":[\"\u003c\",[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-name\",\"children\":\"dmp-accordion\"}],\" \",[\"$\",\"span\",\"span-1\",{\"className\":\"hljs-attr\",\"children\":\"can-open-multiple\"}],\"\u003e\"]}],\"\\n  \",[\"$\",\"span\",\"span-1\",{\"className\":\"hljs-tag\",\"children\":[\"\u003c\",[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-name\",\"children\":\"dmp-accordion-item\"}],\"\u003e\"]}],\"\\n    \",[\"$\",\"span\",\"span-2\",{\"className\":\"hljs-tag\",\"children\":[\"\u003c\",[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-name\",\"children\":\"h3\"}],\" \",[\"$\",\"span\",\"span-1\",{\"className\":\"hljs-attr\",\"children\":\"slot\"}],\"=\",[\"$\",\"span\",\"span-2\",{\"className\":\"hljs-string\",\"children\":\"\\\"title\\\"\"}],\"\u003e\"]}],\"Import title for SEO\",[\"$\",\"span\",\"span-3\",{\"className\":\"hljs-tag\",\"children\":[\"\u003c/\",[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-name\",\"children\":\"h3\"}],\"\u003e\"]}],\"\\n    \",[\"$\",\"span\",\"span-4\",{\"className\":\"hljs-tag\",\"children\":[\"\u003c\",[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-name\",\"children\":\"div\"}],\" \",[\"$\",\"span\",\"span-1\",{\"className\":\"hljs-attr\",\"children\":\"slot\"}],\"=\",[\"$\",\"span\",\"span-2\",{\"className\":\"hljs-string\",\"children\":\"\\\"content\\\"\"}],\"\u003e\"]}],\"\\n      \",[\"$\",\"span\",\"span-5\",{\"className\":\"hljs-tag\",\"children\":[\"\u003c\",[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-name\",\"children\":\"p\"}],\"\u003e\"]}],\"Import text for SEO\",[\"$\",\"span\",\"span-6\",{\"className\":\"hljs-tag\",\"children\":[\"\u003c/\",[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-name\",\"children\":\"p\"}],\"\u003e\"]}],\"\\n    \",[\"$\",\"span\",\"span-7\",{\"className\":\"hljs-tag\",\"children\":[\"\u003c/\",[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-name\",\"children\":\"div\"}],\"\u003e\"]}],\"\\n  \",[\"$\",\"span\",\"span-8\",{\"className\":\"hljs-tag\",\"children\":[\"\u003c/\",[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-name\",\"children\":\"dmp-accordion-item\"}],\"\u003e\"]}],\"\\n\",[\"$\",\"span\",\"span-9\",{\"className\":\"hljs-tag\",\"children\":[\"\u003c/\",[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-name\",\"children\":\"dmp-accordion\"}],\"\u003e\"]}],\"\\n\"]}]}],\"\\n\",[\"$\",\"p\",\"p-21\",{\"children\":\"So when Google indexer goes over your page, all the information is there for a successful indexation.\"}],\"\\n\",[\"$\",\"p\",\"p-22\",{\"children\":[\"How does Stencil help you with the performance? You get \",[\"$\",\"strong\",\"strong-0\",{\"children\":\"code splitting\"}],\" and \",[\"$\",\"strong\",\"strong-1\",{\"children\":\"lazy loading\"}],\" out of the box. So it doesn't matter if your theme contains 10 or 500 components, it will only load the JavaScript for the components that are actually on the page. From our experience you have about \",[\"$\",\"strong\",\"strong-2\",{\"children\":\"30kb\"}],\" of JavaScript on a page with a handful of components instead of the \",[\"$\",\"strong\",\"strong-3\",{\"children\":\"1MB+\"}],\" with the standard SXA theme switched on, quite a difference!\"]}],\"\\n\",[\"$\",\"p\",\"p-23\",{\"children\":[\"Stencil also provides things like \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_templates_and_slots\",\"children\":\"data-binding\"}],\", \",[\"$\",\"a\",\"a-1\",{\"href\":\"https://stenciljs.com/docs/properties\",\"children\":\"properties\"}],\", and \",[\"$\",\"a\",\"a-2\",{\"href\":\"https://stenciljs.com/docs/state#state-decorator\",\"children\":\"state management\"}],\". So no need for libraries like \",[\"$\",\"a\",\"a-3\",{\"href\":\"https://backbonejs.org/\",\"children\":\"Backbone.js\"}],\" which is included in the standard SXA theme for all the search components.\"]}],\"\\n\",[\"$\",\"h3\",\"h3-3\",{\"children\":\"CSS building\"}],\"\\n\",[\"$\",\"p\",\"p-24\",{\"children\":[\"We use \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://purgecss.com/\",\"children\":[\"$\",\"strong\",\"strong-0\",{\"children\":\"PurgeCSS\"}]}],\" for removing unused CSS. You run the PurgeCSS tooling after your SCSS compiler, so we included this in our PostCSS config. You supply PurgeCSS with all the HTML your application uses, and PurgeCSS ensures that all the CSS is removed that will not affect the given HTML. Especially for \",[\"$\",\"a\",\"a-1\",{\"href\":\"https://getbootstrap.com/docs/4.0/utilities/spacing/\",\"children\":\"spacing helpers\"}],\" across multiple breakpoints you can save a lot of unused bytes here.\"]}],\"\\n\",[\"$\",\"p\",\"p-25\",{\"children\":\"Because we try to manage all the components in Sitecore Scriban templates and Stencil components we know what HTML we use and don't use.\"}],\"\\n\",[\"$\",\"p\",\"p-26\",{\"children\":\"This is out postcss setup to ensure our CSS is lean and mean:\"}],\"\\n\",[\"$\",\"pre\",\"pre-1\",{\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"hljs language-javascript\",\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-built_in\",\"children\":\"require\"}],\"(\",[\"$\",\"span\",\"span-1\",{\"className\":\"hljs-string\",\"children\":\"\\\"@fullhuman/postcss-purgecss\\\"\"}],\")({\\n  \",[\"$\",\"span\",\"span-2\",{\"className\":\"hljs-attr\",\"children\":\"content\"}],\": [\",[\"$\",\"span\",\"span-3\",{\"className\":\"hljs-string\",\"children\":\"\\\"./**/*.scriban\\\"\"}],\", \",[\"$\",\"span\",\"span-4\",{\"className\":\"hljs-string\",\"children\":\"\\\"./**/*.tsx\\\"\"}],\", \",[\"$\",\"span\",\"span-5\",{\"className\":\"hljs-string\",\"children\":\"\\\"./stencil/src/**/*.js\\\"\"}],\"],\\n  \",[\"$\",\"span\",\"span-6\",{\"className\":\"hljs-attr\",\"children\":\"safelist\"}],\": {\\n    \",[\"$\",\"span\",\"span-7\",{\"className\":\"hljs-attr\",\"children\":\"greedy\"}],\": [\",[\"$\",\"span\",\"span-8\",{\"className\":\"hljs-regexp\",\"children\":\"/pagemode-edit$/\"}],\"],\\n  },\\n});\\n\"]}]}],\"\\n\",[\"$\",\"p\",\"p-27\",{\"children\":[\"The result of this is that our CSS bundle is \",[\"$\",\"strong\",\"strong-0\",{\"children\":\"14kb\"}],\", compared to the \",[\"$\",\"strong\",\"strong-1\",{\"children\":\"140kb\"}],\" when using the standard SXA theme. This won't be the biggest game changer, but if you add up all the marginal gains you get big gains!\"]}],\"\\n\",[\"$\",\"h2\",\"h2-3\",{\"children\":\"Final result\"}],\"\\n\",[\"$\",\"p\",\"p-28\",{\"children\":[\"This is the lighthouse report on the latest \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://jaaah.nl/\",\"children\":\"SXA Website\"}],\" we built.\"]}],\"\\n\",[\"$\",\"p\",\"p-29\",{\"children\":[\"$\",\"img\",\"img-0\",{\"src\":\"/blog/final-result.jpg\",\"alt\":\"alt text\",\"title\":\"Fast!\"}]}],\"\\n\",[\"$\",\"p\",\"p-30\",{\"children\":[\"With a combined CSS/JS footprint of less then 50kb it's almost \",[\"$\",\"strong\",\"strong-0\",{\"children\":\"25 times\"}],\" more lightweight than the standard SXA theme!\"]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"10:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"e:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"How to make your Sitecore SXA site perform\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"Erwin Smit - Freelance frontend developer / fullstack developer\"}],[\"$\",\"meta\",\"3\",{\"property\":\"og:title\",\"content\":\"How to make your Sitecore SXA site perform\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:description\",\"content\":\"Erwin Smit - Freelance frontend developer / fullstack developer\"}],[\"$\",\"meta\",\"5\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"6\",{\"name\":\"twitter:title\",\"content\":\"How to make your Sitecore SXA site perform\"}],[\"$\",\"meta\",\"7\",{\"name\":\"twitter:description\",\"content\":\"Erwin Smit - Freelance frontend developer / fullstack developer\"}]]\n"])</script><script>self.__next_f.push([1,"c:null\n"])</script></body></html>