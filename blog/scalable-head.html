<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/a34f9d1faa5f3315-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" as="image" href="/blog/monorepo.png"/><link rel="preload" as="image" href="/blog/theme-variables.png"/><link rel="preload" as="image" href="/blog/no-markup-or-styling.png"/><link rel="preload" as="image" href="/blog/graphql-alias.png"/><link rel="preload" as="image" href="/blog/component-name.png"/><link rel="preload" as="image" href="/blog/component-factory.png"/><link rel="preload" as="image" href="/blog/finished-rendering.png"/><link rel="stylesheet" href="/_next/static/css/0f5f8cc0eb7d6afc.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/3a398bc4ce4edcc7.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-8af1d2e0ff41d756.js"/><script src="/_next/static/chunks/4bd1b696-05ac3765304a89c0.js" async=""></script><script src="/_next/static/chunks/215-c1a7d2d931604563.js" async=""></script><script src="/_next/static/chunks/main-app-e5edefe120089e16.js" async=""></script><script src="/_next/static/chunks/231-015614b9a59ae6eb.js" async=""></script><script src="/_next/static/chunks/173-e6c8bf506bfb93ff.js" async=""></script><script src="/_next/static/chunks/app/layout-28f46ae9c6a8b2dc.js" async=""></script><script src="/_next/static/chunks/app/not-found-081a5836cd82c2ca.js" async=""></script><meta name="next-size-adjust"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><title>Create a scalable head for Sitecore JSS</title><meta name="description" content="Erwin Smit - Freelance frontend developer / fullstack developer"/><meta property="og:title" content="Create a scalable head for Sitecore JSS"/><meta property="og:description" content="Erwin Smit - Freelance frontend developer / fullstack developer"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Create a scalable head for Sitecore JSS"/><meta name="twitter:description" content="Erwin Smit - Freelance frontend developer / fullstack developer"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="bg-gray-100 [object Object]"><header class="bg-blue-600 text-white shadow-md"><div class="container mx-auto px-4 py-4"><div class="flex justify-between items-center"><a href="/"><div class="flex items-center space-x-4 bg-blue-700 rounded-full py-2 px-4"><img alt="Erwin Smit" loading="lazy" width="40" height="40" decoding="async" data-nimg="1" class="rounded-full border-2 border-white" style="color:transparent;height:40px;width:40px;object-fit:cover" src="/assets/selfie2.jpg"/><span class="font-semibold text-lg text-white">Erwin Smit</span></div></a><nav class="flex-grow"><ul class="flex justify-end space-x-6"><li><a class="hover:text-blue-200 transition duration-150 ease-in-out" href="/">About me</a></li><li><a class="hover:text-blue-200 transition duration-150 ease-in-out" href="/blog">Blog</a></li></ul></nav></div></div></header><main class="min-h-screen"><article class="max-w-7xl mx-auto px-8 my-12"><h1 class="w-full relative mb-8 text-6xl font-extrabold tracking-normal text-center title-font"><span class="bg-clip-text text-transparent bg-gradient-to-b from-blue-600 to-blue-500">Create a scalable head for Sitecore JSS</span></h1><div class="flex items-center justify-center mb-16"><p class="text-base font-medium text-gray-600 group-hover:text-gray-800"><time dateTime="2022-09-26">September	26, 2022</time></p></div><div class="prose lg:prose-xl max-w-none prose-pre:p-0"><p>I recently worked on a headless project with Sitecore, the way of working I choose there worked really well in my opinion. In this post, I like to talk about the choices I made and how they helped the team create a good workflow.</p>
<p>What do I mean by scalable in this context? By scalable I mean a few things:</p>
<ul>
<li>The head should be able to work with data model changes.</li>
<li>The head should be able to perform well even if there are hundreds of different components in the application.</li>
<li>The head should be able to look good in different color themes, different font sizes, different spacings, etc.</li>
<li>The team that develops the head should be able to scale well, and new members should be able to easily integrate into the project without any domain or Sitecore knowledge.</li>
</ul>
<h2>Monorepo</h2>
<p>Within the Monorepo I created a clear separation between UI components and the Sitecore JSS Next.js application.
See the following drawing:</p>
<p><img src="/blog/monorepo.png" alt="Monorepo"/></p>
<p>This monorepo is using NPM workspaces in combination with Turborepo, this works well but there are a lot of similar tools that achieve the same thing.
With monorepo&#x27;s it&#x27;s common to have <strong>packages</strong> and <strong>apps</strong>. Packages refer to internal codebases and apps are meant for applications that will be seen by a non-technical end-user. See the example from Turborepo for an <a href="https://turborepo.org/docs/getting-started/create-new#2-exploring-your-new-repo">excellent example</a>.</p>
<p>In the drawing above we have a couple of apps and packages:</p>
<ul>
<li><strong>UI components</strong>, this is where the front-end developers create their React components in <a href="https://storybook.js.org/">Storybook</a> out of the context of the client&#x27;s project or Sitecore</li>
<li><strong>Next.js corporate app</strong>, the Sitecore JSS Next.js SDK connecting to the Corporate JSS website setup in Sitecore. This app is depending on the UI components package.</li>
<li><strong>Next.js career app</strong>, the same as above but pointing at a different website within Sitecore.</li>
<li><strong>Apps/storefront</strong>, a fictional example of an app connected to <a href="https://ordercloud.io/">Sitecore Ordercloud</a>. This doesn&#x27;t exist (yet), but it explains the need of creating components that can work in all sorts of applications within the same monorepo.</li>
</ul>
<p>Why does a monorepo helps us scale?</p>
<ul>
<li>
<p><strong>Connect multiple (Next.js) apps with UI components</strong>.
This architecture allows us to set up multiple apps consuming the same set of components and other sharable code.</p>
</li>
<li>
<p><strong>Perfect for letting FE developer focus on small parts (without Sitecore experience).</strong>
A front end developer might never have to leave Storybook. In fact, this might even help to create generic flexible components without project or Sitecore domain stuff built in.</p>
</li>
<li>
<p><strong>Perfect for Sitecore devs to work on an app without having to worry about mark-up or styling.</strong>
They only have to worry about the contract, the difference between the data model from Sitecore and the property types set in the UI component. Just a bit of data-mapping instead of juggling HTML classes, divs and spans.</p>
</li>
<li>
<p><strong>Using npm workspaces with Turborepo. Ensures easy task management and fast builds.</strong>
Turborepo uses caching for it&#x27;s builds. That means that it only builds packages/apps that have changes. So even when the monorepo is huge, it will still perform with fast build times.</p>
</li>
<li>
<p><strong>Multiple apps / packages share the same node_modules.</strong>
The same node_modules are shared across the apps and packages when the versions are the same. So also the &quot;npm install&quot; should remain fast.</p>
</li>
</ul>
<h2>Component system / CSS JS</h2>
<p>I&#x27;m a big fan of not re-inventing the wheel on simple components that exist on all projects (Accordion/Tabs etc). Although they are easily created from scratch I see a lot of examples that are built poorly or are not accessible. When using a base component system like <a href="https://mui.com/">MUI</a> or <a href="https://reach.tech/">Reach</a> you don&#x27;t have to manually add the correct aria attributes and you&#x27;re ensured they work using the keyboard, screen reader, etc.</p>
<p>For this project, I picked MUI as a base system for all our components. The components are great and easily customized (no it doesn&#x27;t have to look like material UI) but you also get a good theming system based on <a href="https://emotion.sh/">Emotion</a> (a styled component library).</p>
<p>This theming system allows you to create consistency in the design implementation. And all this while using the IntelliSense of Typescript.</p>
<p>Even when you don&#x27;t want to use any of the components from MUI I would still consider using it as an Emotion boilerplate. It works great with Next.js apps (including the Sitecore <a href="https://github.com/Sitecore/jss/tree/dev/packages/sitecore-jss-nextjs">JSS Next.js SDK</a>). The CSS is automatically code-split, meaning that you can have 100s of components in your application but still a small CSS/JS bundle for the end-user.</p>
<h2>Rules of engagement</h2>
<p>Couple of rules I use on this project.</p>
<h3>Build your component with theme variables (support for multiple themes)</h3>
<p><img src="/blog/theme-variables.png" alt="Theme variables"/>
Avoid hard-coded spacing units and colors as much as possible. This way the components can be globally adjusted to be used in all sorts of contexts.</p>
<h3>Never use mark-up or styling in client-facing app</h3>
<p><img src="/blog/no-markup-or-styling.png" alt="No mark-up or styling"/>
Don&#x27;t add class names or styling to the React components within you&#x27;re Sitecore consuming Next.js apps. The whole point of this setup is to have a clear separation between UI components and Sitecore-related stuff. If this is done anyway, the design system created in Storybook is not leading anymore.</p>
<h3>Use Graphql aliases where possible</h3>
<p><img src="/blog/graphql-alias.png" alt="Graphql Alias"/>
When Graphql queries, <a href="https://doc.sitecore.com/xp/en/developers/hd/190/sitecore-headless-development/integrated-graphql-in-jss-apps.html">integrated or connected</a>, the rendering will be more future-proof if aliases are used. If the property names change in the future, the rendering component will still work. Only the query will need to be changed.</p>
<h2>Connect component to Sitecore</h2>
<p>Now when all the above is done, it&#x27;s very easy to create a React rendering for Sitecore.
On the project, we specifically refer to <strong>React renderings</strong> within the Sitecore Next.js app. The components with the UI component package are called just components. This prevents confusion.</p>
<ol>
<li>
<p><strong>Create a component within the JSS Next.js app as specified in Sitecore</strong>
<img src="/blog/component-name.png" alt="Component name Sitecore"/></p>
</li>
<li>
<p><strong>Component should get registered in the componentFactory.ts file automatically (using Sitecore JSS Bootstrap script)</strong>
<img src="/blog/component-factory.png" alt="Component factory"/></p>
</li>
<li>
<p><strong>Now, within the React rendering, refer to the component from the &quot;UI components&quot; package, map the properties from Sitecore to the model used in UI components and it&#x27;s done!</strong>
<img src="/blog/finished-rendering.png" alt="Finished rendering"/></p>
</li>
</ol></div></article></main><section class="bg-gray-800 text-white py-12"><div class="container mx-auto px-4 text-center"><h2 class="text-2xl font-bold mb-6" id="connect">Connect With Me</h2><div class="flex justify-center space-x-6"><a href="https://github.com/erwinsmit" target="_blank" rel="noopener noreferrer" class="hover:text-blue-400 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg><span class="sr-only">GitHub</span></a><a href="https://www.linkedin.com/in/erwin-smit-40957840/" target="_blank" rel="noopener noreferrer" class="hover:text-blue-400 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-linkedin"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect width="4" height="12" x="2" y="9"></rect><circle cx="4" cy="4" r="2"></circle></svg><span class="sr-only">LinkedIn</span></a></div></div></section><script src="/_next/static/chunks/webpack-8af1d2e0ff41d756.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"4:\"$Sreact.fragment\"\n5:I[7256,[\"231\",\"static/chunks/231-015614b9a59ae6eb.js\",\"173\",\"static/chunks/173-e6c8bf506bfb93ff.js\",\"185\",\"static/chunks/app/layout-28f46ae9c6a8b2dc.js\"],\"default\"]\n6:I[9275,[],\"\"]\n7:I[1343,[],\"\"]\n8:I[4703,[\"231\",\"static/chunks/231-015614b9a59ae6eb.js\",\"160\",\"static/chunks/app/not-found-081a5836cd82c2ca.js\"],\"default\"]\na:I[3120,[],\"OutletBoundary\"]\nc:I[3120,[],\"MetadataBoundary\"]\ne:I[3120,[],\"ViewportBoundary\"]\n10:I[6130,[],\"\"]\n1:HL[\"/_next/static/media/a34f9d1faa5f3315-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/css/0f5f8cc0eb7d6afc.css\",\"style\"]\n3:HL[\"/_next/static/css/3a398bc4ce4edcc7.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"qbAWKY8PVw4b-TN6TLmIA\",\"p\":\"\",\"c\":[\"\",\"blog\",\"scalable-head\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"scalable-head\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"scalable-head\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$4\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/0f5f8cc0eb7d6afc.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"sizes\":\"180x180\",\"href\":\"/favicon/apple-touch-icon.png\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/png\",\"sizes\":\"32x32\",\"href\":\"/favicon/favicon-32x32.png\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/png\",\"sizes\":\"16x16\",\"href\":\"/favicon/favicon-16x16.png\"}],[\"$\",\"link\",null,{\"rel\":\"manifest\",\"href\":\"/favicon/site.webmanifest\"}],[\"$\",\"link\",null,{\"rel\":\"mask-icon\",\"href\":\"/favicon/safari-pinned-tab.svg\",\"color\":\"#000000\"}],[\"$\",\"link\",null,{\"rel\":\"shortcut icon\",\"href\":\"/favicon/favicon.ico\"}],[\"$\",\"meta\",null,{\"name\":\"msapplication-TileColor\",\"content\":\"#000000\"}],[\"$\",\"meta\",null,{\"name\":\"msapplication-config\",\"content\":\"/favicon/browserconfig.xml\"}],[\"$\",\"meta\",null,{\"name\":\"theme-color\",\"content\":\"#000\"}],[\"$\",\"link\",null,{\"rel\":\"alternate\",\"type\":\"application/rss+xml\",\"href\":\"/feed.xml\"}]]}],[\"$\",\"body\",null,{\"className\":\"bg-gray-100 [object Object]\",\"children\":[[\"$\",\"$L5\",null,{}],[\"$\",\"main\",null,{\"className\":\"min-h-screen\",\"children\":[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$\",\"$L8\",null,{}],\"notFoundStyles\":[]}]}],[\"$\",\"section\",null,{\"className\":\"bg-gray-800 text-white py-12\",\"children\":[\"$\",\"div\",null,{\"className\":\"container mx-auto px-4 text-center\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"text-2xl font-bold mb-6\",\"id\":\"connect\",\"children\":\"Connect With Me\"}],[\"$\",\"div\",null,{\"className\":\"flex justify-center space-x-6\",\"children\":[[\"$\",\"a\",null,{\"href\":\"https://github.com/erwinsmit\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"hover:text-blue-400 transition-colors\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":32,\"height\":32,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-github\",\"children\":[[\"$\",\"path\",\"tonef\",{\"d\":\"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4\"}],[\"$\",\"path\",\"9comsn\",{\"d\":\"M9 18c-4.51 2-5-2-7-2\"}],\"$undefined\"]}],[\"$\",\"span\",null,{\"className\":\"sr-only\",\"children\":\"GitHub\"}]]}],[\"$\",\"a\",null,{\"href\":\"https://www.linkedin.com/in/erwin-smit-40957840/\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"hover:text-blue-400 transition-colors\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":32,\"height\":32,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-linkedin\",\"children\":[[\"$\",\"path\",\"c2jq9f\",{\"d\":\"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z\"}],[\"$\",\"rect\",\"mk3on5\",{\"width\":\"4\",\"height\":\"12\",\"x\":\"2\",\"y\":\"9\"}],[\"$\",\"circle\",\"bt5ra8\",{\"cx\":\"4\",\"cy\":\"4\",\"r\":\"2\"}],\"$undefined\"]}],[\"$\",\"span\",null,{\"className\":\"sr-only\",\"children\":\"LinkedIn\"}]]}]]}]]}]}]]}]]}]]}],{\"children\":[\"blog\",[\"$\",\"$4\",\"c\",{\"children\":[null,[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"scalable-head\",\"d\"],[\"$\",\"$4\",\"c\",{\"children\":[null,[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",\"$0:f:0:1:2:children:2:children:0\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$4\",\"c\",{\"children\":[\"$L9\",[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/3a398bc4ce4edcc7.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$La\",null,{\"children\":\"$Lb\"}]]}],{},null]},null]},null]},null],[\"$\",\"$4\",\"h\",{\"children\":[null,[\"$\",\"$4\",\"-y0wsUxujv9YJwF2ISd2t\",{\"children\":[[\"$\",\"$Lc\",null,{\"children\":\"$Ld\"}],[\"$\",\"$Le\",null,{\"children\":\"$Lf\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\"}]]}]]}]]],\"m\":\"$undefined\",\"G\":[\"$10\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"9:[\"$\",\"article\",null,{\"className\":\"max-w-7xl mx-auto px-8 my-12\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"w-full relative mb-8 text-6xl font-extrabold tracking-normal text-center title-font\",\"children\":[\"$\",\"span\",null,{\"className\":\"bg-clip-text text-transparent bg-gradient-to-b from-blue-600 to-blue-500\",\"children\":\"Create a scalable head for Sitecore JSS\"}]}],[\"$\",\"div\",null,{\"className\":\"flex items-center justify-center mb-16\",\"children\":[\"$\",\"p\",null,{\"className\":\"text-base font-medium text-gray-600 group-hover:text-gray-800\",\"children\":[\"$\",\"time\",null,{\"dateTime\":\"2022-09-26\",\"children\":\"September\\t26, 2022\"}]}]}],[\"$\",\"div\",null,{\"className\":\"prose lg:prose-xl max-w-none prose-pre:p-0\",\"children\":[[\"$\",\"p\",\"p-0\",{\"children\":\"I recently worked on a headless project with Sitecore, the way of working I choose there worked really well in my opinion. In this post, I like to talk about the choices I made and how they helped the team create a good workflow.\"}],\"\\n\",[\"$\",\"p\",\"p-1\",{\"children\":\"What do I mean by scalable in this context? By scalable I mean a few things:\"}],\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"The head should be able to work with data model changes.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"The head should be able to perform well even if there are hundreds of different components in the application.\"}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":\"The head should be able to look good in different color themes, different font sizes, different spacings, etc.\"}],\"\\n\",[\"$\",\"li\",\"li-3\",{\"children\":\"The team that develops the head should be able to scale well, and new members should be able to easily integrate into the project without any domain or Sitecore knowledge.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",\"h2-0\",{\"children\":\"Monorepo\"}],\"\\n\",[\"$\",\"p\",\"p-2\",{\"children\":\"Within the Monorepo I created a clear separation between UI components and the Sitecore JSS Next.js application.\\nSee the following drawing:\"}],\"\\n\",[\"$\",\"p\",\"p-3\",{\"children\":[\"$\",\"img\",\"img-0\",{\"src\":\"/blog/monorepo.png\",\"alt\":\"Monorepo\"}]}],\"\\n\",[\"$\",\"p\",\"p-4\",{\"children\":[\"This monorepo is using NPM workspaces in combination with Turborepo, this works well but there are a lot of similar tools that achieve the same thing.\\nWith monorepo's it's common to have \",[\"$\",\"strong\",\"strong-0\",{\"children\":\"packages\"}],\" and \",[\"$\",\"strong\",\"strong-1\",{\"children\":\"apps\"}],\". Packages refer to internal codebases and apps are meant for applications that will be seen by a non-technical end-user. See the example from Turborepo for an \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://turborepo.org/docs/getting-started/create-new#2-exploring-your-new-repo\",\"children\":\"excellent example\"}],\".\"]}],\"\\n\",[\"$\",\"p\",\"p-5\",{\"children\":\"In the drawing above we have a couple of apps and packages:\"}],\"\\n\",[\"$\",\"ul\",\"ul-1\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[[\"$\",\"strong\",\"strong-0\",{\"children\":\"UI components\"}],\", this is where the front-end developers create their React components in \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://storybook.js.org/\",\"children\":\"Storybook\"}],\" out of the context of the client's project or Sitecore\"]}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[[\"$\",\"strong\",\"strong-0\",{\"children\":\"Next.js corporate app\"}],\", the Sitecore JSS Next.js SDK connecting to the Corporate JSS website setup in Sitecore. This app is depending on the UI components package.\"]}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":[[\"$\",\"strong\",\"strong-0\",{\"children\":\"Next.js career app\"}],\", the same as above but pointing at a different website within Sitecore.\"]}],\"\\n\",[\"$\",\"li\",\"li-3\",{\"children\":[[\"$\",\"strong\",\"strong-0\",{\"children\":\"Apps/storefront\"}],\", a fictional example of an app connected to \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://ordercloud.io/\",\"children\":\"Sitecore Ordercloud\"}],\". This doesn't exist (yet), but it explains the need of creating components that can work in all sorts of applications within the same monorepo.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"p-6\",{\"children\":\"Why does a monorepo helps us scale?\"}],\"\\n\",[\"$\",\"ul\",\"ul-2\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":[[\"$\",\"strong\",\"strong-0\",{\"children\":\"Connect multiple (Next.js) apps with UI components\"}],\".\\nThis architecture allows us to set up multiple apps consuming the same set of components and other sharable code.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":[[\"$\",\"strong\",\"strong-0\",{\"children\":\"Perfect for letting FE developer focus on small parts (without Sitecore experience).\"}],\"\\nA front end developer might never have to leave Storybook. In fact, this might even help to create generic flexible components without project or Sitecore domain stuff built in.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":[[\"$\",\"strong\",\"strong-0\",{\"children\":\"Perfect for Sitecore devs to work on an app without having to worry about mark-up or styling.\"}],\"\\nThey only have to worry about the contract, the difference between the data model from Sitecore and the property types set in the UI component. Just a bit of data-mapping instead of juggling HTML classes, divs and spans.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",\"li-3\",{\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":[[\"$\",\"strong\",\"strong-0\",{\"children\":\"Using npm workspaces with Turborepo. Ensures easy task management and fast builds.\"}],\"\\nTurborepo uses caching for it's builds. That means that it only builds packages/apps that have changes. So even when the monorepo is huge, it will still perform with fast build times.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",\"li-4\",{\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":[[\"$\",\"strong\",\"strong-0\",{\"children\":\"Multiple apps / packages share the same node_modules.\"}],\"\\nThe same node_modules are shared across the apps and packages when the versions are the same. So also the \\\"npm install\\\" should remain fast.\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",\"h2-1\",{\"children\":\"Component system / CSS JS\"}],\"\\n\",[\"$\",\"p\",\"p-7\",{\"children\":[\"I'm a big fan of not re-inventing the wheel on simple components that exist on all projects (Accordion/Tabs etc). Although they are easily created from scratch I see a lot of examples that are built poorly or are not accessible. When using a base component system like \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://mui.com/\",\"children\":\"MUI\"}],\" or \",[\"$\",\"a\",\"a-1\",{\"href\":\"https://reach.tech/\",\"children\":\"Reach\"}],\" you don't have to manually add the correct aria attributes and you're ensured they work using the keyboard, screen reader, etc.\"]}],\"\\n\",[\"$\",\"p\",\"p-8\",{\"children\":[\"For this project, I picked MUI as a base system for all our components. The components are great and easily customized (no it doesn't have to look like material UI) but you also get a good theming system based on \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://emotion.sh/\",\"children\":\"Emotion\"}],\" (a styled component library).\"]}],\"\\n\",[\"$\",\"p\",\"p-9\",{\"children\":\"This theming system allows you to create consistency in the design implementation. And all this while using the IntelliSense of Typescript.\"}],\"\\n\",[\"$\",\"p\",\"p-10\",{\"children\":[\"Even when you don't want to use any of the components from MUI I would still consider using it as an Emotion boilerplate. It works great with Next.js apps (including the Sitecore \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://github.com/Sitecore/jss/tree/dev/packages/sitecore-jss-nextjs\",\"children\":\"JSS Next.js SDK\"}],\"). The CSS is automatically code-split, meaning that you can have 100s of components in your application but still a small CSS/JS bundle for the end-user.\"]}],\"\\n\",[\"$\",\"h2\",\"h2-2\",{\"children\":\"Rules of engagement\"}],\"\\n\",[\"$\",\"p\",\"p-11\",{\"children\":\"Couple of rules I use on this project.\"}],\"\\n\",[\"$\",\"h3\",\"h3-0\",{\"children\":\"Build your component with theme variables (support for multiple themes)\"}],\"\\n\",[\"$\",\"p\",\"p-12\",{\"children\":[[\"$\",\"img\",\"img-0\",{\"src\":\"/blog/theme-variables.png\",\"alt\":\"Theme variables\"}],\"\\nAvoid hard-coded spacing units and colors as much as possible. This way the components can be globally adjusted to be used in all sorts of contexts.\"]}],\"\\n\",[\"$\",\"h3\",\"h3-1\",{\"children\":\"Never use mark-up or styling in client-facing app\"}],\"\\n\",[\"$\",\"p\",\"p-13\",{\"children\":[[\"$\",\"img\",\"img-0\",{\"src\":\"/blog/no-markup-or-styling.png\",\"alt\":\"No mark-up or styling\"}],\"\\nDon't add class names or styling to the React components within you're Sitecore consuming Next.js apps. The whole point of this setup is to have a clear separation between UI components and Sitecore-related stuff. If this is done anyway, the design system created in Storybook is not leading anymore.\"]}],\"\\n\",[\"$\",\"h3\",\"h3-2\",{\"children\":\"Use Graphql aliases where possible\"}],\"\\n\",[\"$\",\"p\",\"p-14\",{\"children\":[[\"$\",\"img\",\"img-0\",{\"src\":\"/blog/graphql-alias.png\",\"alt\":\"Graphql Alias\"}],\"\\nWhen Graphql queries, \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://doc.sitecore.com/xp/en/developers/hd/190/sitecore-headless-development/integrated-graphql-in-jss-apps.html\",\"children\":\"integrated or connected\"}],\", the rendering will be more future-proof if aliases are used. If the property names change in the future, the rendering component will still work. Only the query will need to be changed.\"]}],\"\\n\",[\"$\",\"h2\",\"h2-3\",{\"children\":\"Connect component to Sitecore\"}],\"\\n\",[\"$\",\"p\",\"p-15\",{\"children\":[\"Now when all the above is done, it's very easy to create a React rendering for Sitecore.\\nOn the project, we specifically refer to \",[\"$\",\"strong\",\"strong-0\",{\"children\":\"React renderings\"}],\" within the Sitecore Next.js app. The components with the UI component package are called just components. This prevents confusion.\"]}],\"\\n\",[\"$\",\"ol\",\"ol-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":[[\"$\",\"strong\",\"strong-0\",{\"children\":\"Create a component within the JSS Next.js app as specified in Sitecore\"}],\"\\n\",[\"$\",\"img\",\"img-0\",{\"src\":\"/blog/component-name.png\",\"alt\":\"Component name Sitecore\"}]]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":[[\"$\",\"strong\",\"strong-0\",{\"children\":\"Component should get registered in the componentFactory.ts file automatically (using Sitecore JSS Bootstrap script)\"}],\"\\n\",[\"$\",\"img\",\"img-0\",{\"src\":\"/blog/component-factory.png\",\"alt\":\"Component factory\"}]]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":[[\"$\",\"strong\",\"strong-0\",{\"children\":\"Now, within the React rendering, refer to the component from the \\\"UI components\\\" package, map the properties from Sitecore to the model used in UI components and it's done!\"}],\"\\n\",[\"$\",\"img\",\"img-0\",{\"src\":\"/blog/finished-rendering.png\",\"alt\":\"Finished rendering\"}]]}],\"\\n\"]}],\"\\n\"]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"f:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"d:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"Create a scalable head for Sitecore JSS\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"Erwin Smit - Freelance frontend developer / fullstack developer\"}],[\"$\",\"meta\",\"3\",{\"property\":\"og:title\",\"content\":\"Create a scalable head for Sitecore JSS\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:description\",\"content\":\"Erwin Smit - Freelance frontend developer / fullstack developer\"}],[\"$\",\"meta\",\"5\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"6\",{\"name\":\"twitter:title\",\"content\":\"Create a scalable head for Sitecore JSS\"}],[\"$\",\"meta\",\"7\",{\"name\":\"twitter:description\",\"content\":\"Erwin Smit - Freelance frontend developer / fullstack developer\"}]]\n"])</script><script>self.__next_f.push([1,"b:null\n"])</script></body></html>